(function(e){function t(t){for(var a,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},i={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0307":function(e,t,r){e.exports=r.p+"img/ottr-logo.34402ede.png"},"034f":function(e,t,r){"use strict";var a=r("8a23"),i=r.n(a);i.a},"0718":function(e,t,r){e.exports=r.p+"img/student-in-train.fae39bc7.png"},"089f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECA6EWzH0gAAAW5JREFUSMft1suKwjAYBeCTOlHEW9250YXmAXw5n82l4F58AbEUKURRkdYG2/yaWSlIFaHaFmY8yzbwkQvJYb7v41Vms5k5n8/4VPr9Pn5eDZpMJmY8HuOT8Gg0gvXsJ2MMRASlFLJIYsZxHMPzPLPZbBCGIZbLJS6XS7bwarUyjuNgu90iiiIAAOcczWYTxphUABEhiqLEVt1gKaWZz+cIw/BuQKvVQrlcTj2z4/GI9Xr9GCYiLBaLBHpNtVpNDWutwRhLfLeuSyylRJ6xAGC320FrnT8cBAHyjnU9AP8LLiJf+Av/Ufid1+ctuF6vFwM3Go1iYNu2i4G73S6r1WrFLPVgMADnPDf41rmEEEwpZVzXvSsFSqm33uvT6QQieg5XKhUMh0PWbreN67rY7/cgIgRBACll6pZpjHlYj+/qLeccQggmhMDhcOC+78fT6RSe5328Wz+9uWzb1r1ej3U6nYctMfMrs1QqZXK4fgExfrZjb8DfUAAAAABJRU5ErkJggg=="},1771:function(e,t,r){var a={"./bringing-people-together.png":"b1f2","./carousel-img-1.png":"3d7a","./carousel-img-2.png":"d12b","./carousel-img-3.png":"bd32","./carousel-img-4.png":"7a83","./carousel-img-5-2.png":"9e14","./carousel-img-5-full.png":"1978","./carousel-img-5.png":"af4b","./error-404-logo.png":"b92a","./logo.png":"cf05","./logo.svg":"9b19","./luggage-rack.png":"1999","./ottr-icon.png":"8c2f","./ottr-logo-blue.png":"3408","./ottr-logo.png":"0307","./reserved-seat-down.png":"f57d","./reserved-seat-left.png":"b6b4","./reserved-seat-right.png":"7cc9","./reserved-seat-up.png":"8a7c","./reserving-seat-down.png":"a29e","./reserving-seat-left.png":"ba8e","./reserving-seat-right.png":"2bbd","./reserving-seat-up.png":"c0d6","./seat-down.png":"ac0b","./seat-left.png":"089f","./seat-right.png":"d7f9","./seat-up.png":"3bd0","./selected-seat-down.png":"8f8e","./selected-seat-left.png":"f584","./selected-seat-right.png":"1dce","./selected-seat-up.png":"ab68","./student-in-train.png":"0718","./table.png":"7629","./user-logo-man.png":"c86c","./wall.png":"ebf9","./woman-traveling.png":"91cf"};function i(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id="1771"},1978:function(e,t,r){e.exports=r.p+"img/carousel-img-5-full.545efe5d.png"},1999:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAIAAAC1JZyVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAOCSURBVEhL7VZJSBtRGO5kmyRO4pKYuITUBTdESxcMpBUj9NCCQiHowZMoepKCXrTgQRAP4nL2IiqIYA9SSnGroBZCtVJKKFUsVIwLFo0JNYkxe7/JDFpF0syAnvx4A/P/781887557/sfsbi4uby8ee8yCIKQSsVCoSAYDPn9oXA4zHZwB0VJm5vLia6u911dH9hcFEqlNDdXo9cng8zvDx4c/LFa98LhCNvNERkZSWtrbwRsFJ0BgBnk5WlbW593dLxsaalsb3/R1FSenCwXCJh+gh3NETQNHhaJBHK5RCoVpaUpS0oy9PqUtra3zc3jAwMfj47c4MMU0UuSInwH8yQniHAVFmobG59hElbrbmoqZTTm6nTJPT2vfL6gUilTqRI8Ht/U1Le6urKiovSVla2+vrlQiJuGNI1KRZlM+SUlmWKxQK2mSkt1SFZWFkQH0Dg8dFEUWVaWVVGRH4lECAIKhiJciFjRxGJhPLpDsThHXgEfoXngFml8vgDUD4X+vwdPTs7sdjdGcvoxAL0Ednedw8OWpaWf29t2uZycnv7O9J3D7fbv7TnHxlbm5tbX1w94mALtAr298xqNgiSFCNk0F2ByNpsDtsTGl8G4AE0zOvq5qqpUo6H4bT0oOTT06eTEe62SFzSTk18bGp5mZibxo3E6Tzs73x0fe7Cl2NQ/uKAZGFiAu8CSr2wI+FjUyuj7YJD+H9d+byAQ3Nj4DZNl48u4oLni0AxAUF39AD4EH4M9Y4HNzv6w2Y65rrGrDo33QjR4KJpMJi4uzoDfmEwFBkMOXM5sfpSXp8E6ZAagYXD8dkAvaJFISFESpVIukQhBhgwcDP5vt7tGRiw7O46EBLK29klWlsrl8jkcnuiDkDHkdvuQ8Xr9TCYGaJrsbFV9vdFsfqhQSJkPBBleDa2gO/4KQplMUlPzGD/gvL7BpFdXtyYmvsC8mUwM0KKlpCQYjTn376ugY3p6IppWq8SEUGNg3rhPTVUgRHHDPTMADSvTYMiGnsyLYoOmkUhEYOK6mjHtxEQZ6hMbxwSfjcIDdzQ8cEfDA7dIg/Ln9QaurRaxAU9zOE7ZICZoT9vfd46Pr+I8DmOO23NpT4OrWiy/2Dgm6HrT3T2NA7ROl0SSYkHcKsJSUYRwwg4Erj8FMGDLWn///ODgApu7AWi1ipmZ1wSOCi7XGZu7AcCR1WrqL5obW3tGIFgLAAAAAElFTkSuQmCC"},"1dce":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh0sM0NDHQAAAZFJREFUSMftlrFOG0EURc+MZuwVHjdJxK4wy8ZWlKAUgRRuqfgACipaSkBGSpWPiPIZ+Y8oRboohESRI+TIRUThgJMdjGTQDgV0rG3JXnYb32aaK533nt7MXNFut91Z/zlZqVSCtbVdLuL3YpxP8iAaTnRkDk4SGF59p9vtun6/3xjlU/cqkaDU7TmNpAStv7Ec7WHM9YngGV+/tIiiSGitR4M9D6KnUKnoGfpeAsBaBfzm1esWgg131jsU5XI5HVz2oFLxsXY1s/FbKzHmI4gXDrbEAy5XOvzR4w/EcUyuYIDYDpDyk8sdDLAYfKYQMPwpBuw4LQZsLUWNeg6eg+fgjFQ1pqiOg6LAS/mDjUk4PtrOHyxYJwxDkRp9kgTgP8Z0Z/gIVlKWaoGTXwcEgUrPXJcD6HQu8bzO1CnT9y3Wvrwbr0Swys8f+4RhIEamzOEQ/vZmuJ8SfH9A1TSARY6PdqjVaiIMS+Nz9axSCgSb/Dt/J7TW1OsuzwfkCUopnHNjClSKZvNthtASF/EbMcl1A0enY+jCkwFlAAAAAElFTkSuQmCC"},"21a9":function(e,t,r){"use strict";var a=r("a1e1"),i=r.n(a);i.a},"2bbd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSYJESNkXgAAAZlJREFUSMftlz1Lw1AUht97TRrTln5QaodulQ7iIkIpIlKKaDdx0p+gCBkL3brU0s3BSRd/gIg4SK3+BREXR90U2qI1DTXShlyHgCAkraRNMuiBw10O9+GeL95LJEliH+ohJmUcB6wXCNZWZTIsjsIB0/XRMdQJ6MvzFEqlEiuXy6lfgyk10jWOd941zKZPMDd/8Ni4CbNiscgGg8HPkpjVKBIBhGn7rw4GjVNRRCgKkMke4fbumC0utIggCNbgcATgeXFi6ZdlEYCKZjPLNjfuiWPNZQ1/gqIocBUMAO22iMt6gbkOBoBk8gGegLtdeAPu9Zg3YKPJPAA7uqv/wf/gvwWOx1VvwIEA8QYcCnmQ6nBYxdnpjvvgRIKgWq0SU+mj60C/D/h8qm0AY6JpU11fScitcOaaS9OAdgvovNkcEwrEZ9RvzRaNqojFCBr1PdRq+8RSZWqa4bbnkxpiMZ3+hN8PXJzvolKpkHzON1zejr0YKJBKAfncK+F5HstLzL0FIooEHMeBMWb9x6KUYmubTPTF2Yw88sIvdqRvryhWFK0AAAAASUVORK5CYII="},3408:function(e,t,r){e.exports=r.p+"img/ottr-logo-blue.839a6bce.png"},"3bd0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECIM7OAwyQAAAW1JREFUSMftlk1uwjAQhd8UDEIQYMEiCxBS4QBcm1PkCFyABkURkoMAocREBMdxF1URP4ZFa2gXmeV45M8zevYzxXGMv4jqvYU8zxGGod5sNkiSBEIICCEeblar1dBqteA4DrrdLgaDATmOY6wlU8eccz2fz8E5h5Tyx101m02MRiOMx2Oq1+uPwWEY6tlshv1+b2WkjDEMh0NMJhNijJ3yb+dFx+MRi8XCGhQApJQIggBBEOjz/AV4uVzq9XptXUjfcCOYiLBarZBl2VNUvN1usdvt3m/AUkqrIzbdkjiOPy7E5XmeTtMUvu+DMYZOp2MVmqYpkiRBr9eD67qoVCogz/P0dDoFABRFgXa7jX6/j0ajYQ0cRRE451BKgYi+HhClFJRSpyKt9VNGrbVGURRmVb8ySnAJLsEluAT/f3DVZNhCiF/9Lq/jcDjcuN4NOMsyRFF08k1bv49zSzSCr/25FJetIN/3VZ7nLz/AJ7c8wSvd/iEeAAAAAElFTkSuQmCC"},"3d7a":function(e,t,r){e.exports=r.p+"img/carousel-img-1.c2d0d569.png"},4656:function(e,t,r){"use strict";var a=r("efc8"),i=r.n(a);i.a},"52a5":function(e,t,r){"use strict";var a=r("82d5"),i=r.n(a);i.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=r("bc3a"),n=r.n(i),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"ottr-app"}},[a("v-dialog",{attrs:{width:"300"},on:{keydown:function(t){e.serverErrorDialog=!1}},model:{value:e.serverErrorDialog,callback:function(t){e.serverErrorDialog=t},expression:"serverErrorDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline mb-1"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"error"}},[e._v("mdi-alert")]),a("strong",[e._v("Server Error")])],1),a("v-card-text",{staticClass:"body-1 py-0"},[e._v(" "+e._s(e.serverErrorMessage))]),a("v-card-actions",{staticClass:"pa-0 ma-0"},[a("v-spacer"),a("v-btn",{staticClass:"pa-0 mr-2 mb-2",attrs:{color:"error",text:""},on:{click:function(t){e.serverErrorDialog=!1}}},[e._v(" OK ")])],1)],1)],1),a("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"secondary",height:"85"}},[a("v-row",{attrs:{"no-gutters":"",align:"center"}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[a("v-row",{attrs:{"no-gutters":"",align:"center"}},[a("v-btn",{staticClass:"hidden-sm-and-down mx-0 pl-2",attrs:{color:"primary"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.drawer,expression:"drawer"}]},[e._v("mdi-chevron-left")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:!e.drawer,expression:"!drawer"}]},[e._v("mdi-chevron-down")]),a("span",{staticClass:"ml-1 text-capitalize title"},[e._v(" Menu ")])],1),a("v-btn",{staticClass:"hidden-md-and-up",attrs:{icon:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[a("v-icon",[e._v("$menu")])],1)],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-row",{attrs:{"no-gutters":"",justify:"center",align:"center"}},[a("router-link",{attrs:{to:"/"}},[a("v-img",{attrs:{src:r("3408"),alt:"Online Train Ticket Reservation","max-height":"74","max-width":"208",transition:"scale-transition"}})],1)],1)],1),a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[a("v-row",{attrs:{"no-gutters":"",justify:"end"}},[e.userIsGuest?a("v-btn",{staticClass:"ml-4 pl-3 text-capitalize title hidden-sm-and-down",attrs:{color:"primary",to:"/register"}},[a("v-icon",{attrs:{size:"large"}},[e._v("mdi-account-plus")]),a("span",{staticClass:"ml-2 text-capitalize title"},[e._v(" Register ")])],1):e._e(),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.userIsGuest,expression:"userIsGuest"}],staticClass:"mx-4 pl-3 text-capitalize title hidden-sm-and-down",attrs:{color:"primary",to:"/login"}},[a("v-icon",{attrs:{size:"large"}},[e._v("mdi-login")]),a("span",{staticClass:"ml-2 text-capitalize title"},[e._v(" Login ")])],1),a("v-menu",{staticClass:"ml-auto my-auto",attrs:{"close-on-click":"","close-on-content-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"primary",dark:"",icon:e.$vuetify.breakpoint.smAndDown,hidden:e.userIsGuest}},r),[a("span",{staticClass:"text-capitalize subtitle-1 hidden-sm-and-down",staticStyle:{"text-transform":"none !important"}},[e._v(" Welcome, "+e._s(e.$store.getters.getUser.username)+" "),a("v-icon",{staticClass:"ml-1 mb-1 py-auto",attrs:{size:"medium"}},[e._v("mdi-arrow-down-drop-circle-outline")])],1),a("v-icon",{staticClass:"hidden-md-and-up"},[e._v("mdi-dots-vertical")])],1)]}}]),model:{value:e.valueOfDrobdownAppBar,callback:function(t){e.valueOfDrobdownAppBar=t},expression:"valueOfDrobdownAppBar"}},[a("v-list",{staticClass:"py-1"},e._l(e.dropDownAppBarItems,(function(t,r){return a("v-list-item",{key:r,attrs:{to:t.route},on:{click:function(r){return e.logoutWhenRequested(t)}}},[a("v-icon",{attrs:{color:"primary"}},[e._v(e._s(t.icon))]),a("v-list-item-title",{staticClass:"ml-2"},[e._v(e._s(t.title))])],1)})),1)],1)],1)],1)],1)],1),a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,color:"primary",app:"",dark:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",[e._l(e.menuItems,(function(t){return[t.heading&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?a("v-row",{key:t.heading,attrs:{align:"center"}},[a("v-subheader",{staticClass:"ml-3"},[e._v(" "+e._s(t.heading)+" ")])],1):t.children&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?a("v-list-group",{key:t.text,attrs:{color:"secondary","prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",{staticClass:"subtitle-1"},[e._v(" "+e._s(t.text)+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(r){e.$set(t,"model",r)},expression:"item.model"}},e._l(t.children,(function(t,r){return a("v-list-item",{key:r,staticClass:"ml-5",attrs:{link:"",to:t.route}},[t.icon?a("v-list-item-action",[a("v-icon",[e._v(e._s(t.icon))])],1):e._e(),a("v-list-item-content",[a("v-list-item-title",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.text)+" ")])],1)],1)})),1):t.text&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?a("v-list-item",{key:t.text,attrs:{link:"",to:t.route},on:{click:function(r){return e.logoutWhenRequested(t)}}},[a("v-list-item-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"subtitle-1"},[e._v(" "+e._s(t.text)+" ")])],1)],1):e._e()]}))],2)],1),a("v-content",{attrs:{app:"",id:"content"}},[a("router-view",{on:{serverError:e.onServerError}})],1),a("v-footer",{staticClass:"flex-column",staticStyle:{position:"absolute"},attrs:{app:"",inset:"",color:"#E9E9E9"}},[a("v-row",[a("strong",[e._v("Copyright Â© 2020 - Now | Catalin-Gabriel Anastasiu ("),a("a",{attrs:{href:"mailto:catalinanastas@gmail.com"}},[e._v("catalinanastas@gmail.com")]),e._v("). More details "),a("router-link",{attrs:{to:"/copyrights"}},[e._v("here")]),e._v(". ")],1)])],1)],1)},o=[],l=(r("caad"),r("b0c0"),r("2532"),{ADMIN:1,USER:2,GUEST:3}),c={SEAT_LEFT:1,SEAT_RIGHT:2,SEAT_UP:3,SEAT_DOWN:4,LUGGAGE_RACK:5,TABLE:6,WALL:7,RESERVED_SEAT_LEFT:8,RESERVED_SEAT_RIGHT:9,RESERVED_SEAT_UP:10,RESERVED_SEAT_DOWN:11,SELECTED_SEAT_LEFT:12,SELECTED_SEAT_RIGHT:13,SELECTED_SEAT_UP:14,SELECTED_SEAT_DOWN:15,RESERVING_SEAT_LEFT:16,RESERVING_SEAT_RIGHT:17,RESERVING_SEAT_UP:18,RESERVING_SEAT_DOWN:19},u={USER_ROLES:l,USER_GROUPS:{AUTHENTICATED:[l.ADMIN,l.USER],ADMIN_ONLY:[l.ADMIN],UNAUTHENTICATED:[l.GUEST]},LAYOUT:{GRID_MARGIN:1,ELEMENTS:c},ERRORS:{LOGIN_FAILED:"Login failed. Please check your credentials.",UNREACHABLE_SERVER:"Couldn't contact the server."},SEAT_SELECTION_REFRESH_TIMEOUT:24e4,SERVER_URL:"/api"},d=u,m={props:{source:String},data:function(){return{serverErrorDialog:!1,serverErrorMessage:"",drawer:null,valueOfDrobdownAppBar:!1,dropDownAppBarItems:[{title:"My Account",icon:"mdi-account-circle",route:"/my-account"},{title:"Log Out",icon:"mdi-power",route:"",isLogout:!0}],menuItems:[{heading:"Account",displayForScreenSize:"smAndDown"},{icon:"mdi-account-plus",text:"Register",route:"/register",displayForUserGroup:d.USER_GROUPS.UNAUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-login",text:"Login",route:"/login",displayForUserGroup:d.USER_GROUPS.UNAUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-account",text:"My Account",route:"/my-account",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-power",text:"Logout",route:"",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"smAndDown",isLogout:!0},{heading:"General"},{icon:"mdi-home",text:"Home",route:"/"},{icon:"mdi-account",text:"My Account",route:"/my-account",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"mdAndUp"},{icon:"mdi-ticket",text:"My Tickets",route:"/my-tickets",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED},{icon:"mdi-chevron-up","icon-alt":"mdi-chevron-down",text:"Railway Management",model:!1,displayForUserGroup:d.USER_GROUPS.ADMIN_ONLY,children:[{icon:"mdi-road-variant",text:"Routes",route:"/railway-management/routes"},{icon:"mdi-draw",text:"Car Layouts",route:"/railway-management/car-layouts"},{icon:"mdi-cog",text:"Miscellaneous",route:"/railway-management/miscellaneous"}]}]}},computed:{userRole:function(){return this.$store.getters.isLoggedIn?this.$store.getters.getUser.role:d.USER_ROLES.GUEST},userIsGuest:function(){return this.userRole===d.USER_ROLES.GUEST}},methods:{shouldDisplayForUserGroup:function(e){if(!e)return!0;if(!Array.isArray(e))throw console.error("displayGroup is not an Array!"),DOMException("displayGroup is not an Array!");return e.includes(this.userRole)},shouldDisplayForScreenSize:function(e){if(!e)return!0;var t=this.$vuetify.breakpoint.name;switch(e){case"mdAndUp":if(["md","lg","xl"].includes(t))return!0;break;case"mdAndDown":if(["xs","sm","md"].includes(t))return!0;break;case"smAndDown":if(["xs","sm"].includes(t))return!0;break;default:throw console.error("displayScreenSize has abeen given an invalid value!"),DOMException("displayScreenSize has abeen given an invalid value!")}return!1},onServerError:function(e){this.serverErrorDialog=!0,this.serverErrorMessage=e},logoutWhenRequested:function(e){e.isLogout&&(this.$store.dispatch("logout"),this.$router.push("/"))}}},p=m,v=(r("034f"),r("2877")),h=r("6544"),f=r.n(h),g=r("7496"),S=r("40dc"),y=r("8336"),A=r("b0af"),b=r("99d9"),E=r("62ad"),T=r("a75b"),w=r("169a"),C=r("553a"),x=r("132d"),R=r("adda"),_=r("8860"),k=r("56b0"),D=r("da13"),L=r("1800"),N=r("5d23"),O=r("e449"),U=r("f774"),V=r("0fd9"),I=r("2fa4"),F=r("e0c7"),M=Object(v["a"])(p,s,o,!1,null,null,null),B=M.exports;f()(M,{VApp:g["a"],VAppBar:S["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContent:T["a"],VDialog:w["a"],VFooter:C["a"],VIcon:x["a"],VImg:R["a"],VList:_["a"],VListGroup:k["a"],VListItem:D["a"],VListItemAction:L["a"],VListItemContent:N["a"],VListItemTitle:N["b"],VMenu:O["a"],VNavigationDrawer:U["a"],VRow:V["a"],VSpacer:I["a"],VSubheader:F["a"]});r("a623");var P=r("8c4f"),G=r("2f62"),j=r("0e44"),H=function(){return{token:"",user:{},notification:{state:!1,message:""}}};a["default"].use(G["a"]);var Y=new G["a"].Store({strict:!0,plugins:[Object(j["a"])()],state:H(),getters:{isLoggedIn:function(e){return e.token},getUser:function(e){return e.user},getNotification:function(e){return e.notification}},mutations:{setToken:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setNotification:function(e,t){e.notification=t},reset:function(e){return Object.assign(e,H())}},actions:{login:function(e,t){var r=e.commit,a=(e.dispatch,t.token),i=t.user;r("setToken",a),r("setUser",i),n.a.defaults.headers.common["Authorization"]="Bearer ".concat(a)},logout:function(e){var t=e.commit;t("reset","")},showNotification:function(e,t){var r=e.commit,a=t.msg;r("setNotification",{state:!0,message:a})},hideNotification:function(e){var t=e.commit;t("setNotification",{state:!1,message:""})}},modules:{}}),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("v-carousel",{staticClass:"carousel",attrs:{"show-arrows":!1,"hide-delimiters":!0,cycle:"",interval:8e3,vertical:"",height:"200"}},e._l(e.carouselItems,(function(t,i){return a("v-carousel-item",{key:i,staticClass:"carousel-item",attrs:{src:r("1771")("./"+t.path),height:"100%"}},[a("v-row",{staticClass:"carousel-item ma-0 pa-0",staticStyle:{width:"100%",height:"100%"},attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"text-center"},[a("h1",{staticClass:"primary--text carousel-heading"},[e._v("Book Your Ride")]),a("p",{staticClass:"title primary--text font-italic font-weight-bold text--lighten-1"},[e._v(" Safe, Secure, Fast. "),a("br"),e._v("There is no easier way to book your train ride other than OTTR. ")])])],1)],1)})),1),a("v-row",{staticClass:"px-5 mt-10 mb-5"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticStyle:{"border-top":"solid 4px indigo",margin:"auto"},attrs:{"max-width":"450",elevation:"5"}},[a("v-form",{ref:"searchRidesForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.searchRides(t)}},model:{value:e.searchRidesFormValid,callback:function(t){e.searchRidesFormValid=t},expression:"searchRidesFormValid"}},[a("v-card-title",{staticClass:"justify-center"},[a("h3",[e._v("Search for rides")])]),a("v-card-text",{staticClass:"px-7"},[a("v-row",{staticClass:"justify-center align-center"},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"1"}},[a("v-btn",{attrs:{color:"primary",icon:""},on:{click:e.swapFromToStations}},[a("v-icon",[e._v("mdi-swap-vertical")])],1)],1),a("v-col",[a("v-autocomplete",{attrs:{items:e.stations,"search-input":e.fromStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"From",placeholder:"Source Station","prepend-icon":"mdi-city","return-object":"",rules:e.validationRules.fromStation},on:{"update:searchInput":function(t){e.fromStationSearch=t},"update:search-input":function(t){e.fromStationSearch=t}},model:{value:e.fromStation,callback:function(t){e.fromStation=t},expression:"fromStation"}}),a("v-autocomplete",{attrs:{items:e.stations,"search-input":e.toStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"To",placeholder:"Destination Station","prepend-icon":"mdi-city","return-object":"",rules:e.validationRules.toStation},on:{"update:searchInput":function(t){e.toStationSearch=t},"update:search-input":function(t){e.toStationSearch=t}},model:{value:e.toStation,callback:function(t){e.toStation=t},expression:"toStation"}})],1)],1),a("v-autocomplete",{attrs:{items:e.stations,"search-input":e.viaStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"Via",placeholder:"Optional","prepend-icon":"mdi-city","return-object":""},on:{"update:searchInput":function(t){e.viaStationSearch=t},"update:search-input":function(t){e.viaStationSearch=t}},model:{value:e.viaStation,callback:function(t){e.viaStation=t},expression:"viaStation"}}),a("DatePicker",{attrs:{name:"rideDateSearch",label:"Departure Date","initial-value":(new Date).toISOString().substr(0,10),classes:"mt-3","prepend-icon":"mdi-calendar","inline-style":"width: 400px;","min-date":(new Date).toISOString().substr(0,10)},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}}),a("v-autocomplete",{attrs:{items:e.travelClasses,"search-input":e.travelClassSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"Travel Class",placeholder:"Any","prepend-icon":"mdi-seat-passenger","return-object":""},on:{"update:searchInput":function(t){e.travelClassSearch=t},"update:search-input":function(t){e.travelClassSearch=t}},model:{value:e.selectedTravelClass,callback:function(t){e.selectedTravelClass=t},expression:"selectedTravelClass"}})],1),a("v-card-actions",{staticClass:"pb-5 px-7"},[a("v-btn",{attrs:{color:"primary",width:"100%",disabled:!e.searchRidesFormValid,type:"submit"}},[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-magnify")]),e._v(" Search ")],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("AdvertisementCarousel")],1)],1)],1)},J=[],z=(r("96cf"),r("1da1")),W={getCrudServiceForResource:function(e){return{index:function(){return n.a.get(d.SERVER_URL+"/"+e+"/").then((function(e){return e.data})).catch(this.throwServerError)},show:function(t){return n.a.get(d.SERVER_URL+"/"+e+"/"+t).then((function(e){return e.data})).catch(this.throwServerError)},create:function(t){return n.a.post(d.SERVER_URL+"/"+e+"/",t).then((function(e){return e.data})).catch(this.throwServerError)},update:function(t){return n.a.put(d.SERVER_URL+"/"+e+"/"+t._id,t).then((function(e){return e.data})).catch(this.throwServerError)},delete:function(t){return n.a.delete(d.SERVER_URL+"/"+e+"/"+t).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}}}},q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{ref:"datePickerDialog",attrs:{"return-value":e.datePickerText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.datePickerText=t},"update:return-value":function(t){e.datePickerText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({class:e.classes,style:e.inlineStyle,attrs:{label:e.label,"hide-details":e.hideDetails,"prepend-icon":e.prependIcon,readonly:"",rules:e.datePickerTextRules},model:{value:e.datePickerText,callback:function(t){e.datePickerText=t},expression:"datePickerText"}},a))]}}]),model:{value:e.datePickerDialog,callback:function(t){e.datePickerDialog=t},expression:"datePickerDialog"}},[e.datePickerDialog?r("v-date-picker",{attrs:{scrollable:"",min:e.minDate},model:{value:e.datePickerText,callback:function(t){e.datePickerText=t},expression:"datePickerText"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.datePickerDialog.save(e.datePickerText)}}},[e._v(" OK ")])],1):e._e()],1)},K=[],Q={name:"DatePicker",props:{name:String,initialValue:String,label:{type:String,default:""},requiredMessage:{type:String,default:""},hideDetails:{type:Boolean,default:!1},classes:{type:String,default:""},inlineStyle:{type:String,default:""},minDate:{type:String,default:""},prependIcon:{type:String,default:""}},data:function(){return{datePickerDialog:!1,datePickerText:null,datePickerTextRules:[]}},mounted:function(){var e=this;this.datePickerTextRules.push((function(t){return!!t||e.requiredMessage})),this.initialValue&&"N/A"!==this.initialValue&&(this.datePickerText=this.initialValue)},watch:{initialValue:function(e){this.datePickerText=e&&"N/A"!==e?e:null},datePickerText:function(e){this.$emit("datePickerChanged",{name:this.name,newDate:e})}}},X=Q,Z=r("2e4b"),ee=r("8654"),te=Object(v["a"])(X,q,K,!1,null,"15fbc96b",null),re=te.exports;f()(te,{VBtn:y["a"],VDatePicker:Z["a"],VDialog:w["a"],VSpacer:I["a"],VTextField:ee["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-carousel",{staticStyle:{margin:"auto","max-width":"510px"},attrs:{"hide-delimiter-background":!0,"hide-delimiters":!1,"show-arrows-on-hover":!0,"show-arrows":!1,light:"","delimiter-icon":"mdi-minus",continuous:"",height:"533"}},e._l(e.ads,(function(t,i){return a("v-carousel-item",{key:i},[a("v-card",{staticClass:"mt-9 px-9",staticStyle:{margin:"auto"},attrs:{"max-width":"500",height:"493"}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-col",{staticClass:"pa-0 ma-0"},[a("v-row",{attrs:{justify:"center"}},[a("v-img",{staticClass:"mt-n8 elevation-7",staticStyle:{"border-radius":"15px"},attrs:{src:r("1771")("./"+t.imagePath),alt:"Advertisement Image",transition:"slide-y-reverse-transition"}})],1),a("v-row",{staticClass:"ma-0 pa-0 mt-2",attrs:{"no-gutters":""}},[a("v-spacer"),a("v-card-title",{staticClass:"pb-0 font-weight-bold"},[e._v(" "+e._s(t.textTitle)+" ")]),a("v-spacer")],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-spacer"),a("v-card-text",{staticClass:"pt-2 text-center text--secondary"},[a("span",{domProps:{innerHTML:e._s(t.textDescription)}})]),a("v-spacer")],1)],1)],1)],1)],1)})),1)},ie=[],ne={name:"AdvertisementCarousel",data:function(){return{ads:[{imagePath:"woman-traveling.png",textTitle:"Summer Travel",textDescription:'This summer you too can enjoy the touristic attractions by traveling with our\n                            seasonal discounts ranging from 5% to 30%. No matter where you are, you can\n                            easily book a ride so you can choose your own seat (even next to the A/C during\n                            this hot time, you\'ll enjoy it). For more details, check our <a href="offers"> offers page...</a>\n                            <br><br>'},{imagePath:"bringing-people-together.png",textTitle:"Bringing People Together",textDescription:'Trains have always been known as a way to reunite people separated by long distances.\n                         OTTR can give <strong>you</strong> the possibility to see your dearest friends and relatives\n                         so you can enjoy more time with them. For this reason, you can join\n                         <a href="bringing-people-together">our draw</a> and be the lucky one to benefit from a\n                         free ride wherever your heart desires. All you have to do is to <a href="register">register</a>\n                         on our website, isn\'t that simple?<br><br>'},{imagePath:"student-in-train.png",textTitle:"Student Discounts",textDescription:"<strong>Comming Soon</strong><br><br>Students will be able to book any ride for free in order to travel\n                        in any place they wish. This is supported by our good government so that we can help our young\n                        citizens to learn more about our country by exploring it without any limits."}]}}},se=ne,oe=r("5e66"),le=r("3e35"),ce=Object(v["a"])(se,ae,ie,!1,null,"22cc91c1",null),ue=ce.exports;f()(ce,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCarousel:oe["a"],VCarouselItem:le["a"],VCol:E["a"],VImg:R["a"],VRow:V["a"],VSpacer:I["a"]});var de={name:"home",components:{AdvertisementCarousel:ue,DatePicker:re},data:function(){return{stations:[],travelClasses:[],searchRidesFormValid:!0,fromStation:null,toStation:null,viaStation:null,selectedTravelClass:null,fromStationSearch:null,toStationSearch:null,viaStationSearch:null,travelClassSearch:null,rideDateString:(new Date).toISOString().substr(0,10),stationService:W.getCrudServiceForResource("station"),travelClassService:W.getCrudServiceForResource("travel-class"),carouselItems:[{path:"carousel-img-1.png"},{path:"carousel-img-2.png"},{path:"carousel-img-3.png"},{path:"carousel-img-4.png"},{path:"carousel-img-5.png"}],validationRules:{fromStation:[function(e){return!!e||"Departure station is required"}],toStation:[function(e){return!!e||"Destination station is required"}]}}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stationService.index();case 3:return this.stations=e.sent,e.next=6,this.travelClassService.index();case 6:this.travelClasses=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{swapFromToStations:function(){var e=[this.toStation,this.fromStation];this.fromStation=e[0],this.toStation=e[1];var t=[this.toStationSearch,this.fromStationSearch];this.fromStationSearch=t[0],this.toStationSearch=t[1]},onDatePickerChanged:function(e){"rideDateSearch"===e.name&&(this.rideDateString=e.newDate)},searchRides:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$refs.searchRidesForm.validate()){e.next=4;break}return this.searchRidesFormValid=!1,e.abrupt("return");case 4:return t="from="+this.fromStation.code+"&to="+this.toStation.code+"&date="+this.rideDateString,t+=this.viaStation?"&via="+this.viaStation.code:"",t+=this.selectedTravelClass?"&class="+this.selectedTravelClass.code:"",e.next=9,this.$router.push({name:"rideSearchResults",params:{filters:t}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()}},me=de,pe=(r("79ca"),r("c6a6")),ve=r("4bd4"),he=Object(v["a"])(me,$,J,!1,null,"51f25d7e",null),fe=he.exports;f()(he,{VAutocomplete:pe["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCarousel:oe["a"],VCarouselItem:le["a"],VCol:E["a"],VForm:ve["a"],VIcon:x["a"],VRow:V["a"]});var ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height ma-0",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height mx-0",attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-card",{staticStyle:{"border-top":"solid 4px indigo"}},[r("v-card-title",{staticClass:"justify-center"},[r("p",{staticClass:"display-1"},[e._v(" Login ")])]),r("v-card-text",[r("v-form",{ref:"loginForm",staticClass:"px-6",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.login(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",color:"primary",placeholder:"Enter your e-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{rules:e.passwordRules,label:"Password",color:"primary",placeholder:"Enter your password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{staticClass:"mt-2 px-7 text-capitalize",attrs:{disabled:!e.valid,color:"primary",type:"submit"}},[e._v(" Login Now ")])],1)],1)],1)],1)],1)],1)],1)},Se=[],ye={login:function(e){return n.a.post(d.SERVER_URL+"/user/login",e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}))},register:function(e){return n.a.post(d.SERVER_URL+"/user/register",e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}))},getUserDetails:function(){return n.a.get(d.SERVER_URL+"/user/my-account").then((function(e){return e.data}))}},Ae={data:function(){return{valid:!0,email:"",password:"",showPassword:!1,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail is invalid"}],passwordRules:[function(e){return!!e||"Password is required"}]}},methods:{login:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.validateForm()){e.next=4;break}return this.valid=!1,e.abrupt("return");case 4:return t={email:this.email,password:this.password},e.next=7,ye.login(t);case 7:return r=e.sent,a=r.token,i=r.user,e.next=12,this.$store.dispatch("login",{token:a,user:i});case 12:return e.next=14,this.$router.push("/");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}(),validateForm:function(){return this.$refs.loginForm.validate()}}},be=Ae,Ee=r("a523"),Te=Object(v["a"])(be,ge,Se,!1,null,null,null),we=Te.exports;f()(Te,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VForm:ve["a"],VRow:V["a"],VTextField:ee["a"]});var Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height mx-0",attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticStyle:{"border-top":"solid 4px indigo"}},[r("v-card-title",{staticClass:"justify-center"},[r("p",{staticClass:"display-1"},[e._v(" Create a new account ")])]),r("v-card-text",[r("v-form",{ref:"registerForm",staticClass:"px-6",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.register(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.usernameRules,label:"User Name",color:"primary",placeholder:"Enter a username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",color:"primary",placeholder:"Enter your e-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("vue-tel-input-vuetify",{attrs:{label:"Phone Number",rules:e.phoneRules,inputOptions:{showDialCode:!0,tabindex:0},mode:"international",placeholder:"",loading:!e.phoneCountriesAvailable,preferredCountries:["RO"]},on:{"country-changed":function(t){e.phoneCountriesAvailable=!0}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),r("v-text-field",{attrs:{rules:e.passwordRules,label:"Password",color:"primary",placeholder:"Minimum 6 characters","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{staticClass:"mt-4 px-7 text-capitalize",attrs:{disabled:!e.valid,color:"primary",type:"submit"}},[e._v(" Register Now ")])],1)],1)],1)],1)],1)],1)],1)},xe=[],Re={data:function(){return{valid:!0,username:"",email:"",phone:null,password:"",showPassword:!1,showPasswordRepeat:!1,phoneCountriesAvailable:!1,usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Username must have at least 3 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/g.test(e)||"E-mail is invalid"}],phoneRules:[function(e){return!!e||"Phone number is required"},function(e){return/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/g.test(e)||"Phone number is invalid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=6||"Password must have at least 6 characters"}]}},methods:{register:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.validateForm()){e.next=4;break}return this.valid=!1,e.abrupt("return");case 4:return t={username:this.username,email:this.email,phone:this.phone,password:this.password,role:d.USER_ROLES.USER},e.next=7,ye.register(t);case 7:return r=e.sent,e.next=10,this.$store.dispatch("login",{token:r.token,user:r.user});case 10:return e.next=12,this.$router.push("/");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),validateForm:function(){return this.$refs.registerForm.validate()}}},_e=Re,ke=Object(v["a"])(_e,Ce,xe,!1,null,null,null),De=ke.exports;f()(ke,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VForm:ve["a"],VRow:V["a"],VTextField:ee["a"]});var Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height ma-0",attrs:{fluid:""}},[a("v-row",{staticClass:"fill-height ma-0",attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"pt-10 pb-2",staticStyle:{"border-top":"solid 5px indigo"}},[a("v-row",{attrs:{justify:"center"}},[a("v-img",{attrs:{src:r("b92a"),alt:"Error 404 Logo",contain:"","max-height":"94%","max-width":"250"}})],1),a("v-row",{staticClass:"mt-3",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-row",{attrs:{justify:"start"}},[a("v-card-title",{staticClass:"display-3"},[e._v("Page not found")])],1),a("v-row",{attrs:{justify:"start"}},[a("v-card-text",{staticClass:"body-1"},[e._v(" We are sorry, it looks like the page you are searching for does not exist. ")])],1)],1)],1)],1)],1)],1)],1)},Ne=[],Oe={name:"PageNotFound"},Ue=Oe,Ve=Object(v["a"])(Ue,Le,Ne,!1,null,null,null),Ie=Ve.exports;f()(Ve,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VImg:R["a"],VRow:V["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.editAccountDialog,callback:function(t){e.editAccountDialog=t},expression:"editAccountDialog"}},[a("v-card",[a("v-form",{ref:"editAccountForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.editAccount(t)}},model:{value:e.editAccountFormValid,callback:function(t){e.editAccountFormValid=t},expression:"editAccountFormValid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Edit Account")])]),a("v-divider"),a("v-card-text",{staticClass:"px-7"},[a("v-container",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"User Name",rules:e.usernameRules,required:""},model:{value:e.editUsername,callback:function(t){e.editUsername=t},expression:"editUsername"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Email",rules:e.emailRules,required:""},model:{value:e.editEmail,callback:function(t){e.editEmail=t},expression:"editEmail"}})],1),a("v-col",{attrs:{cols:"12"}},[a("vue-tel-input-vuetify",{attrs:{label:"Phone",rules:e.phoneRules,mode:"international",placeholder:"",loading:!e.phoneCountriesAvailable,preferredCountries:["RO"],value:e.editPhone},on:{"country-changed":e.onCountryChange},model:{value:e.editPhone,callback:function(t){e.editPhone=t},expression:"editPhone"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"New Password",hint:"Optional","persistent-hint":"","append-icon":e.showEditPassword?"mdi-eye":"mdi-eye-off",type:e.showEditPassword?"text":"password",rules:e.passwordRules},on:{"click:append":function(t){e.showEditPassword=!e.showEditPassword}},model:{value:e.editPassword,callback:function(t){e.editPassword=t},expression:"editPassword"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.editAccountFormValid,type:"submit"}},[e._v("Save")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"350"},on:{keydown:function(t){return e.changeDeleteConfirmationDialogVisibility()}},model:{value:e.deleteConfirmationDialog,callback:function(t){e.deleteConfirmationDialog=t},expression:"deleteConfirmationDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline mb-1"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"error"}},[e._v("mdi-alert")]),a("strong",[e._v("Are you sure?")])],1),a("v-card-text",{staticClass:"body-1 py-0"},[e._v(" Deleting your account will result in losing all data gathered so far. "),a("br"),a("br"),e._v(" This will permanently erase your account. ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.changeDeleteConfirmationDialogVisibility()}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteAccount()}}},[e._v(" Delete ")])],1)],1)],1),a("v-alert",{staticClass:"mb-5",attrs:{color:"accent",elevation:"2",icon:"mdi-bell-outline",border:"left","colored-border":"",dismissible:""},model:{value:e.notificationBanner,callback:function(t){e.notificationBanner=t},expression:"notificationBanner"}},[e._v(" "+e._s(e.notificationBannerMessage)+" ")]),a("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"my-account-container"}},[a("v-col",{staticClass:"pa-6 pt-5"},[a("v-card",{staticClass:"ma-0 d-block pa-5 pl-3"},[a("v-row",{staticClass:"ma-0 pa-0",attrs:{"no-gutters":""}},[a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],staticClass:"ma-0 pa-0 px-3",attrs:{cols:"auto"}},[a("v-img",{attrs:{src:r("c86c"),alt:"Error 404 Logo","min-width":"100","max-width":"200"}})],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],attrs:{"no-gutters":"",justify:"end"}},[a("v-btn",{staticClass:"text-capitalize body-1",attrs:{color:"primary"},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v(" Edit Account ")])],1),a("v-row",{staticClass:"ml-1",attrs:{"no-gutters":"",align:"center"}},[a("v-col",{attrs:{cols:"auto"}},[a("v-card-title",{staticClass:"ma-0 pl-0 display-1 font-weight-black"},[a("v-icon",{staticClass:"mr-2 pt-1",attrs:{color:"primary",large:""}},[e._v("mdi-account-circle")]),a("span",[e._v(e._s(e.user.username))])],1)],1),e.$vuetify.breakpoint.xs?a("v-spacer"):e._e(),e.$vuetify.breakpoint.xs?a("v-col",[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("v-icon",{attrs:{color:"primary"},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v("mdi-pen")])],1)],1):e._e()],1)],1)],1)],1),a("v-row",{staticClass:"mt-8"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("SpecificUserInfoCard",{attrs:{"icon-name":"mdi-email","property-title":"Email","info-value":e.user.email}}),a("SpecificUserInfoCard",{staticClass:"mt-5",attrs:{"icon-name":"mdi-phone","property-title":"Phone","info-value":e.user.phone}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("SpecificUserInfoCard",{attrs:{"icon-name":"mdi-account","property-title":"User Type","info-value":e.userRoleString}}),a("SpecificUserInfoCard",{staticClass:"mt-5",attrs:{"icon-name":"mdi-calendar","property-title":"Registration Date","info-value":e.userRegistrationDate}})],1)],1),a("v-row",{staticClass:"mt-6 mb-2",attrs:{justify:"end","no-gutters":""}},[a("v-btn",{staticClass:"text-capitalize body-1",attrs:{color:"error"},on:{click:function(t){return e.changeDeleteConfirmationDialogVisibility()}}},[e._v(" Delete Account ")])],1)],1)],1)],1)},Me=[],Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-row",{staticClass:"ml-1",attrs:{align:"center"}},[r("v-col",{attrs:{cols:"auto"}},[r("v-icon",{attrs:{large:"",color:"primary"}},[e._v(e._s(e.iconName))])],1),r("v-col",{attrs:{cols:"auto"}},[r("v-row",{staticClass:"subtitle-1 font-weight-black text-uppercase",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.propertyTitle)+" ")]),r("v-row",{staticClass:"body-1",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.infoValue)+" ")])],1)],1)],1)},Pe=[],Ge={name:"SpecificUserInfoCard",props:["infoValue","propertyTitle","iconName","isPassword"]},je=Ge,He=Object(v["a"])(je,Be,Pe,!1,null,null,null),Ye=He.exports;f()(He,{VCard:A["a"],VCol:E["a"],VIcon:x["a"],VRow:V["a"]});var $e={edit:function(e){return n.a.put(d.SERVER_URL+"/user/"+e._id,e).then((function(e){return e.data})).catch(this.throwServerError)},delete:function(e){return n.a.delete(d.SERVER_URL+"/user/"+e).then((function(e){return e.data})).catch(this.throwServerError)},sendSms:function(e){return n.a.post(d.SERVER_URL+"/user/sms/",{text:e}).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Je={name:"MyAccount",components:{SpecificUserInfoCard:Ye},data:function(){return{editAccountDialog:!1,editAccountFormValid:!0,showEditPassword:!1,notificationBanner:!1,notificationBannerMessage:"",deleteConfirmationDialog:!1,editUsername:this.$store.getters.getUser.username,editEmail:this.$store.getters.getUser.email,editPhone:this.$store.getters.getUser.phone,editPassword:"",phoneCountriesAvailable:!1,usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Username must have at least 3 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/g.test(e)||"E-mail is invalid"}],phoneRules:[function(e){return!!e||"Phone number is required"},function(e){return/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/g.test(e)||"Phone number is invalid"},function(e){return"string"===typeof e&&"+"===e[0]||"Phone number must be in international format"}],passwordRules:[function(e){return!e||e.length>=6||"New password must have at least 6 characters"}]}},computed:{userRoleString:function(){switch(this.user.role){case d.USER_ROLES.ADMIN:return"Admin";case d.USER_ROLES.USER:return"Regular User";case d.USER_ROLES.GUEST:return"Guest";default:throw console.error("Unknown user role type "+this.user.role+" to display."),DOMError("Unknown user role type to display.")}},userRegistrationDate:function(){var e=new Date(this.user.registered);return e.getDate()+"."+e.toLocaleString("default",{month:"2-digit"})+"."+e.getFullYear()},user:function(){return this.$store.getters.getUser}},methods:{editAccount:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$refs.editAccountForm.validate()){e.next=4;break}return this.editAccountFormValid=!1,e.abrupt("return");case 4:return t={_id:this.user._id,username:this.editUsername,email:this.editEmail,phone:this.editPhone,password:this.editPassword},e.next=7,$e.edit(t);case 7:return r=e.sent,e.next=10,this.$store.dispatch("login",{token:r.token,user:r.user});case 10:this.editAccountDialog=!1,this.notificationBanner=!0,this.notificationBannerMessage="Account details have been succesfully updated.",e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(){return e.apply(this,arguments)}return t}(),changeEditAccountDialogVisibility:function(){this.editAccountDialog=!this.editAccountDialog,this.editAccountDialog&&(this.showEditPassword=!1,this.editUsername=this.user.username,this.editEmail=this.user.email,this.editPhone=this.user.phone,this.editPassword="")},changeDeleteConfirmationDialogVisibility:function(){this.deleteConfirmationDialog=!this.deleteConfirmationDialog},deleteAccount:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e.delete(this.user._id);case 3:return e.next=5,this.$store.dispatch("logout");case 5:return e.next=7,this.$router.push("/");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),onCountryChange:function(e){this.phoneCountriesAvailable=!0}}},ze=Je,We=(r("f9d4"),r("0798")),qe=r("ce7e"),Ke=Object(v["a"])(ze,Fe,Me,!1,null,null,null),Qe=Ke.exports;f()(Ke,{VAlert:We["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VDialog:w["a"],VDivider:qe["a"],VForm:ve["a"],VIcon:x["a"],VImg:R["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"]});var Xe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ze=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("This is the Dashboard Page.")])])}],et={name:"TheDashboard"},tt=et,rt=Object(v["a"])(tt,Xe,Ze,!1,null,null,null),at=rt.exports,it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height ma-0 pa-0",attrs:{id:"copyright-container"}},[r("v-col",{staticClass:"pa-6 pt-5"},[r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Copyrights Details")]),r("v-divider"),r("v-row",{staticClass:"ma-0 mt-5 body-1"},[r("p",[e._v(" This is a Bachelor thesis, made for non-commercial use! All that can be seen on this website is of fictional kind, and any image found on this domain has been made by the author himself or has been carefully selected to be used as it is or modified in order to satisfy the project's requirements. ")]),r("p",[e._v(" Down below you can find a list with resources gathered from around the Internet, resources made publicly available and labeled for noncommercial reuse (with or without modification). ")]),r("ul",[r("li",[e._v("https://www.logolynx.com/topic/otter#&gid=1&pid=15")]),r("li",[e._v("https://commons.wikimedia.org/wiki/File:Otter_Logo.jpg")]),r("li",[e._v("https://svgsilh.com/image/303792.html")]),r("li",[e._v("https://www.bahn.de/p/view/index.shtml")]),r("li",[e._v("https://www.wallpaperflare.com/white-bullet-train-on-rail-road-tgv-the-train-station-calais-frethun-wallpaper-wqvut")]),r("li",[e._v("https://www.wallpaperflare.com/search?wallpaper=two+tgv+trains")]),r("li",[e._v("https://www.wallpaperflare.com/train-ticket-fare-united-kingdom-number-western-script-wallpaper-gsual")]),r("li",[e._v("https://www.wallpaperflare.com/machine-postal-office-ticket-elevator-db-deutsche-bahn-wallpaper-eoxjh")]),r("li",[e._v("https://www.wallpaperflare.com/people-near-train-station-group-of-people-on-train-station-king-s-cross-station-wallpaper-wjspp/download/1920x1080")]),r("li",[e._v("https://www.uihere.com/free-photos/woman-standing-on-train-door-326609")]),r("li",[e._v("https://www.uihere.com/free-photos/two-persons-hugging-each-other-on-train-station-platform-538891")]),r("li",[e._v("https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.dreamstime.com%2Fphotos-images%2Fbusiness-travel.html&psig=AOvVaw1Ww7KUyezCZhar0E4KQ2Zd&ust=1587760753406000&source=images&cd=vfe&ved=0CA0QjhxqFwoTCJjNrvCz_-gCFQAAAAAdAAAAABAO")])])])],1)],1)],1)},nt=[],st={name:"TheCopyright"},ot=st,lt=(r("4656"),Object(v["a"])(ot,it,nt,!1,null,null,null)),ct=lt.exports;f()(lt,{VCol:E["a"],VContainer:Ee["a"],VDivider:qe["a"],VRow:V["a"]});var ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("GrayContainer",[r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Routes Management")]),r("v-divider"),r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12"}},[r("RoutesTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)},dt=[],mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[r("v-alert",{staticClass:"mb-5",staticStyle:{width:"100%"},attrs:{color:"accent",elevation:"2",icon:"mdi-bell-outline",border:"left","colored-border":"",dismissible:""},model:{value:e.notificationState,callback:function(t){e.notificationState=t},expression:"notificationState"}},[e._v(" "+e._s(this.$store.state.notification.message)+" ")]),r("v-row",{staticClass:"fill-height ma-0 pa-0",attrs:{id:"gray-container"}},[r("v-col",{staticClass:"pa-6 pt-5"},[e._t("default")],2)],1)],1)},pt=[],vt={name:"GrayContainer",computed:{notificationState:{get:function(){return this.$store.state.notification.state},set:function(e){e?this.$store.dispatch("showNotification",{msg:this.$store.state.notification.message}):this.$store.dispatch("hideNotification")}}}},ht=vt,ft=(r("70fd"),Object(v["a"])(ht,mt,pt,!1,null,"74cb85bf",null)),gt=ft.exports;f()(ft,{VAlert:We["a"],VCol:E["a"],VContainer:Ee["a"],VRow:V["a"]});var St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,"sort-by":"name","no-results-text":"No routes have been found"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"ma-0 pa-0"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Routes ")]),r("v-spacer"),e.$vuetify.breakpoint.mdAndUp?r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),r("v-spacer"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-2 pr-5 text-capitalize",attrs:{color:"primary",outlined:""},on:{click:e.goCreateNewRoute}},[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-routes")]),r("strong",[e._v("Create New Route")])],1),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:""},on:{click:e.goCreateNewRoute}},[r("v-icon",[e._v("mdi-plus-circle")])],1)],1),e.$vuetify.breakpoint.smAndDown?r("v-row",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.goToRides(a)}}},[e._v(" mdi-calendar-clock ")]),r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"},on:{click:function(t){return e.goEditRoute(a)}}},[e._v(" mdi-pen ")]),r("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}])},[r("template",{slot:"no-data"},[r("span",[e._v(" No routes available to display ")])])],2)},yt=[],At=(r("4160"),r("159b"),r("fb6a"),{index:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get(d.SERVER_URL+"/route/").then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getByName:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get(d.SERVER_URL+"/route/name/"+t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.post(d.SERVER_URL+"/route/",t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.put(d.SERVER_URL+"/route/"+t._id,t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.delete(d.SERVER_URL+"/route/"+t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),attachFrontendFields2MongoFormat:function(e){var t="",a=r("b9b9"),i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],n=e.routeStations,s=new Date(e.departureTime),o=new Date(e.arrivalTime),l=n.length-1;return e.activeWeekDays.sort((function(e,t){return e-t})),e.activeWeekDays.forEach((function(e){t+=i[e-1]+" "})),t=t.slice(0,-1),e.frontend={name:n[0].station.code+"("+a(s,"HH:MM")+")-"+n[l].station.code+"("+a(o,"HH:MM")+")",depStation:n[0].station.name,arrStation:n[l].station.name,depTime:a(s,"HH:MM"),arrTime:a(o,"HH:MM"),train:e.train.trainCategory.code+" "+e.train.number,activeDays:t,halts:n.length-2},e},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}}),bt={name:"RoutesTable",data:function(){return{searchBar:"",tableHeaders:[{text:"Source",value:"frontend.depStation",align:"left"},{text:"Destination",value:"frontend.arrStation",align:"left"},{text:"Departure",value:"frontend.depTime",align:"left"},{text:"Arrival",value:"frontend.arrTime",align:"left"},{text:"Train",value:"frontend.train",align:"left"},{text:"Active Days",value:"frontend.activeDays",align:"left"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],service:At}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize()},methods:{initialize:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.index();case 3:t=e.sent,t.forEach((function(e){r.items.push(At.attachFrontendFields2MongoFormat(e))})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.delete(t._id);case 3:return this.items=[],e.next=6,this.service.index();case 6:r=e.sent,r.forEach((function(e){a.items.push(At.attachFrontendFields2MongoFormat(e))})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),goCreateNewRoute:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$router.push({name:"routesCreate"});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goEditRoute:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$router.push({name:"routesEdit",params:{routeName:t.frontend.name,route:t}});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),goToRides:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$router.push({name:"rides",params:{routeName:t.frontend.name,route:t}});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Et=bt,Tt=r("8fea"),wt=r("71d9"),Ct=r("2a7f"),xt=Object(v["a"])(Et,St,yt,!1,null,null,null),Rt=xt.exports;f()(xt,{VBtn:y["a"],VCol:E["a"],VDataTable:Tt["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:wt["a"],VToolbarTitle:Ct["a"]});var _t={name:"TheRoutes",components:{RoutesTable:Rt,GrayContainer:gt},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},kt=_t,Dt=Object(v["a"])(kt,ut,dt,!1,null,null,null),Lt=Dt.exports;f()(Dt,{VCol:E["a"],VDivider:qe["a"],VRow:V["a"]});var Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[r("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"miscellaneous-container"}},[r("v-col",{staticClass:"pa-6 pt-5"},[r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Miscellaneous")]),r("v-divider"),r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12",md:"5",lg:"5"}},[r("TrainCategoriesTable",{on:{serverError:e.onServerError}})],1),r("v-divider",{staticClass:"my-5",attrs:{vertical:""}}),r("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[r("TravelClassesTable",{on:{serverError:e.onServerError}})],1)],1),r("v-row",{staticClass:"mt-6",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[r("StationsTable",{on:{serverError:e.onServerError}})],1),r("v-divider",{staticClass:"my-5",attrs:{vertical:""}}),r("v-col",{attrs:{cols:"12",md:"5",lg:"5"}},[r("TravelerCategoryTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)],1)},Ot=[],Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CrudTable",{attrs:{entity:"station","entity-name-plural":"stations","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5,"with-search":""},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"Station code",rules:e.validationRules.code},model:{value:a.code,callback:function(t){e.$set(a,"code",t)},expression:"editedItem.code"}})],1),r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-text-field",{attrs:{label:"Station name",rules:e.validationRules.name},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"editedItem.name"}})],1)],1)],1)]}}])})},Vt=[],It=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,"sort-by":e.sortDefaultBy,search:e.searchBar,"no-results-text":"No "+e.entityNamePlural+" have been found","items-per-page":e.itemsPerPage},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"ma-0 pa-0"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" "+e._s(e.entityNamePlural))]),r("v-spacer"),e.withSearch&&e.$vuetify.breakpoint.mdAndUp?r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),r("v-spacer"),r("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({attrs:{color:"primary"}},a),[e._v("mdi-plus-circle")])]}}]),model:{value:e.formDialog,callback:function(t){e.formDialog=t},expression:"formDialog"}},[e.formDialog?r("v-card",[r("v-form",{ref:"itemForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save(t)}},model:{value:e.itemFormValid,callback:function(t){e.itemFormValid=t},expression:"itemFormValid"}},[r("v-card-title",[r("span",{staticClass:"headline text-capitalize"},[e._v(e._s(e.formTitle))])]),r("v-divider"),r("v-card-text",{staticClass:"py-0"},[e._t("form",null,{editedItem:e.editedItem})],2),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("v-btn",{attrs:{color:"error",text:""},on:{click:e.close}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",disabled:!e.itemFormValid,type:"submit"}},[e._v("Save")])],1)],1)],1):e._e()],1)],1),e.withSearchSmallScreen?r("v-row",{staticClass:"ma-0 pa-0 mt-3"},[r("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withChangeOrder,expression:"withChangeOrder"}],staticClass:"mr-1",attrs:{small:"",color:e.changeOrderColor},on:{click:function(t){return e.moveUpItem(a)}}},[e._v(" mdi-menu-up-outline ")]),r("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withChangeOrder,expression:"withChangeOrder"}],staticClass:"mr-2",attrs:{small:"",color:e.changeOrderColor},on:{click:function(t){return e.moveDownItem(a)}}},[e._v(" mdi-menu-down-outline ")]),r("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withShowItem,expression:"withShowItem"}],staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.showItem(a)}}},[e._v(" mdi-eye ")]),r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pen ")]),r("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[r("span",[e._v(" No "+e._s(e.entityNamePlural.toLowerCase())+" available to display ")])]},proxy:!0}],null,!0)})},Ft=[],Mt=(r("99af"),r("c975"),r("a9e3"),{name:"CrudTable",props:{entity:String,entityNamePlural:String,headers:Array,sortDefaultBy:String,validationRules:Object,defaultItem:Object,withSearch:{type:Boolean,required:!1,default:!1},service:{type:Object,required:!0},withChangeOrder:{type:Boolean,default:!1},changeOrderColor:{type:String,default:"accent"},disableSort:{type:Boolean,default:!1},withShowItem:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:10}},data:function(){return{formDialog:!1,itemFormValid:!0,searchBar:"",tableHeaders:[{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],editingItem:!1,editedItem:{}}},computed:{formTitle:function(){var e=this.entity[0].toUpperCase()+this.entity.slice(1);return this.editingItem?"Edit "+e:"New "+e},withSearchSmallScreen:function(){return this.withSearch&&this.$vuetify.breakpoint.smAndDown},tallToolbar:function(){return{"pt-6":this.withSearchSmallScreen,"mb-12":this.withSearchSmallScreen}}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize(),this.tableHeaders=this.headers.concat(this.tableHeaders),this.editedItem=JSON.parse(JSON.stringify(this.defaultItem))},methods:{initialize:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=JSON,e.t1=JSON,e.next=5,this.service.index();case 5:e.t2=e.sent,e.t3=e.t1.stringify.call(e.t1,e.t2),this.items=e.t0.parse.call(e.t0,e.t3),e.next=13;break;case 10:e.prev=10,e.t4=e["catch"](0),this.$emit("serverError",e.t4.response.data.err.message);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),editItem:function(e){this.editedItem=JSON.parse(JSON.stringify(e)),this.editingItem=!0,this.formDialog=!0,this.$emit("clickedEditItem",e)},deleteItem:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.delete(t._id);case 3:return e.t0=JSON,e.t1=JSON,e.next=7,this.service.index();case 7:e.t2=e.sent,e.t3=e.t1.stringify.call(e.t1,e.t2),this.items=e.t0.parse.call(e.t0,e.t3),this.$emit("deletedItem",t),e.next=16;break;case 13:e.prev=13,e.t4=e["catch"](0),this.$emit("serverError",e.t4.response.data.err.message);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.formDialog=!1,setTimeout((function(){e.editedItem=JSON.parse(JSON.stringify(e.defaultItem)),e.editingItem=!1}),300),this.$emit("closedForm")},save:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$refs.itemForm.validate()){e.next=4;break}return this.itemFormValid=!1,e.abrupt("return");case 4:if(!this.editingItem){e.next=10;break}return e.next=7,this.service.update(this.editedItem);case 7:this.$emit("updatedItem",this.editingItem),e.next=13;break;case 10:return e.next=12,this.service.create(this.editedItem);case 12:this.$emit("createdItem",this.editingItem);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 18:return e.prev=18,e.t1=JSON,e.t2=JSON,e.next=23,this.service.index();case 23:e.t3=e.sent,e.t4=e.t2.stringify.call(e.t2,e.t3),this.items=e.t1.parse.call(e.t1,e.t4),e.next=31;break;case 28:e.prev=28,e.t5=e["catch"](18),this.$emit("serverError",e.t5.response.data.err.message);case 31:this.close();case 32:case"end":return e.stop()}}),e,this,[[0,15],[18,28]])})));function t(){return e.apply(this,arguments)}return t}(),moveUpItem:function(e){var t=this.items.indexOf(e);t<1||(this.items=this.service.moveUp(t),this.$emit("movedUpItem",t))},moveDownItem:function(e){var t=this.items.indexOf(e);-1!==t&&t!==this.items.length-1&&(this.items=this.service.moveDown(t),this.$emit("movedDownItem",t))},showItem:function(e){this.$emit("showItem",e)}}}),Bt=Mt,Pt=Object(v["a"])(Bt,It,Ft,!1,null,null,null),Gt=Pt.exports;f()(Pt,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VDataTable:Tt["a"],VDialog:w["a"],VDivider:qe["a"],VForm:ve["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:wt["a"],VToolbarTitle:Ct["a"]});var jt={name:"StationsTable",components:{CrudTable:Gt},data:function(){return{service:W.getCrudServiceForResource("station"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"}],defaultItem:{code:"",name:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},Ht=jt,Yt=Object(v["a"])(Ht,Ut,Vt,!1,null,null,null),$t=Yt.exports;f()(Yt,{VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VTextField:ee["a"]});var Jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CrudTable",{attrs:{entity:"train category","entity-name-plural":"train categories","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"Category Code",rules:e.validationRules.code},model:{value:a.code,callback:function(t){e.$set(a,"code",t)},expression:"editedItem.code"}})],1),r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-text-field",{attrs:{label:"Category Name",rules:e.validationRules.name},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"editedItem.name"}})],1)],1)],1)]}}])})},zt=[],Wt={name:"TrainCategoriesTable",components:{CrudTable:Gt},data:function(){return{service:W.getCrudServiceForResource("train-category"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"}],defaultItem:{code:"",name:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},qt=Wt,Kt=Object(v["a"])(qt,Jt,zt,!1,null,null,null),Qt=Kt.exports;f()(Kt,{VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VTextField:ee["a"]});var Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CrudTable",{attrs:{entity:"travel class","entity-name-plural":"travel classes","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-text-field",{attrs:{label:"Class Code",rules:e.validationRules.code},model:{value:a.code,callback:function(t){e.$set(a,"code",t)},expression:"editedItem.code"}})],1),r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-text-field",{attrs:{label:"Class Name",rules:e.validationRules.name},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"Ticket Discount (%)",rules:e.validationRules.discount},model:{value:a.discount,callback:function(t){e.$set(a,"discount",t)},expression:"editedItem.discount"}})],1)],1)],1)]}}])})},Zt=[],er={name:"TravelClassesTable",components:{CrudTable:Gt},data:function(){return{service:W.getCrudServiceForResource("travel-class"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"},{text:"Ticket Discount (%)",value:"discount",align:"center"}],defaultItem:{code:"",name:"",discount:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}],discount:[function(e){return!!e||"Discount is required"},function(e){return/^\d+$/.test(e)||"Discount must be a number"},function(e){return e>=0&&e<=100||"Discount must be between 0 and 100"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},tr=er,rr=Object(v["a"])(tr,Xt,Zt,!1,null,null,null),ar=rr.exports;f()(rr,{VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VTextField:ee["a"]});var ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CrudTable",{attrs:{entity:"traveler category","entity-name-plural":"traveler categories","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"7"}},[r("v-text-field",{attrs:{label:"Category Name",rules:e.validationRules.name},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-text-field",{attrs:{type:"number",label:"Ticket Discount (%)",rules:e.validationRules.discount},model:{value:a.discount,callback:function(t){e.$set(a,"discount",t)},expression:"editedItem.discount"}})],1)],1)],1)]}}])})},nr=[],sr={name:"TravelerCategoryTable",components:{CrudTable:Gt},data:function(){return{service:W.getCrudServiceForResource("traveler-category"),headers:[{text:"Name",value:"name",align:"center"},{text:"Ticket Discount (%)",value:"discount",align:"center"}],defaultItem:{name:"",discount:""},validationRules:{name:[function(e){return!!e||"Name is required"}],discount:[function(e){return!!e||"Discount is required"},function(e){return/^\d+$/.test(e)||"Discount must be a number"},function(e){return e>=0&&e<=100||"Discount must be between 0 and 100"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},or=sr,lr=Object(v["a"])(or,ir,nr,!1,null,null,null),cr=lr.exports;f()(lr,{VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VTextField:ee["a"]});var ur={name:"TheMiscellaneous",components:{TravelerCategoryTable:cr,TravelClassesTable:ar,TrainCategoriesTable:Qt,StationsTable:$t},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},dr=ur,mr=(r("a14c"),Object(v["a"])(dr,Nt,Ot,!1,null,null,null)),pr=mr.exports;f()(mr,{VCol:E["a"],VContainer:Ee["a"],VDivider:qe["a"],VRow:V["a"]});var vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[r("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"students-container"}},[r("v-col",{staticClass:"pa-6 pt-5"},[r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Students Administration")]),r("v-divider"),r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",[r("StudentsTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)],1)},hr=[],fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CrudTable",{attrs:{entity:"student","entity-name-plural":"students","sort-default-by":"cardId",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"with-search":""},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"First Name",rules:e.validationRules.firstName},model:{value:a.firstName,callback:function(t){e.$set(a,"firstName",t)},expression:"editedItem.firstName"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Last Name",rules:e.validationRules.lastName},model:{value:a.lastName,callback:function(t){e.$set(a,"lastName",t)},expression:"editedItem.lastName"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"National Identification Number (NIN)",rules:e.validationRules.nin},model:{value:a.nin,callback:function(t){e.$set(a,"nin",t)},expression:"editedItem.nin"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Expiration Date","prepend-icon":"mdi-calendar",rules:e.validationRules.expirationDate},model:{value:a.expirationDate,callback:function(t){e.$set(a,"expirationDate",t)},expression:"editedItem.expirationDate"}})],1)],1)],1)]}}])})},gr=[],Sr={name:"StudentsTable",components:{CrudTable:Gt},props:{defaultExpirationDate:{type:String}},data:function(){return{service:W.getCrudServiceForResource("student"),headers:[{text:"Card ID",value:"cardId",align:"center"},{text:"First Name",value:"firstName",align:"center"},{text:"Last Name",value:"lastName",align:"center"},{text:"NIN",value:"nin",align:"center"},{text:"Creation Date",value:"creationDate",align:"center"}],defaultItem:{cardId:"",firstName:"",lastName:"",nin:"",creationDate:(new Date).toISOString().substr(0,10),expirationDate:this.defaultDate},validationRules:{cardId:[],firstName:[],lastName:[],nin:[],creationDate:[]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}},computed:{defaultDate:function(){return this.defaultExpirationDate}}},yr=Sr,Ar=Object(v["a"])(yr,fr,gr,!1,null,null,null),br=Ar.exports;f()(Ar,{VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VTextField:ee["a"]});var Er={name:"TheStudents",components:{StudentsTable:br},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},Tr=Er,wr=(r("52a5"),Object(v["a"])(Tr,vr,hr,!1,null,"082e9d22",null)),Cr=wr.exports;f()(wr,{VCol:E["a"],VContainer:Ee["a"],VDivider:qe["a"],VRow:V["a"]});var xr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",[r("CarLayoutDialog",{attrs:{state:e.printedCarLayoutDialog,"car-layout":e.printedCarLayout},on:{changeDialogState:e.onChangeDialogState}}),r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Car Layouts Management")]),r("v-divider"),r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12"}},[r("CarLayoutsTable",{on:{serverError:e.onServerError,showCarLayout:e.onShowCarLayout}})],1)],1)],1)},Rr=[],_r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,"sort-by":"name","no-results-text":"No car layouts have been found"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"ma-0 pa-0"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Car Layouts ")]),r("v-spacer"),e.$vuetify.breakpoint.mdAndUp?r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),r("v-spacer"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-3 pr-5 text-capitalize",attrs:{color:"primary",outlined:"",to:{name:"carLayoutsForm"}}},[r("v-icon",{staticClass:"mr-1"},[e._v("mdi-draw")]),r("strong",[e._v("Create New Layout")])],1),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:"",to:{name:"carLayoutsForm"}}},[r("v-icon",[e._v("mdi-plus-circle")])],1)],1),e.$vuetify.breakpoint.smAndDown?r("v-row",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.showCarLayout(a)}}},[e._v(" mdi-eye ")]),r("router-link",{attrs:{to:{name:"carLayoutsEdit",params:{carLayoutName:a.name}}}},[r("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"}},[e._v(" mdi-pen ")])],1),r("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}])},[r("template",{slot:"no-data"},[r("span",[e._v(" No car layouts available to display ")])])],2)},kr=[],Dr={name:"CarLayoutsTable",data:function(){return{searchBar:"",tableHeaders:[{text:"Name",value:"name",align:"center"},{text:"Seating Capacity",value:"seatingCapacity",align:"center"},{text:"Width (cells)",value:"width",align:"center"},{text:"Height (cells)",value:"height",align:"center"},{text:"Cell Size (pixels)",value:"cellSize",align:"center"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],service:W.getCrudServiceForResource("car-layout")}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize()},methods:{initialize:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.index();case 3:this.items=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.delete(t._id);case 3:return e.next=5,this.service.index();case 5:this.items=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),showCarLayout:function(e){this.$emit("showCarLayout",e)}}},Lr=Dr,Nr=Object(v["a"])(Lr,_r,kr,!1,null,null,null),Or=Nr.exports;f()(Nr,{VBtn:y["a"],VCol:E["a"],VDataTable:Tt["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:wt["a"],VToolbarTitle:Ct["a"]});var Ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:Math.max(300,e.responsiveCarLayout.sheetWidth+40)},model:{value:e.dialogState,callback:function(t){e.dialogState=t},expression:"dialogState"}},[r("v-card",{staticStyle:{overflow:"auto"}},[r("v-card-title",{staticClass:"headline mb-1"},[r("strong",[e._v(e._s(e.responsiveCarLayout.name))])]),r("v-divider"),r("v-card-text",{staticClass:"ma-0 pa-5",attrs:{align:"center"}},[r("CarLayoutDisabledSheet",{attrs:{"car-layout":e.responsiveCarLayout}})],1)],1)],1)},Vr=[],Ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.carLayout.sheetWidth,height:e.carLayout.sheetHeight,align:"left"}},[a("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.carLayout.width,"row-height":e.carLayout.cellSize,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0,isResizable:!1,maxRows:e.carLayout.height},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return a("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[a("v-img",{attrs:{src:r("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)}},[t.seatNumber?a("div",{staticClass:"text elementContainer"},[a("p",{staticClass:"ma-0 pa-0 centeredText"},[a("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])],1)})),1)],1)},Fr=[],Mr=(r("a4d3"),r("e01a"),r("d28b"),r("c740"),r("b64b"),r("d3b7"),r("3ca3"),r("ddb0"),r("53ca")),Br={getByName:function(e){return n.a.get(d.SERVER_URL+"/car-layout/name/"+e).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e},getPngNameFromElementType:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return"seat-left.png";case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return"seat-right.png";case d.LAYOUT.ELEMENTS.SEAT_UP:return"seat-up.png";case d.LAYOUT.ELEMENTS.SEAT_DOWN:return"seat-down.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT:return"reserved-seat-left.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT:return"reserved-seat-right.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP:return"reserved-seat-up.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN:return"reserved-seat-down.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT:return"selected-seat-left.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT:return"selected-seat-right.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP:return"selected-seat-up.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN:return"selected-seat-down.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT:return"reserving-seat-left.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT:return"reserving-seat-right.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP:return"reserving-seat-up.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN:return"reserving-seat-down.png";case d.LAYOUT.ELEMENTS.LUGGAGE_RACK:return"luggage-rack.png";case d.LAYOUT.ELEMENTS.TABLE:return"table.png";case d.LAYOUT.ELEMENTS.WALL:return"wall.png";default:return console.error("No image found for: "+e),"no-existing-png-for-this-type"}},transformFromMongo2FrontendModel:function(e){var t={};t.name=e.name,t.seatingCapacity=e.seatingCapacity,t.width=e.width,t.height=e.height,t.cellSize=e.cellSize,t.lastElementId=e.lastElementId,t.gridLayout=[];var r=!0,a=!1,i=void 0;try{for(var n,s=e.elements[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var o=n.value;t.gridLayout.push(JSON.parse(JSON.stringify(o)))}}catch(l){a=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return t.sheetWidth=e.cellSize*e.width+d.LAYOUT.GRID_MARGIN*(e.width-1)+40,t.sheetHeight=e.cellSize*e.height+d.LAYOUT.GRID_MARGIN*(e.height-1)+40,t},rotateCarLayout:function(e){if("object"!==Object(Mr["a"])(e))return console.error("Car Layout to be rotated is not an object!"),{};if(!Object.keys(e).length)return{};if(e.width<=e.height)return e;var t={name:e.name,seatingCapacity:e.seatingCapacity,width:e.height,height:e.width,cellSize:e.cellSize,lastElementId:e.lastElementId,sheetWidth:e.cellSize*e.height+d.LAYOUT.GRID_MARGIN*(e.height-1)+40,sheetHeight:e.cellSize*e.width+d.LAYOUT.GRID_MARGIN*(e.width-1)+40,gridLayout:[]},r=!0,a=!1,i=void 0;try{for(var n,s=e.gridLayout[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var o=n.value,l={i:o.i,x:e.height-o.h-o.y,y:o.x,w:o.h,h:o.w,type:o.type};if(o.seatNumber)switch(l.seatNumber=o.seatNumber,o.type){case d.LAYOUT.ELEMENTS.SEAT_LEFT:l.type=d.LAYOUT.ELEMENTS.SEAT_UP;break;case d.LAYOUT.ELEMENTS.SEAT_UP:l.type=d.LAYOUT.ELEMENTS.SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:l.type=d.LAYOUT.ELEMENTS.SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.SEAT_DOWN:l.type=d.LAYOUT.ELEMENTS.SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT:l.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP:l.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT:l.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN:l.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT:l.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP:l.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT:l.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN:l.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT:l.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP:l.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT:l.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN:l.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT;break;default:console.error("Unknown type for an element having a seat number!")}t.gridLayout.push(l)}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return t},fillCarLayoutWithColorfulSeats:function(e,t,r,a){var i=t.orderNo,n=r.orderNo,s=!0,o=!1,l=void 0;try{for(var c,u=e.seats[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;if(d.reservations.length||d.selected)if(d.selected)this.changeSeatAppearance(e,d,a);else{var m=!1,p=!0,v=!1,h=void 0;try{for(var f,g=d.reservations[Symbol.iterator]();!(p=(f=g.next()).done);p=!0){var S=f.value,y=S.departureStation.orderNo,A=S.arrivalStation.orderNo;if(i<y&&n>y||i===y||i>y&&i<A){m=!0;break}}}catch(b){v=!0,h=b}finally{try{p||null==g.return||g.return()}finally{if(v)throw h}}m&&this.changeSeatAppearance(e,d,a)}}}catch(b){o=!0,l=b}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}return e.carLayout},changeSeatAppearance:function(e,t,r){var a=e.carLayout.gridLayout.findIndex((function(e){return e.seatNumber===t.number}));t.selectingUser!==r._id?t.selected?e.carLayout.gridLayout[a].type=this.getReservingSeatTypeFromUnselected(e.carLayout.gridLayout[a].type):e.carLayout.gridLayout[a].type=this.getCorrespondingReservedSeatAppearance(e.carLayout.gridLayout[a].type):e.carLayout.gridLayout[a].type=this.getSelectedSeatTypeFromUnselected(e.carLayout.gridLayout[a].type)},getCorrespondingReservedSeatAppearance:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN;default:return console.error("Unknown seat type to make an association"),null}},getSelectedSeatTypeFromUnselected:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN;default:return console.error("This is not an unselected seat!"),null}},getReservingSeatTypeFromUnselected:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN;default:return console.error("This is not a seat selected by someone else!"),null}}},Pr={name:"CarLayoutDisabledSheet",props:{carLayout:{type:Object,required:!0}},data:function(){return{gridMargin:d.LAYOUT.GRID_MARGIN}},computed:{gridMargins:function(){return[this.gridMargin,this.gridMargin]}},methods:{getPngNameFromElementType:function(e){return Br.getPngNameFromElementType(e)}}},Gr=Pr,jr=(r("21a9"),r("8dd9")),Hr=Object(v["a"])(Gr,Ir,Fr,!1,null,"1ac778f3",null),Yr=Hr.exports;f()(Hr,{VImg:R["a"],VSheet:jr["a"]});var $r={name:"CarLayoutDialog",components:{CarLayoutDisabledSheet:Yr},props:{state:{type:Boolean,required:!0},carLayout:{type:Object,required:!0}},data:function(){return{dialogState:!1}},computed:{responsiveCarLayout:function(){return this.$vuetify.breakpoint.xsOnly?Br.rotateCarLayout(this.carLayout):this.carLayout}},watch:{state:function(e){this.dialogState=e},dialogState:function(e){this.$emit("changeDialogState",e)}}},Jr=$r,zr=Object(v["a"])(Jr,Ur,Vr,!1,null,"6d1a046e",null),Wr=zr.exports;f()(zr,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VDialog:w["a"],VDivider:qe["a"]});var qr={name:"CarLayouts",components:{CarLayoutDialog:Wr,GrayContainer:gt,CarLayoutsTable:Or},data:function(){return{printedCarLayoutDialog:!1,printedCarLayout:{}}},methods:{onServerError:function(e){this.$emit("serverError",e)},onShowCarLayout:function(e){this.printedCarLayout=Br.transformFromMongo2FrontendModel(e),this.printedCarLayoutDialog=!0},onChangeDialogState:function(e){this.printedCarLayoutDialog=e}}},Kr=qr,Qr=Object(v["a"])(Kr,xr,Rr,!1,null,null,null),Xr=Qr.exports;f()(Qr,{VCol:E["a"],VDivider:qe["a"],VRow:V["a"]});var Zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[a("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.saveLayoutDialog,callback:function(t){e.saveLayoutDialog=t},expression:"saveLayoutDialog"}},[a("v-card",[a("v-form",{ref:"saveLayoutForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.saveLayout(t)}},model:{value:e.saveLayoutFormValid,callback:function(t){e.saveLayoutFormValid=t},expression:"saveLayoutFormValid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Save Car Layout")])]),a("v-divider"),a("v-card-text",{staticClass:"px-7"},[a("v-container",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Layout Name",rules:e.layoutNameRules},model:{value:e.newLayoutName,callback:function(t){e.newLayoutName=t},expression:"newLayoutName"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.saveLayoutFormValid,type:"submit"}},[e._v("Save")])],1)],1)],1)],1),a("v-row",{staticClass:"ma-0 pa-0"},[a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.title)+" ")]),a("v-spacer"),e.$vuetify.breakpoint.smAndUp?a("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"carLayouts"}}},[a("strong",[e._v("Cancel")])]):e._e(),e.$vuetify.breakpoint.smAndUp?a("v-btn",{staticClass:"ma-0 mr-2",attrs:{color:"primary",outlined:"",disabled:!e.layoutPropFormValid},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[a("strong",[e._v("Save layout")])]):e._e(),e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{color:"error",icon:"",to:{name:"carLayouts"}}},[a("v-icon",[e._v("mdi-cancel")])],1):e._e(),e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{color:"primary",icon:""},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[a("v-icon",[e._v("mdi-content-save")])],1):e._e()],1),a("v-divider",{staticClass:"my-4"}),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-card",{staticClass:"fill-height"},[a("v-form",{ref:"layoutPropForm",attrs:{"lazy-validation":""},model:{value:e.layoutPropFormValid,callback:function(t){e.layoutPropFormValid=t},expression:"layoutPropFormValid"}},[a("v-card-title",[e._v(" Layout Properties ")]),a("v-card-text",{staticClass:"px-0"},[a("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Width (cells)",rules:e.carLayoutWidthRules,type:"number","prepend-icon":"mdi-arrow-left-right"},model:{value:e.carLayout.width,callback:function(t){e.$set(e.carLayout,"width",e._n(t))},expression:"carLayout.width"}}),a("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Height (cells)",rules:e.carLayoutHeightRules,type:"number","prepend-icon":"mdi-arrow-up-down"},model:{value:e.carLayout.height,callback:function(t){e.$set(e.carLayout,"height",e._n(t))},expression:"carLayout.height"}}),a("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Cell Size (pixels)",rules:e.cellSizeRules,type:"number","prepend-icon":"mdi-arrow-expand"},model:{value:e.carLayout.cellSize,callback:function(t){e.$set(e.carLayout,"cellSize",e._n(t))},expression:"carLayout.cellSize"}})],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-card",{staticClass:"fill-height pb-0"},[a("v-form",{ref:"elementForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.addNewElement(t)}},model:{value:e.elementFormValid,callback:function(t){e.elementFormValid=t},expression:"elementFormValid"}},[a("v-card-title",[e._v(" New Layout Element ")]),a("v-card-text",{staticClass:"pb-0 mb-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pa-0 pr-12",attrs:{cols:"12",md:"6"}},[a("v-select",{staticClass:"mb-6",attrs:{items:e.layoutElementTypes,"menu-props":"auto",label:"Element Type","hide-details":"","prepend-icon":"mdi-shape-square-plus"},on:{change:function(t){return e.updateElementFields()}},model:{value:e.newElementType,callback:function(t){e.newElementType=t},expression:"newElementType"}}),a("v-text-field",{attrs:{disabled:!e.checkElementTypeIsSeat(e.newElementType),label:"Seat Number",rules:e.newSeatNumberRules,type:"number",color:"accent","prepend-icon":"mdi-counter"},model:{value:e.newElementSeatNumber,callback:function(t){e.newElementSeatNumber=e._n(t)},expression:"newElementSeatNumber"}}),a("v-sheet",{attrs:{color:"#F2F2F2"}},[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"ma-0 pa-0",attrs:{justify:"center",align:"center"}},[a("v-col",{staticClass:"ma-0 py-4",attrs:{cols:"2"}},[a("v-img",{attrs:{src:r("1771")("./"+e.newElementImagePath),alt:"Element Image",width:"30",transition:"scale-transition"}},[e.checkElementTypeIsSeat(e.newElementType)?a("div",{staticClass:"text elementContainer"},[a("p",{staticClass:"ma-0 pa-0 centeredText"},[a("strong",[e._v(e._s(e.newElementSeatNumber))])])]):e._e()])],1)],1)],1)],1),a("v-col",{staticClass:"pa-0 pr-4 mb-0",attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Element Width (cells)",rules:e.newElementWidthRules,type:"number","prepend-icon":"mdi-arrow-left-right"},model:{value:e.newElementWidth,callback:function(t){e.newElementWidth=e._n(t)},expression:"newElementWidth"}}),a("v-text-field",{attrs:{disabled:e.shouldDisableNewElementHeight,label:"Element Height (cells)",rules:e.newElementHeightRules,type:"number","prepend-icon":"mdi-arrow-up-down"},model:{value:e.newElementHeight,callback:function(t){e.newElementHeight=e._n(t)},expression:"newElementHeight"}}),a("v-sheet",{attrs:{color:"#F2F2F2"}},[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"ma-0 pa-0",attrs:{justify:"center",align:"center"}},[a("v-col",{staticClass:"ma-0 py-4",attrs:{cols:"3"}},[a("v-img",{staticClass:"ml-5 ml-sm-7",attrs:{src:r("1771")("./"+e.newElementImagePath),alt:"Element Image",width:"30",transition:"scale-transition"}},[e.checkElementTypeIsSeat(e.newElementType)?a("div",{staticClass:"text elementContainer"},[a("p",{staticClass:"ma-0 pa-0 centeredText"},[a("strong",[e._v(e._s(e.newElementSeatNumber))])])]):e._e()])],1)],1)],1),a("v-row",{staticClass:"ma-0 pa-0"},[a("v-spacer"),a("v-btn",{staticClass:"mt-3 mt-md-6 mb-3 text-capitalize",attrs:{color:"accent",outlined:"",disabled:!e.elementFormValid||!e.getAvailablePosition()||e.seatNumberAlreadyTaken()},on:{click:function(t){return e.addNewElement()}}},[a("strong",[e._v("Add Element")])])],1)],1)],1)],1)],1)],1)],1)],1),a("v-card",{staticClass:"mt-3",staticStyle:{overflow:"auto"}},[a("v-card-title",[a("p",[e._v("Layout Result")]),a("v-spacer"),a("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(t){return e.removeAllElements()}}},[a("strong",[e._v("Remove all elements")])])],1),a("v-card-text",{attrs:{align:"center"}},[a("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.sheetWidth,height:e.sheetHeight,align:"left"}},[a("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.colNum,maxRows:e.maxRows,"row-height":e.rowHeight,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return a("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[a("v-menu",{attrs:{top:"","offset-x":!0,"nudge-top":t.h*e.carLayout.cellSize+(t.h-1)*e.gridMargin-10,"max-width":"20","open-on-click":""},scopedSlots:e._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-img",e._g({attrs:{src:r("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)}},n),[t.seatNumber?a("div",{staticClass:"text elementContainer"},[a("p",{staticClass:"ma-0 pa-0 centeredText"},[a("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])]}}],null,!0),model:{value:t.showDeleteIcon,callback:function(r){e.$set(t,"showDeleteIcon",r)},expression:"item.showDeleteIcon"}},[a("v-btn",{attrs:{icon:"","x-small":"",color:"error"},on:{click:function(r){return e.deleteElement(t.i)}}},[a("v-icon",[e._v("mdi-cancel")])],1)],1)],1)})),1)],1)],1)],1)],1)},ea=[],ta=(r("a434"),r("8ba4"),r("7be8")),ra=r.n(ta),aa={name:"CarLayoutsForm",components:{GrayContainer:gt,GridLayout:ra.a.GridLayout,GridItem:ra.a.GridItem},data:function(){var e=this;return{service:W.getCrudServiceForResource("car-layout"),saveLayoutDialog:!1,saveLayoutFormValid:!0,layoutPropFormValid:!0,editingCarLayout:!1,carLayout:{_id:null,name:"",seatingCapacity:0,width:50,height:10,cellSize:10,lastElementId:0,gridLayout:[]},newLayoutName:"",newElementType:d.LAYOUT.ELEMENTS.SEAT_LEFT,newElementWidth:3,newElementHeight:3,newElementSeatNumber:10,newElementImagePath:"seat-left.png",gridMargin:d.LAYOUT.GRID_MARGIN,elementFormValid:!0,layoutElementTypes:[{text:"Seat (left)",value:d.LAYOUT.ELEMENTS.SEAT_LEFT},{text:"Seat (right)",value:d.LAYOUT.ELEMENTS.SEAT_RIGHT},{text:"Seat (up)",value:d.LAYOUT.ELEMENTS.SEAT_UP},{text:"Seat (down)",value:d.LAYOUT.ELEMENTS.SEAT_DOWN},{text:"Luggage Rack",value:d.LAYOUT.ELEMENTS.LUGGAGE_RACK},{text:"Table",value:d.LAYOUT.ELEMENTS.TABLE},{text:"Wall",value:d.LAYOUT.ELEMENTS.WALL}],layoutNameRules:[function(e){return!!e||"Layout name is required"},function(e){return e.length>=3||"Layout name must have at least 3 characters"}],carLayoutWidthRules:[function(e){return/^\d+$/.test(e)||"Width must be an integer number"},function(e){return e>=10||"Width must be 10 or above"},function(e){return e<=1e3||"Width must be 1000 or under"}],carLayoutHeightRules:[function(e){return/^\d+$/.test(e)||"Height must be an integer number"},function(e){return e>=1||"Height must be 1 or above"},function(e){return e<=1e3||"Height must be 1000 or under"}],cellSizeRules:[function(e){return/^\d+$/.test(e)||"Size must be an integer number"},function(e){return e>=1||"Size must be 1 or above"},function(e){return e<=100||"Size must be 100 or under"}],newElementWidthRules:[function(e){return/^\d+$/.test(e)||"Width must be an integer number"},function(e){return e>=1||"Width must be 1 or above"},function(e){return e<=100||"Width must be 100 or under"}],newElementHeightRules:[function(e){return/^\d+$/.test(e)||"Height must be an integer number"},function(e){return e>=1||"Height must be 1 or above"},function(e){return e<=100||"Height must be 100 or under"}],newSeatNumberRules:[function(e){return/^\d+$/.test(e)||"Seat number must be an integer number"},function(e){return e>=1||"Seat number must be 1 or above"},function(e){return e<1e3||"Seat number must be under 1000"},function(t){return!e.seatNumberAlreadyTaken(t)||"Seat number already in use"}]}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("carLayoutsForm"!==this.$route.name){e.next=2;break}return e.abrupt("return");case 2:return this.editingCarLayout=!0,e.prev=3,e.next=6,Br.getByName(this.$route.params.carLayoutName);case 6:for(t=e.sent,this.carLayout._id=t._id,this.carLayout.name=t.name,this.carLayout.seatingCapacity=t.seatingCapacity,this.carLayout.width=t.width,this.carLayout.height=t.height,this.carLayout.cellSize=t.cellSize,this.carLayout.lastElementId=t.lastElementId,this.carLayout.gridLayout=[],r=!0,a=!1,i=void 0,e.prev=18,n=t.elements[Symbol.iterator]();!(r=(s=n.next()).done);r=!0)o=s.value,this.carLayout.gridLayout.push(o);e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](18),a=!0,i=e.t0;case 26:e.prev=26,e.prev=27,r||null==n.return||n.return();case 29:if(e.prev=29,!a){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(26);case 34:e.next=41;break;case 36:return e.prev=36,e.t1=e["catch"](3),this.$emit("serverError",e.t1.response.data.err.message),e.next=41,this.$router.push({name:"carLayouts"});case 41:case"end":return e.stop()}}),e,this,[[3,36],[18,22,26,34],[27,,29,33]])})));function t(){return e.apply(this,arguments)}return t}(),watch:{newElementWidth:function(e){this.checkElementTypeIsSquare(this.newElementType)&&(this.newElementHeight=e)}},computed:{title:function(){return this.editingCarLayout?"Edit Car Layout":"New Car Layout"},shouldDisableNewElementHeight:function(){return this.checkElementTypeIsSquare(this.newElementType)},gridMargins:function(){return[this.gridMargin,this.gridMargin]},sheetWidth:function(){return this.carLayout.cellSize*this.carLayout.width+this.gridMargin*(this.carLayout.width-1)+40},sheetHeight:function(){return this.carLayout.cellSize*this.carLayout.height+this.gridMargin*(this.carLayout.height-1)+40},colNum:function(){return Number.isInteger(this.carLayout.width)?this.carLayout.width:0},maxRows:function(){return Number.isInteger(this.carLayout.height)?this.carLayout.height:0},rowHeight:function(){return Number.isInteger(this.carLayout.cellSize)?this.carLayout.cellSize:0}},methods:{checkElementTypeIsSeat:function(e){return[d.LAYOUT.ELEMENTS.SEAT_LEFT,d.LAYOUT.ELEMENTS.SEAT_RIGHT,d.LAYOUT.ELEMENTS.SEAT_UP,d.LAYOUT.ELEMENTS.SEAT_DOWN].includes(e)},checkElementTypeIsSquare:function(e){return[d.LAYOUT.ELEMENTS.SEAT_LEFT,d.LAYOUT.ELEMENTS.SEAT_RIGHT,d.LAYOUT.ELEMENTS.SEAT_UP,d.LAYOUT.ELEMENTS.SEAT_DOWN,d.LAYOUT.ELEMENTS.LUGGAGE_RACK].includes(e)},updateElementFields:function(){this.newElementImagePath=this.getPngNameFromElementType(this.newElementType),this.checkElementTypeIsSquare(this.newElementType)&&(this.newElementHeight=this.newElementWidth)},getPngNameFromElementType:function(e){return Br.getPngNameFromElementType(e)},addNewElement:function(){var e=this.getAvailablePosition();this.carLayout.lastElementId++;var t={i:this.carLayout.lastElementId,x:e.x,y:e.y,w:this.newElementWidth,h:this.newElementHeight,type:this.newElementType};this.checkElementTypeIsSeat(t.type)&&(t.seatNumber=this.newElementSeatNumber,this.carLayout.seatingCapacity++),this.carLayout.gridLayout.push(t)},getAvailablePosition:function(){for(var e=this.carLayout.height-this.newElementHeight+1,t=this.carLayout.width-this.newElementWidth+1,r=0;r<e;r++)for(var a=0;a<t;a++){for(var i=!1,n=r;n<r+this.newElementHeight;n++){for(var s=a;s<a+this.newElementWidth;s++){var o=!0,l=!1,c=void 0;try{for(var u,d=this.carLayout.gridLayout[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var m=u.value;if(n>=m.y&&n<=m.y+m.h-1&&s>=m.x&&s<=m.x+m.w-1){i=!0;break}}}catch(p){l=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}if(i)break}if(i)break}if(!i)return{x:a,y:r}}return null},deleteElement:function(e){var t=this.carLayout.gridLayout.findIndex((function(t){return t.i===e}));this.checkElementTypeIsSeat(this.carLayout.gridLayout[t].type)&&this.carLayout.seatingCapacity--,this.carLayout.gridLayout.splice(t,1)},removeAllElements:function(){this.carLayout.gridLayout.splice(0,this.carLayout.gridLayout.length),this.carLayout.seatingCapacity=0},seatNumberAlreadyTaken:function(){if(!this.checkElementTypeIsSeat(this.newElementType))return!1;var e=!0,t=!1,r=void 0;try{for(var a,i=this.carLayout.gridLayout[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.seatNumber===this.newElementSeatNumber)return!0}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return!1},saveLayout:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$refs.saveLayoutForm.validate()){e.next=4;break}return this.saveLayoutFormValid=!1,e.abrupt("return");case 4:if(this.$refs.layoutPropForm.validate()){e.next=7;break}return this.layoutPropFormValid=!1,e.abrupt("return");case 7:for(t={_id:this.carLayout._id,name:this.newLayoutName,seatingCapacity:this.carLayout.seatingCapacity,width:this.carLayout.width,height:this.carLayout.height,cellSize:this.carLayout.cellSize,lastElementId:this.carLayout.lastElementId,elements:[]},r=!0,a=!1,i=void 0,e.prev=11,n=this.carLayout.gridLayout[Symbol.iterator]();!(r=(s=n.next()).done);r=!0)o=s.value,l={i:o.i,x:o.x,y:o.y,w:o.w,h:o.h,type:o.type,seatNumber:o.seatNumber},"undefined"===typeof l.seatNumber&&delete l.seatNumber,t.elements.push(l);e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),a=!0,i=e.t0;case 19:e.prev=19,e.prev=20,r||null==n.return||n.return();case 22:if(e.prev=22,!a){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:if(!this.editingCarLayout){e.next=34;break}return e.next=30,this.service.update(t);case 30:return e.next=32,this.$store.dispatch("showNotification",{msg:"Car Layout has been successfully saved."});case 32:e.next=38;break;case 34:return e.next=36,this.service.create(t);case 36:return e.next=38,this.$store.dispatch("showNotification",{msg:"New Car Layout has been successfully created."});case 38:return this.saveLayoutDialog=!1,e.next=41,this.$router.push({name:"carLayouts"});case 41:e.next=46;break;case 43:e.prev=43,e.t1=e["catch"](0),this.$emit("serverError",e.t1.response.data.err.message);case 46:case"end":return e.stop()}}),e,this,[[0,43],[11,15,19,27],[20,,22,26]])})));function t(){return e.apply(this,arguments)}return t}(),changeSaveLayoutDialogVisibility:function(){this.saveLayoutDialog=!this.saveLayoutDialog,this.saveLayoutDialog&&(this.newLayoutName=this.carLayout.name,this.$refs.saveLayoutForm&&this.$refs.saveLayoutForm.resetValidation())}}},ia=aa,na=(r("d4ae"),r("b974")),sa=Object(v["a"])(ia,Zr,ea,!1,null,"225225c8",null),oa=sa.exports;f()(sa,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VDialog:w["a"],VDivider:qe["a"],VForm:ve["a"],VIcon:x["a"],VImg:R["a"],VMenu:O["a"],VRow:V["a"],VSelect:na["a"],VSheet:jr["a"],VSpacer:I["a"],VTextField:ee["a"]});var la=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",{staticClass:"fill-height"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.title)+" ")]),r("v-spacer"),e.$vuetify.breakpoint.smAndUp?r("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"routes"}}},[r("strong",[e._v("Cancel")])]):e._e(),e.$vuetify.breakpoint.smAndUp?r("v-btn",{staticClass:"ma-0 mr-2",attrs:{color:"primary",outlined:"",disabled:!e.routeFormValid||e.savingRoute},on:{click:function(t){return e.saveRoute()}}},[r("strong",[e._v("Save route")])]):e._e(),e.$vuetify.breakpoint.xsOnly?r("v-btn",{attrs:{color:"error",icon:"",to:{name:"routes"}}},[r("v-icon",[e._v("mdi-cancel")])],1):e._e(),e.$vuetify.breakpoint.xsOnly?r("v-btn",{attrs:{color:"primary",icon:"",disabled:!e.routeFormValid||e.savingRoute},on:{click:function(t){return e.saveRoute()}}},[r("v-icon",[e._v("mdi-content-save")])],1):e._e()],1),r("v-divider",{staticClass:"my-4"}),r("v-card",[r("v-tabs",{attrs:{grow:"","center-active":""}},[r("v-tab",[r("v-icon",{attrs:{left:""}},[e._v("mdi-clock-outline")]),e._v(" Time Details ")],1),r("v-tab",[r("v-icon",{attrs:{left:""}},[e._v("mdi-city")]),e._v(" Stations ")],1),r("v-tab",[r("v-icon",{attrs:{left:""}},[e._v("mdi-train")]),e._v(" Train & Cars ")],1),r("v-tab-item",[r("v-form",{ref:"timeDetailsForm",attrs:{"lazy-validation":""},model:{value:e.timeDetailsFormValid,callback:function(t){e.timeDetailsFormValid=t},expression:"timeDetailsFormValid"}},[r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"pl-7"},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[r("v-text-field",{attrs:{value:"1",label:"Departure Day",type:"number","prepend-icon":"mdi-clock-start",disabled:""}})],1),r("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[r("v-dialog",{ref:"depTimeDialog",attrs:{"return-value":e.depTimeText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.depTimeText=t},"update:return-value":function(t){e.depTimeText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Departure Time","prepend-icon":"mdi-clock",readonly:"",rules:e.departureTimeRules},model:{value:e.depTimeText,callback:function(t){e.depTimeText=t},expression:"depTimeText"}},a))]}}]),model:{value:e.depTimeDialog,callback:function(t){e.depTimeDialog=t},expression:"depTimeDialog"}},[e.depTimeDialog?r("v-time-picker",{attrs:{"full-width":""},model:{value:e.depTimeText,callback:function(t){e.depTimeText=t},expression:"depTimeText"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.depTimeDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.depTimeDialog.save(e.depTimeText)}}},[e._v("OK")])],1):e._e()],1)],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[r("v-text-field",{attrs:{value:"1",label:"Arrival Day",type:"number","prepend-icon":"mdi-clock-end",rules:e.arrivalDayRules},model:{value:e.arrivalDay,callback:function(t){e.arrivalDay=e._n(t)},expression:"arrivalDay"}})],1),r("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[r("v-dialog",{ref:"arrTimeDialog",attrs:{"return-value":e.arrTimeText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.arrTimeText=t},"update:return-value":function(t){e.arrTimeText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Arrival Time","prepend-icon":"mdi-clock",readonly:"",rules:e.arrivalTimeRules},model:{value:e.arrTimeText,callback:function(t){e.arrTimeText=t},expression:"arrTimeText"}},a))]}}]),model:{value:e.arrTimeDialog,callback:function(t){e.arrTimeDialog=t},expression:"arrTimeDialog"}},[e.arrTimeDialog?r("v-time-picker",{attrs:{"full-width":""},model:{value:e.arrTimeText,callback:function(t){e.arrTimeText=t},expression:"arrTimeText"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.arrTimeDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.arrTimeDialog.save(e.arrTimeText)}}},[e._v(" OK ")])],1):e._e()],1)],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-select",{attrs:{items:e.activeDaysItems,label:"Days of the week when the route is active",chips:"",multiple:"","deletable-chips":""},model:{value:e.route.activeWeekDays,callback:function(t){e.$set(e.route,"activeWeekDays",t)},expression:"route.activeWeekDays"}})],1)],1)],1)],1)],1)],1),r("v-tab-item",{staticClass:"pa-5"},[r("RouteStationsPanel",{attrs:{items:e.route.routeStations,"route-departure-time":e.depTimeText,"route-arrival-day":e.arrivalDay,"route-arrival-time":e.arrTimeText},on:{changedRouteStations:e.onChangeRouteStations}})],1),r("v-tab-item",{staticClass:"pa-5"},[r("TrainCarsPanel",{attrs:{carTemplates:e.route.carTemplates,train:e.route.train,"route-stations":e.route.routeStations},on:{changedCarTemplates:e.onChangeCarTemplates,changedTrain:e.onChangeTrain}})],1)],1)],1)],1)},ca=[],ua=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"pl-7"},[r("CrudTable",{attrs:{entity:"route station","entity-name-plural":"route stations","with-change-order":"",headers:e.headers,service:e.service,"default-item":e.defaultItem,"sort-default-by":"orderNo"},on:{serverError:e.onServerError,movedUpItem:e.notifyChangedRouteStations,movedDownItem:e.notifyChangedRouteStations,createdItem:e.notifyChangedRouteStations,updatedItem:e.notifyChangedRouteStations,deletedItem:e.notifyChangedRouteStations},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Station","prepend-icon":"mdi-city",rules:e.validationRules["station._id"]},model:{value:a.station._id,callback:function(t){e.$set(a.station,"_id",t)},expression:"editedItem.station._id"}})],1),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"Distance",type:"number",suffix:"Km",rules:e.validationRules.distance,disabled:a.isSource},model:{value:a.distance,callback:function(t){e.$set(a,"distance",t)},expression:"editedItem.distance"}})],1)],1),r("v-divider"),r("v-row",[r("v-col",[r("p",{staticClass:"title mb-n2"},[e._v(" Station Type ")]),r("v-radio-group",{attrs:{mandatory:!0},on:{change:function(t){return e.onRadioChange(a)}},model:{value:a.stationTypeRadio,callback:function(t){e.$set(a,"stationTypeRadio",t)},expression:"editedItem.stationTypeRadio"}},[r("v-radio",{attrs:{label:"The route's point of departure",value:"source"}}),r("v-radio",{attrs:{label:"An internal node of the route",value:"internal"}}),r("v-radio",{attrs:{label:"The route's point of arrival",value:"destination"}})],1)],1)],1),r("v-divider"),a.isSource?e._e():r("v-row",[r("v-col",{attrs:{cols:"5",sm:"4"}},[r("v-text-field",{attrs:{value:"1",label:"Arrival Day",type:"number","prepend-icon":"mdi-clock-end",rules:e.validationRules.arrivalDay},model:{value:a.arrivalDay,callback:function(t){e.$set(a,"arrivalDay",e._n(t))},expression:"editedItem.arrivalDay"}})],1),r("v-col",{attrs:{cols:"7",sm:"6"}},[r("TimePicker",{attrs:{name:"arrTimeRouteStation",label:"Arrival Time",requiredMessage:"Arrival time is required","initial-value":a.arrivalTimeText},on:{timePickerChanged:function(t){return e.onTimePickerChanged(a,t)}}})],1)],1),a.isDestination?e._e():r("v-row",[r("v-col",{attrs:{cols:"5",sm:"4"}},[r("v-text-field",{attrs:{value:"1",label:"Departure Day",type:"number","prepend-icon":"mdi-clock-start",rules:e.validationRules.departureDay},model:{value:a.departureDay,callback:function(t){e.$set(a,"departureDay",e._n(t))},expression:"editedItem.departureDay"}})],1),r("v-col",{attrs:{cols:"7",sm:"6"}},[r("TimePicker",{attrs:{name:"depTimeRouteStation",label:"Departure Time",requiredMessage:"Departure time is required","initial-value":a.departureTimeText},on:{timePickerChanged:function(t){return e.onTimePickerChanged(a,t)}}})],1)],1)],1)]}}])})],1)],1)},da=[],ma=(r("7db0"),r("25eb"),r("25f0"),r("2909")),pa=r("b9b9"),va=W.getCrudServiceForResource("station"),ha={routeStations:[],init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.routeStations=Object(ma["a"])(e);var t=!0,r=!1,a=void 0;try{for(var i,n=this.routeStations[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var s=i.value;if(s.isSource=!1,s.isDestination=!1,s.mongoId=s._id,s._id=s.orderNo,0===new Date(s.departureTime).getTime())s.isSource=!1,s.isDestination=!0,s.arrivalTimeText=pa(s.arrivalTime,"HH:MM"),s.departureTimeText="N/A",s.haltText="N/A",s.stationTypeRadio="destination",s.arrivalDay=1+Math.floor((new Date(s.arrivalTime)-new Date(2e3,0,1))/864e5),s.departureDay=1;else if(0===new Date(s.arrivalTime).getTime())s.isSource=!0,s.isDestination=!1,s.arrivalTimeText="N/A",s.departureTimeText=pa(s.departureTime,"HH:MM"),s.haltText="N/A",s.stationTypeRadio="source",s.arrivalDay=1,s.departureDay=1+Math.floor((new Date(s.departureTime)-new Date(2e3,0,1))/864e5);else{s.isSource=!1,s.isDestination=!1,s.arrivalTimeText=pa(s.arrivalTime,"HH:MM"),s.departureTimeText=pa(s.departureTime,"HH:MM");var o=Number.parseInt(s.halt/1e3/60/60),l=Number.parseInt(s.halt/1e3/60);Number.parseInt(s.halt/1e3);s.haltText=(o<10?"0":"")+o.toString()+":"+(l%60<10?"0":"")+(l%60).toString(),s.stationTypeRadio="internal",s.arrivalDay=1+Math.floor((new Date(s.arrivalTime)-new Date(2e3,0,1))/864e5),s.departureDay=1+Math.floor((new Date(s.departureTime)-new Date(2e3,0,1))/864e5)}}}catch(c){r=!0,a=c}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}},index:function(){return this.routeStations},show:function(e){return this.routeStations.find((function(t){return t._id===e}))},create:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(JSON.stringify(t)),r.orderNo=this.routeStations.length+1,r._id=r.orderNo,this.setStationTimestampsBasedOnTimeTexts(r),e.next=6,va.index();case 6:a=e.sent,i=a.find((function(e){return e._id===r.station._id})),r.station.name=i.name,this.routeStations.push(r),this.routeStations.sort((function(e,t){return e.orderNo-t.orderNo}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(JSON.stringify(t)),this.setStationTimestampsBasedOnTimeTexts(r),e.next=4,va.index();case 4:a=e.sent,i=a.find((function(e){return e._id===r.station._id})),r.station.name=i.name,n=this.routeStations.findIndex((function(e){return e.orderNo===r.orderNo})),this.routeStations[n]=r;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(e){var t=this.routeStations.findIndex((function(t){return t._id===e}));if(t>-1){this.routeStations.splice(t,1);for(var r=t;r<this.routeStations.length;r++)this.routeStations[r].orderNo--,this.routeStations[r]._id--}},moveUp:function(e){var t=this.routeStations[e];return this.routeStations.splice(e,1),this.routeStations.splice(e-1,0,t),this.routeStations[e-1].orderNo--,this.routeStations[e-1]._id--,this.routeStations[e].orderNo++,this.routeStations[e]._id++,this.routeStations},moveDown:function(e){var t=this.routeStations[e];return this.routeStations.splice(e,1),this.routeStations.splice(e+1,0,t),this.routeStations[e].orderNo--,this.routeStations[e]._id--,this.routeStations[e+1].orderNo++,this.routeStations[e+1]._id++,this.routeStations},setStationTimestampsBasedOnTimeTexts:function(e){if(e.isSource)e.arrivalTime=new Date(0),e.departureTime=this.getStandardDateFromDayTime(e.departureDay,e.departureTimeText),e.haltText="N/A",e.arrivalTimeText="N/A";else if(e.isDestination)e.arrivalTime=this.getStandardDateFromDayTime(e.arrivalDay,e.arrivalTimeText),e.departureTime=new Date(0),e.haltText="N/A",e.departureTimeText="N/A";else{e.arrivalTime=this.getStandardDateFromDayTime(e.arrivalDay,e.arrivalTimeText),e.departureTime=this.getStandardDateFromDayTime(e.departureDay,e.departureTimeText),e.halt=e.departureTime-e.arrivalTime;var t=Math.floor(e.halt/36e5),r=Math.floor(e.halt/6e4);e.haltText=(t<10?"0":"")+t.toString()+":"+(r%60<10?"0":"")+(r%60).toString()}},getStandardDateFromDayTime:function(e,t){var r=new Date(2e3,0,1);return r.setHours(parseInt(t.substr(0,2))),r.setMinutes(parseInt(t.substr(3,2))),r.setDate(e),r}},fa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{ref:"timePickerDialog",attrs:{"return-value":e.timePickerText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.timePickerText=t},"update:return-value":function(t){e.timePickerText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:e.label,"prepend-icon":"mdi-clock",readonly:"",rules:e.timePickerTextRules},model:{value:e.timePickerText,callback:function(t){e.timePickerText=t},expression:"timePickerText"}},a))]}}]),model:{value:e.timePickerDialog,callback:function(t){e.timePickerDialog=t},expression:"timePickerDialog"}},[e.timePickerDialog?r("v-time-picker",{attrs:{"full-width":""},model:{value:e.timePickerText,callback:function(t){e.timePickerText=t},expression:"timePickerText"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timePickerDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timePickerDialog.save(e.timePickerText)}}},[e._v(" OK ")])],1):e._e()],1)},ga=[],Sa={name:"TimePicker",props:{name:String,initialValue:String,label:String,requiredMessage:String},data:function(){return{timePickerDialog:!1,timePickerText:null,timePickerTextRules:[]}},mounted:function(){var e=this;this.timePickerTextRules.push((function(t){return!!t||e.requiredMessage})),this.initialValue&&"N/A"!==this.initialValue&&(this.timePickerText=this.initialValue)},watch:{initialValue:function(e){this.timePickerText=e&&"N/A"!==e?e:null},timePickerText:function(e){this.$emit("timePickerChanged",{name:this.name,newTime:e})}}},ya=Sa,Aa=r("c964"),ba=Object(v["a"])(ya,fa,ga,!1,null,"471f2937",null),Ea=ba.exports;f()(ba,{VBtn:y["a"],VDialog:w["a"],VSpacer:I["a"],VTextField:ee["a"],VTimePicker:Aa["a"]});var Ta={name:"RouteStationsPanel",components:{TimePicker:Ea,CrudTable:Gt},props:{items:Array,routeDepartureTime:String,routeArrivalDay:Number,routeArrivalTime:String},data:function(){return{service:ha,stationService:W.getCrudServiceForResource("station"),headers:[{text:"No.",value:"orderNo",align:"center"},{text:"Station",value:"station.name",align:"center"},{text:"Distance (Km)",value:"distance",align:"center"},{text:"Arrival",value:"arrivalTimeText",align:"center"},{text:"Departure",value:"departureTimeText",align:"center"},{text:"Halt",value:"haltText",align:"center"}],defaultItem:{_id:"",mongoId:"",orderNo:"",station:{_id:"",name:""},distance:0,arrivalDay:1,departureDay:1,arrivalTimeText:null,departureTimeText:null,halt:0,isSource:!1,isDestination:!1,stationTypeRadio:"internal"},stationsSelectItems:[],validationRules:{"station._id":[function(e){return!!e||"Station is required"}],distance:[function(e){return!!e||0===e||"Distance is required"},function(e){return e>=0||"Distance must be 0 or greater than 0"}],arrivalDay:[function(e){return!!e||"Arrival day is required"},function(e){return e>0||"Arrival day must be greater than 0"}],departureDay:[function(e){return!!e||"Departure day is required"},function(e){return e>0||"Departure day must be greater than 0"}]}}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.service.init(this.items),e.next=3,this.stationService.index();case 3:t=e.sent,t.sort((function(e,t){var r=e.name.toUpperCase(),a=t.name.toUpperCase();return r<a?-1:r>a?1:0})),t.forEach((function(e){r.stationsSelectItems.push({value:e._id,text:e.name})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{onServerError:function(e){this.$emit("serverError",e)},notifyChangedRouteStations:function(){var e=this.service.index();this.$emit("changedRouteStations",e)},onTimePickerChanged:function(e,t){switch(t.name){case"arrTimeRouteStation":e.arrivalTimeText=t.newTime;break;case"depTimeRouteStation":e.departureTimeText=t.newTime;break}},onRadioChange:function(e){switch(e.stationTypeRadio){case"source":e.isSource=!0,e.isDestination=!1,e.distance=0,e.arrivalTimeText=null,e.departureTimeText=this.routeDepartureTime;break;case"internal":e.isSource=!1,e.isDestination=!1;break;case"destination":e.isSource=!1,e.isDestination=!0,e.departureTimeText=null,e.arrivalTimeText=this.routeArrivalTime,e.arrivalDay=this.routeArrivalDay;break}}}},wa=Ta,Ca=r("67b6"),xa=r("43a6"),Ra=Object(v["a"])(wa,ua,da,!1,null,"079df9d6",null),_a=Ra.exports;f()(Ra,{VCard:A["a"],VCardText:b["c"],VCol:E["a"],VContainer:Ee["a"],VDivider:qe["a"],VRadio:Ca["a"],VRadioGroup:xa["a"],VRow:V["a"],VSelect:na["a"],VTextField:ee["a"]});var ka=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:""}},[r("v-card-text",{staticClass:"pl-7"},[r("CarLayoutDialog",{attrs:{state:e.printedCarLayoutDialog,"car-layout":e.printedCarLayout},on:{changeDialogState:e.onChangeCarLayoutDialogState}}),r("v-card",{staticClass:"mb-5"},[r("v-card-title",[e._v(" Train Details ")]),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-select",{attrs:{items:e.trainCategoriesSelectItems,"menu-props":"auto",label:"Train Category","prepend-icon":"mdi-train-variant",rules:e.validationRules.trainCategory},model:{value:e.currentTrain.trainCategory,callback:function(t){e.$set(e.currentTrain,"trainCategory",t)},expression:"currentTrain.trainCategory"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{label:"Train Number","prepend-icon":"mdi-counter",type:"number",rules:e.validationRules.trainNumber},model:{value:e.currentTrain.number,callback:function(t){e.$set(e.currentTrain,"number",t)},expression:"currentTrain.number"}})],1)],1)],1)],1),r("CrudTable",{attrs:{entity:"car template","entity-name-plural":"car templates","with-change-order":"","with-show-item":"",headers:e.headers,service:e.carTemplatesService,"default-item":e.defaultCarTemplate,"change-order-color":"primary","sort-default-by":"orderNo"},on:{serverError:e.onServerError,movedUpItem:e.notifyChangedCarTemplates,movedDownItem:e.notifyChangedCarTemplates,createdItem:e.notifyChangedCarTemplates,updatedItem:e.notifyChangedCarTemplates,deletedItem:e.notifyChangedCarTemplates,showItem:e.showSelectedCarLayout},scopedSlots:e._u([{key:"form",fn:function(t){var a=t.editedItem;return[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Car Number","prepend-icon":"mdi-numeric",rules:e.validationRules.number},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"editedItem.number"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{items:e.travelClassesSelectItems,"menu-props":"auto",label:"Travel Class","prepend-icon":"mdi-seat-passenger",rules:e.validationRules["travelClass._id"]},model:{value:a.travelClass._id,callback:function(t){e.$set(a.travelClass,"_id",t)},expression:"editedItem.travelClass._id"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Departure Station","prepend-icon":"mdi-city",rules:e.validationRules["departureStation.station._id"]},model:{value:a.departureStation.station._id,callback:function(t){e.$set(a.departureStation.station,"_id",t)},expression:"editedItem.departureStation.station._id"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Arrival Station","prepend-icon":"mdi-city",rules:e.validationRules["arrivalStation.station._id"]},model:{value:a.arrivalStation.station._id,callback:function(t){e.$set(a.arrivalStation.station,"_id",t)},expression:"editedItem.arrivalStation.station._id"}})],1)],1),r("v-row",[r("v-col",[r("v-select",{attrs:{items:e.carLayoutsSelectItems,"menu-props":"auto",label:"Car Layout","append-outer-icon":"mdi-eye",rules:e.validationRules["carLayout"]},on:{"click:append-outer":function(t){return e.showSelectedCarLayout(a)}},model:{value:a.carLayout,callback:function(t){e.$set(a,"carLayout",t)},expression:"editedItem.carLayout"}})],1)],1)],1)]}}])})],1)],1)},Da=[],La=W.getCrudServiceForResource("station"),Na=W.getCrudServiceForResource("travel-class"),Oa={carTemplates:[],init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.carTemplates=Object(ma["a"])(e);var t=!0,r=!1,a=void 0;try{for(var i,n=this.carTemplates[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var s=i.value;s.mongoId=s._id,s._id=s.orderNo}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}},index:function(){return this.carTemplates},show:function(e){return this.carTemplates.find((function(t){return t._id===e}))},create:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(JSON.stringify(t)),r.orderNo=this.carTemplates.length+1,r._id=r.orderNo,e.next=5,this.sanitizeCarLayoutTravelClassStationsFields(r);case 5:this.carTemplates.push(r),this.carTemplates.sort((function(e,t){return e.orderNo-t.orderNo}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(JSON.stringify(t)),e.next=3,this.sanitizeCarLayoutTravelClassStationsFields(r);case 3:a=this.carTemplates.findIndex((function(e){return e.orderNo===r.orderNo})),this.carTemplates[a]=r;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delete:function(e){var t=this.carTemplates.findIndex((function(t){return t._id===e}));if(t>-1){this.carTemplates.splice(t,1);for(var r=t;r<this.carTemplates.length;r++)this.carTemplates[r].orderNo--,this.carTemplates[r]._id--}},moveUp:function(e){var t=this.carTemplates[e];return this.carTemplates.splice(e,1),this.carTemplates.splice(e-1,0,t),this.carTemplates[e-1].orderNo--,this.carTemplates[e-1]._id--,this.carTemplates[e].orderNo++,this.carTemplates[e]._id++,this.carTemplates},moveDown:function(e){var t=this.carTemplates[e];return this.carTemplates.splice(e,1),this.carTemplates.splice(e+1,0,t),this.carTemplates[e].orderNo--,this.carTemplates[e]._id--,this.carTemplates[e+1].orderNo++,this.carTemplates[e+1]._id++,this.carTemplates},sanitizeCarLayoutTravelClassStationsFields:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,La.index();case 2:return r=e.sent,t.departureStation.station=r.find((function(e){return e._id===t.departureStation.station._id})),t.arrivalStation.station=r.find((function(e){return e._id===t.arrivalStation.station._id})),e.next=7,Na.index();case 7:a=e.sent,t.travelClass=a.find((function(e){return e._id===t.travelClass._id}));case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Ua={name:"TrainCarsPanel",components:{CarLayoutDialog:Wr,CrudTable:Gt},props:{carTemplates:Array,train:Object,routeStations:Array},data:function(){return{carTemplatesService:Oa,stationsService:W.getCrudServiceForResource("station"),carLayoutsCrudService:W.getCrudServiceForResource("car-layout"),travelClassesService:W.getCrudServiceForResource("travel-class"),trainCategoriesService:W.getCrudServiceForResource("train-category"),headers:[{text:"No.",value:"orderNo",align:"center"},{text:"Number",value:"number",align:"center"},{text:"Travel Class",value:"travelClass.code",align:"center"},{text:"Departure Station",value:"departureStation.station.name",align:"center"},{text:"Arrival Station",value:"arrivalStation.station.name",align:"center"},{text:"Car Layout",value:"carLayout.name",align:"center"}],currentTrain:{number:"",trainCategory:{}},defaultCarTemplate:{_id:"",mongoId:"",orderNo:"",number:"",departureStation:{station:{_id:"",name:""}},arrivalStation:{station:{_id:"",name:""}},travelClass:{_id:"",code:""},carLayout:{}},stationsSelectItems:[],travelClassesSelectItems:[],carLayoutsSelectItems:[],trainCategoriesSelectItems:[],printedCarLayout:{},printedCarLayoutDialog:!1,validationRules:{"departureStation.station._id":[function(e){return!!e||"Departure station is required"}],"arrivalStation.station._id":[function(e){return!!e||"Arrival station is required"}],"travelClass._id":[function(e){return!!e||"Travel class is required"}],carLayout:[function(e){return Object.keys(e).length>0||"Car layout is required"}],number:[function(e){return!!e||"Car number is required"}],trainNumber:[function(e){return!!e||"Train number is required"},function(e){return e>0||"Train number must be greater than 0"}],trainCategory:[function(e){return Object.keys(e).length>0||"Train category is required"}]}}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.carTemplatesService.init(this.carTemplates),this.train&&(this.currentTrain=JSON.parse(JSON.stringify(this.train))),t=JSON.parse(JSON.stringify(this.routeStations)),t.sort((function(e,t){var r=e.station.name.toUpperCase(),a=t.station.name.toUpperCase();return r<a?-1:r>a?1:0})),t.forEach((function(e){n.stationsSelectItems.push({value:e.station._id,text:e.station.name})})),e.next=7,this.carLayoutsCrudService.index();case 7:return r=e.sent,r.sort((function(e,t){var r=e.name.toUpperCase(),a=t.name.toUpperCase();return r<a?-1:r>a?1:0})),r.forEach((function(e){n.carLayoutsSelectItems.push({value:e,text:e.name})})),e.next=12,this.travelClassesService.index();case 12:return a=e.sent,a.forEach((function(e){n.travelClassesSelectItems.push({value:e._id,text:e.code})})),e.next=16,this.trainCategoriesService.index();case 16:i=e.sent,i.forEach((function(e){n.trainCategoriesSelectItems.push({value:e,text:e.code})}));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{currentTrain:{deep:!0,handler:function(){this.$emit("changedTrain",this.currentTrain)}},routeStations:{deep:!0,handler:function(){var e=this,t=JSON.parse(JSON.stringify(this.routeStations));this.stationsSelectItems=[],t.sort((function(e,t){var r=e.station.name.toUpperCase(),a=t.station.name.toUpperCase();return r<a?-1:r>a?1:0})),t.forEach((function(t){e.stationsSelectItems.push({value:t.station._id,text:t.station.name})}))}}},methods:{onServerError:function(e){this.$emit("serverError",e)},notifyChangedCarTemplates:function(){var e=this.carTemplatesService.index();this.$emit("changedCarTemplates",e)},showSelectedCarLayout:function(e){e.carLayout&&Object.keys(e.carLayout).length&&e.carLayout.name&&(this.printedCarLayout=Br.transformFromMongo2FrontendModel(e.carLayout),this.printedCarLayoutDialog=!0)},onChangeCarLayoutDialogState:function(e){this.printedCarLayoutDialog=e}}},Va=Ua,Ia=Object(v["a"])(Va,ka,Da,!1,null,"e3d46786",null),Fa=Ia.exports;f()(Ia,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VContainer:Ee["a"],VRow:V["a"],VSelect:na["a"],VTextField:ee["a"]});var Ma={name:"RoutesForm",components:{TrainCarsPanel:Fa,RouteStationsPanel:_a,GrayContainer:gt},data:function(){return{service:At,routeFormValid:!0,timeDetailsFormValid:!0,editingRoute:!1,oldDbRoute:{},depTimeDialog:!1,depTimeText:null,arrivalDay:1,arrTimeDialog:!1,arrTimeText:null,savingRoute:!1,activeDaysItems:[{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"},{value:0,text:"Sunday"}],route:{departureTime:null,arrivalTime:null,activeWeekDays:[],noOfGeneratedRides:0,generateRidesFrom:null,generateRidesUntil:null,train:null,carTemplates:[],routeStations:[]},arrivalDayRules:[function(e){return!!e||"Arrival day is required"},function(e){return e>0||"Arrival day must be greater than 0"}],departureTimeRules:[function(e){return!!e||"Departure time is required"}],arrivalTimeRules:[function(e){return!!e||"Arrival time is required"}]}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("routesCreate"!==this.$route.name){e.next=2;break}return e.abrupt("return");case 2:if("routesEdit"!==this.$route.name){e.next=15;break}return t=r("b9b9"),this.editingRoute=!0,e.next=7,this.service.getByName(this.$route.params.routeName);case 7:this.oldDbRoute=e.sent,this.depTimeText=t(this.oldDbRoute.departureTime,"HH:MM"),this.arrTimeText=t(this.oldDbRoute.arrivalTime,"HH:MM"),this.arrivalDay=new Date(this.oldDbRoute.arrivalTime).getDate(),this.route.activeWeekDays=JSON.parse(JSON.stringify(this.oldDbRoute.activeWeekDays)),this.route.routeStations=JSON.parse(JSON.stringify(this.oldDbRoute.routeStations)),this.route.carTemplates=JSON.parse(JSON.stringify(this.oldDbRoute.carTemplates)),this.route.train=JSON.parse(JSON.stringify(this.oldDbRoute.train));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{},computed:{title:function(){return this.editingRoute?"Edit Route":"New Route"},departureDateTime:function(){if(!this.depTimeText)return null;var e=new Date(2e3,0,1),t=this.depTimeText.substr(0,2),r=this.depTimeText.substr(3,2);return e.setHours(t),e.setMinutes(r),e.getTime()},arrivalDateTime:function(){if(!this.arrTimeText)return null;var e=new Date(2e3,0,1),t=this.arrTimeText.substr(0,2),r=this.arrTimeText.substr(3,2);return e.setHours(t),e.setMinutes(r),e.setDate(e.getDate()+this.arrivalDay-1),e.getTime()},trainFormValid:function(){return!!this.route.train&&!!this.route.train.number&&this.route.train.number>0&&!!this.route.train.trainCategory&&!!this.route.train.trainCategory._id&&!!this.route.train.trainCategory.code}},methods:{saveRoute:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$refs.timeDetailsForm.validate()){e.next=4;break}return this.timeDetailsFormValid=!1,e.abrupt("return");case 4:if(this.route.departureTime=this.departureDateTime,this.route.arrivalTime=this.arrivalDateTime,this.route.activeWeekDays.sort((function(e,t){return e.value-t.value})),!(this.route.routeStations.length<2)){e.next=10;break}return this.$emit("serverError","This route needs at least 2 stations!"),e.abrupt("return");case 10:if(this.route.routeStations.forEach((function(e){e.stationId=e.station._id})),this.trainFormValid){e.next=14;break}return this.$emit("serverError","Train details not valid!"),e.abrupt("return");case 14:if(this.route.carTemplates.length){e.next=17;break}return this.$emit("serverError","This train needs at least one car!"),e.abrupt("return");case 17:if(this.route.train.trainCategoryId=this.route.train.trainCategory._id,this.route.carTemplates.forEach((function(e){e.departureStationId=e.departureStation.station._id,e.arrivalStationId=e.arrivalStation.station._id,e.travelClassId=e.travelClass._id,e.carLayoutId=e.carLayout._id})),this.route.generateRidesUntil&&(this.route.generateRidesUntil=new Date(this.route.generateRidesUntil),this.route.generateRidesUntil.setHours(23),this.route.generateRidesUntil.setMinutes(59),this.route.generateRidesUntil.setSeconds(59),this.route.generateRidesUntil.setMilliseconds(999),this.route.generateRidesUntil=this.route.generateRidesUntil.getTime()),this.savingRoute=!0,!this.editingRoute){e.next=29;break}return this.route._id=this.oldDbRoute._id,e.next=25,this.service.update(this.route);case 25:return e.next=27,this.$store.dispatch("showNotification",{msg:"Route has been successfully saved."});case 27:e.next=33;break;case 29:return e.next=31,this.service.create(this.route);case 31:return e.next=33,this.$store.dispatch("showNotification",{msg:"New Route has been successfully created."});case 33:return e.next=35,this.$router.push({name:"routes"});case 35:e.next=41;break;case 37:e.prev=37,e.t0=e["catch"](0),console.error(e.t0),this.$emit("serverError",e.t0.response.data.err.message);case 41:this.savingRoute=!1;case 42:case"end":return e.stop()}}),e,this,[[0,37]])})));function t(){return e.apply(this,arguments)}return t}(),onChangeRouteStations:function(e){this.route.routeStations=e},onChangeCarTemplates:function(e){this.route.carTemplates=e},onChangeTrain:function(e){this.route.train=e}}},Ba=Ma,Pa=r("71a3"),Ga=r("c671"),ja=r("fe57"),Ha=Object(v["a"])(Ba,la,ca,!1,null,"b0af588c",null),Ya=Ha.exports;f()(Ha,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCol:E["a"],VDialog:w["a"],VDivider:qe["a"],VForm:ve["a"],VIcon:x["a"],VRow:V["a"],VSelect:na["a"],VSpacer:I["a"],VTab:Pa["a"],VTabItem:Ga["a"],VTabs:ja["a"],VTextField:ee["a"],VTimePicker:Aa["a"]});var $a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("GrayContainer",[r("v-row",{staticClass:"ma-0 pa-0 mb-3"},[r("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.routeName))]),r("v-spacer"),e.$vuetify.breakpoint.smAndUp?r("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"routes"}}},[r("strong",[e._v("Back")])]):e._e(),e.$vuetify.breakpoint.xsOnly?r("v-btn",{attrs:{color:"error",icon:"",to:{name:"routes"}}},[r("v-icon",[e._v("mdi-cancel")])],1):e._e()],1),r("v-divider"),r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12"}},[r("RidesTable",{attrs:{route:e.route},on:{serverError:e.onServerError}})],1)],1)],1)],1)},Ja=[],za=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,"sort-by":"name","no-results-text":"No rides have been found for this route"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"ma-0 pa-0"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Rides ")]),r("v-spacer"),e.$vuetify.breakpoint.mdAndUp?r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),r("v-spacer"),r("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("div",[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-2 pr-5 text-capitalize",attrs:{color:"primary",outlined:""}},a),[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-clock-outline")]),r("strong",[e._v("Add New Rides")])],1),r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:""}},a),[r("v-icon",[e._v("mdi-plus-circle")])],1)],1)]}}]),model:{value:e.formDialog,callback:function(t){e.formDialog=t},expression:"formDialog"}},[e.formDialog?r("v-card",{attrs:{loading:e.creatingRides}},[r("v-form",{ref:"itemForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.createRides(t)}},model:{value:e.itemFormValid,callback:function(t){e.itemFormValid=t},expression:"itemFormValid"}},[r("v-card-title",[r("span",{staticClass:"headline text-capitalize"},[e._v(" Create New Rides ")])]),r("v-divider"),r("v-card-text",{},[r("RidesForm",{on:{changedNoOfGeneratedRides:e.onChangeNoOfGeneratedRides,changedGenerateRidesFrom:e.onChangeGenerateRidesFrom,changedGenerateRidesUntil:e.onChangeGenerateRidesUntil}})],1),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("v-btn",{attrs:{color:"error",text:""},on:{click:e.closeForm}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",disabled:!e.itemFormValid,type:"submit"}},[e._v("Create")])],1)],1)],1):e._e()],1)],1),e.$vuetify.breakpoint.smAndDown?r("v-row",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}}])},[r("template",{slot:"no-data"},[r("span",[e._v(" No rides available to display ")])])],2)},Wa=[],qa=r("b9b9"),Ka={getRidesForRoute:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get(d.SERVER_URL+"/route/name/"+t+"/rides").then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createRides:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.post(d.SERVER_URL+"/route/"+t+"/rides",r).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),attachFrontendFields2MongoFormat:function(e){var t=e.arrivalDates.length-1;return e.depDateText=qa(e.departureDates[0],"dd mmmm yyyy"),e.depTimeText=qa(e.departureDates[0],"HH:MM"),e.arrDateText=qa(e.arrivalDates[t],"dd mmmm yyyy"),e.arrTimeText=qa(e.arrivalDates[t],"HH:MM"),e.carsCount=e.cars.length,e.routeStationsCount=e.routeStations.length,e},delete:function(e,t){return n.a.delete(d.SERVER_URL+"/route/name/"+e+"/ride/"+t).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Qa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-radio-group",{staticClass:"mt-0",model:{value:e.radioGenerateOption,callback:function(t){e.radioGenerateOption=t},expression:"radioGenerateOption"}},[r("v-radio",{staticClass:"mt-4",attrs:{value:"generateXFromY"},scopedSlots:e._u([{key:"label",fn:function(){return[r("div",[r("v-row",{staticClass:"ml-0",attrs:{align:"center"}},[r("span",[e._v("Create")]),r("v-text-field",{staticClass:"mx-3 my-0 py-0",staticStyle:{width:"50px"},attrs:{"hide-details":"",type:"number",rules:e.noOfGeneratedRidesRules},model:{value:e.noOfGeneratedRidesOption2,callback:function(t){e.noOfGeneratedRidesOption2=t},expression:"noOfGeneratedRidesOption2"}}),r("span",[e._v("daily rides starting from")]),r("v-dialog",{ref:"dialogStartDateOption2",attrs:{"return-value":e.dateStartStringOption2,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.dateStartStringOption2=t},"update:return-value":function(t){e.dateStartStringOption2=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({staticClass:"mx-3 my-0 py-0",staticStyle:{width:"100px"},attrs:{"hide-details":"",readonly:""},model:{value:e.dateStartStringOption2,callback:function(t){e.dateStartStringOption2=t},expression:"dateStartStringOption2"}},a))]}}]),model:{value:e.dialogStartDateOption2,callback:function(t){e.dialogStartDateOption2=t},expression:"dialogStartDateOption2"}},[r("v-date-picker",{attrs:{scrollable:"",min:(new Date).toISOString().substr(0,10)},model:{value:e.dateStartStringOption2,callback:function(t){e.dateStartStringOption2=t},expression:"dateStartStringOption2"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialogStartDateOption2=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogStartDateOption2.save(e.dateStartStringOption2)}}},[e._v("OK")])],1)],1)],1)],1)]},proxy:!0}])}),r("v-radio",{staticClass:"mt-4",attrs:{value:"generateBetween"},scopedSlots:e._u([{key:"label",fn:function(){return[r("div",[r("v-row",{staticClass:"ml-0",attrs:{align:"center"}},[r("span",[e._v("Create daily rides from")]),r("DatePicker",{attrs:{name:"startDateOption3","initial-value":(new Date).toISOString().substr(0,10),classes:"mx-3 mt-5 py-0","inline-style":"width: 90px;","min-date":(new Date).toISOString().substr(0,10)},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}}),r("span",[e._v("until")]),r("DatePicker",{attrs:{name:"endDateOption3","initial-value":e.dateEndStringOption3,classes:"mx-3 mt-5 py-0","inline-style":"width: 90px;","min-date":e.dateStartStringOption3},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}})],1)],1)]},proxy:!0}])})],1)},Xa=[],Za={name:"RidesForm",components:{DatePicker:re},data:function(){return{radioGenerateOption:"generateXFromY",noOfGeneratedRidesOption2:10,dialogStartDateOption2:!1,dateStartStringOption2:(new Date).toISOString().substr(0,10),dateStartStringOption3:(new Date).toISOString().substr(0,10),dateEndStringOption3:(new Date).toISOString().substr(0,10),noOfGeneratedRidesRules:[function(e){return!!e||"Required"},function(e){return e>0||"Must be greater than 0"}]}},watch:{radioGenerateOption:function(e){switch(e){case"generateXFromY":this.$emit("changedNoOfGeneratedRides",parseInt(this.noOfGeneratedRidesOption2)),this.$emit("changedGenerateRidesFrom",this.dateStartStringOption2),this.$emit("changedGenerateRidesUntil",null);break;case"generateBetween":this.$emit("changedNoOfGeneratedRides",0),this.$emit("changedGenerateRidesFrom",this.dateStartStringOption3),this.$emit("changedGenerateRidesUntil",this.dateEndStringOption3);break}},noOfGeneratedRidesOption2:function(){this.$emit("changedNoOfGeneratedRides",parseInt(this.noOfGeneratedRidesOption2))},dateStartStringOption2:function(){this.$emit("changedGenerateRidesFrom",this.dateStartStringOption2)},dateStartStringOption3:function(){this.$emit("changedGenerateRidesFrom",this.dateStartStringOption3)},dateEndStringOption3:function(){this.$emit("changedGenerateRidesUntil",this.dateEndStringOption3)}},methods:{onDatePickerChanged:function(e){switch(e.name){case"startDateOption2":this.dateStartStringOption2=e.newDate;break;case"startDateOption3":this.dateStartStringOption3=e.newDate,new Date(this.dateStartStringOption3)>new Date(this.dateEndStringOption3)&&(this.dateEndStringOption3=this.dateStartStringOption3);break;case"endDateOption3":this.dateEndStringOption3=e.newDate;break}}}},ei=Za,ti=Object(v["a"])(ei,Qa,Xa,!1,null,"7514431e",null),ri=ti.exports;f()(ti,{VBtn:y["a"],VDatePicker:Z["a"],VDialog:w["a"],VRadio:Ca["a"],VRadioGroup:xa["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"]});var ai={name:"RidesTable",components:{RidesForm:ri},props:{route:Object},data:function(){return{searchBar:"",tableHeaders:[{text:"Departure Date",value:"depDateText",align:"left"},{text:"Departure Time",value:"depTimeText",align:"left"},{text:"Arrival Date",value:"arrDateText",align:"left"},{text:"Arrival Time",value:"arrTimeText",align:"left"},{text:"Number of Cars",value:"carsCount",align:"left"},{text:"Number of Stations",value:"routeStationsCount",align:"left"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],service:Ka,formDialog:!1,itemFormValid:!0,creatingRides:!1,generateOptions:{noOfGeneratedRides:0,generateRidesFrom:null,generateRidesUntil:null}}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize()},methods:{initialize:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.getRidesForRoute(this.$route.params.routeName);case 3:t=e.sent,t.forEach((function(e){r.items.push(r.service.attachFrontendFields2MongoFormat(e))})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),deleteItem:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.service.delete(this.$route.params.routeName,t._id);case 3:return this.items=[],e.next=6,this.service.getRidesForRoute(this.$route.params.routeName);case 6:r=e.sent,r.forEach((function(e){a.items.push(a.service.attachFrontendFields2MongoFormat(e))})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),createRides:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.creatingRides=!0,e.next=4,this.service.createRides(this.route._id,this.generateOptions);case 4:return e.next=6,this.$store.dispatch("showNotification",{msg:"New Rides have been successfully created."});case 6:return this.items=[],e.next=9,this.service.getRidesForRoute(this.$route.params.routeName);case 9:t=e.sent,t.forEach((function(e){r.items.push(r.service.attachFrontendFields2MongoFormat(e))})),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$emit("serverError",e.t0.response.data.err.message);case 16:this.closeForm();case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}(),closeForm:function(){this.formDialog=!1,this.creatingRides=!1},onChangeNoOfGeneratedRides:function(e){this.generateOptions.noOfGeneratedRides=e},onChangeGenerateRidesFrom:function(e){this.generateOptions.generateRidesFrom=e?new Date(e).getTime():null},onChangeGenerateRidesUntil:function(e){this.generateOptions.generateRidesUntil=e?new Date(e).getTime():null}}},ii=ai,ni=Object(v["a"])(ii,za,Wa,!1,null,null,null),si=ni.exports;f()(ni,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VDataTable:Tt["a"],VDialog:w["a"],VDivider:qe["a"],VForm:ve["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:wt["a"],VToolbarTitle:Ct["a"]});var oi=r("b9b9"),li={name:"TheRides",components:{RidesTable:si,GrayContainer:gt},data:function(){return{route:null}},methods:{onServerError:function(e){this.$emit("serverError",e)}},computed:{routeName:function(){if(!this.route)return"Rides";var e=this.route.routeStations,t=new Date(this.route.departureTime),r=new Date(this.route.arrivalTime),a=e.length-1;return e[0].station.name+" ("+oi(t,"HH:MM")+") - "+e[a].station.name+" ("+oi(r,"HH:MM")+")"}},mounted:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At.getByName(this.$route.params.routeName);case 2:this.route=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},ci=li,ui=Object(v["a"])(ci,$a,Ja,!1,null,null,null),di=ui.exports;f()(ui,{VBtn:y["a"],VCol:E["a"],VDivider:qe["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"]});var mi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",[r("v-row",{staticClass:"ma-0 pa-0 mb-3"},[r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" Found Rides ")])]),e.$vuetify.breakpoint.mdAndUp?r("v-spacer"):e._e(),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("v-row",{attrs:{"no-gutters":"","justify-md":"center"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[r("span",{domProps:{innerHTML:e._s(e.pageTitle)}})])])],1),e.$vuetify.breakpoint.mdAndUp?r("v-spacer"):e._e(),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("v-row",{attrs:{"no-gutters":"","justify-md":"end"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString))])])],1)],1),e.ridesNotFound?r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("v-row",{attrs:{justify:"center"}},[e._v(" Uh Oh... ")])],1),r("v-card-subtitle",{staticClass:"pt-2 pb-5"},[r("v-row",{attrs:{justify:"center"}},[e._v(" No rides were found in order to match the given criteria. "),r("br"),e._v(" Try searching for another date or give up any optional filters. ")])],1)],1)],1)],1):e._e(),e._l(e.rides,(function(t){return r("RideCardSearchResult",{key:t._id,attrs:{ride:t,"departure-station":e.departureStation,"arrival-station":e.destinationStation,"via-station":e.viaStation,"tavel-class":e.travelClass}})}))],2)},pi=[],vi=(r("4de4"),{getFilteredRides:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.SERVER_URL+"/ride/source/"+t.sourceId+"/destination/"+t.destinationId+"/date/"+t.date,r+=t.viaStationId?"/via/"+t.viaStationId:"",r+=t.travelClassId?"/travelClass/"+t.travelClassId:"",e.abrupt("return",n.a.get(r).then((function(e){return e.data})).catch(this.throwServerError));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getRideByDetails:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=d.SERVER_URL+"/ride/source/"+t.sourceId+"/destination/"+t.destinationId+"/date/"+t.date+"/departureTime/"+t.departureTime+"/arrivalTime/"+t.arrivalTime,e.abrupt("return",n.a.get(r).then((function(e){return e.data})).catch(this.throwServerError));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCarsContainingSourceDestination:function(e,t,r){var a=e.routeStations.find((function(e){return e.station._id===t})),i=e.routeStations.find((function(e){return e.station._id===r}));return e.cars.filter((function(e){var t=e.departureStation.orderNo,r=e.arrivalStation.orderNo;return t<=a.orderNo&&a.orderNo<r&&t<i.orderNo&&i.orderNo<=r}))},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}}),hi={getStationByCode:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get(d.SERVER_URL+"/station/code/"+t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},fi={getTravelClassByCode:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get(d.SERVER_URL+"/travel-class/code/"+t).then((function(e){return e.data})).catch(this.throwServerError));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},gi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",[r("v-card",[r("v-card-text",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("h2",{staticClass:"title font-weight-bold"},[e._v("Departure")]),r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(e._s(e.departureDateText))]),r("h1",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.departureTime))])])],1)],1),r("v-col",[r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("h1",{staticClass:"headline font-weight-bold"},[e._v(" "+e._s(e.distance)+" Km, "+e._s(e.spentTime)+" ")])]),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("h1",{staticClass:"title font-weight-bold"},[e._v("Train "+e._s(e.train))])]),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("h3",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Services: "+e._s(e.availableTravelClasses)+" ")])])],1)],1)],1),r("v-col",[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h2",{staticClass:"title font-weight-bold"},[e._v("Arrival")])]),r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(e._s(e.arrivalDate))])]),r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h1",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.arrivalTime))])])],1)],1)],1)],1)],1),r("v-divider"),r("v-expand-transition",[r("v-row",{directives:[{name:"show",rawName:"v-show",value:e.showRouteStations,expression:"showRouteStations"}],attrs:{"no-gutters":""}},[r("v-col",{staticClass:"mt-4 mx-5 mb-2"},[e.showVerticalStepperRouteStations()?r("v-stepper",{attrs:{vertical:""}},[e._l(e.ride.routeStations,(function(t){return[r("v-stepper-step",{key:t._id,attrs:{complete:e.isStationStepComplete(t),step:""}},[e._v(" "+e._s(t.station.name)+" "),r("small",[e._v(e._s(e.showTimeForStationOnStepper(t)))])]),r("v-stepper-content",{key:t.orderNo,attrs:{step:""}})]}))],2):e._e(),e.showVerticalStepperRouteStations()?e._e():r("v-stepper",[r("v-stepper-header",[e._l(e.ride.routeStations,(function(t){return[r("v-stepper-step",{key:t._id,attrs:{complete:e.isStationStepComplete(t),step:""}},[e._v(" "+e._s(t.station.name)+" "),r("small",[e._v(e._s(e.showTimeForStationOnStepper(t)))])]),t.orderNo!==e.ride.routeStations.length?r("v-divider",{key:t.orderNo}):e._e()]}))],2)],1)],1)],1)],1),r("v-card-actions",{staticClass:"mt-1"},[r("v-spacer"),r("v-btn",{staticClass:"body-1 text-capitalize px-5 mr-3",attrs:{color:"primary",outlined:""},on:{click:function(t){e.showRouteStations=!e.showRouteStations}}},[e._v(" "+e._s(e.showHideRouteStationsText)+" ")]),r("v-btn",{staticClass:"body-1 text-capitalize px-5",attrs:{color:"primary"},on:{click:e.bookRide}},[e._v("Book this ride")])],1)],1)],1)],1)},Si=[],yi=(r("a15b"),r("d81d"),r("6062"),r("b9b9")),Ai={name:"RideCardSearchResult",props:{ride:Object,departureStation:Object,arrivalStation:Object,viaStation:Object,travelClass:Object},data:function(){return{departureDateText:"",departureDate:null,departureTime:"",arrivalDate:"",arrivalTime:"",distance:0,spentTime:"",train:"",availableTravelClasses:"",showRouteStations:!1,departureStationOrderNo:0,arrivalStationOrderNo:0}},created:function(){var e=this,t=this.ride.routeStations.find((function(t){return t.station._id===e.departureStation._id})),r=this.ride.routeStations.find((function(t){return t.station._id===e.arrivalStation._id}));this.departureStationOrderNo=t.orderNo,this.arrivalStationOrderNo=r.orderNo;var a=t.orderNo-1,i=r.orderNo-1,n=new Date(this.ride.departureDates[a]),s=new Date(this.ride.arrivalDates[i]);this.departureDateText=yi(n,"dd mmmm yyyy"),this.departureTime=yi(new Date(t.departureTime),"HH:MM"),this.arrivalDate=yi(s,"dd mmmm yyyy"),this.arrivalTime=yi(new Date(r.arrivalTime),"HH:MM"),this.departureDate=new Date(n),this.distance=r.distance-t.distance;var o=s-n,l=Number.parseInt(o/1e3/60/60),c=Number.parseInt(o/1e3/60);this.spentTime=l>0&&c%60>0?l+" h "+c%60+" min":l>0&&!(c%60)?l+" h":!l&&c%60>0?c%60+" min":"IMMEDIATELY",this.train=this.ride.route.train.trainCategory.code+" "+this.ride.route.train.number,this.availableTravelClasses=Object(ma["a"])(new Set(this.ride.cars.map((function(e){return e.travelClass.name})))).join(", ")},computed:{showHideRouteStationsText:function(){return this.showRouteStations?"Hide Route Stations":"Show Route Stations"}},methods:{isStationStepComplete:function(e){return e.orderNo>=this.departureStationOrderNo&&e.orderNo<=this.arrivalStationOrderNo},fromTimeDateToTimeText:function(e){return yi(new Date(e),"HH:MM")},showTimeForStationOnStepper:function(e){return 0===e.halt&&e.distance>0?this.fromTimeDateToTimeText(e.arrivalTime)+" (Arrival)":this.fromTimeDateToTimeText(e.departureTime)},showVerticalStepperRouteStations:function(){return this.$vuetify.breakpoint.smAndDown||this.$vuetify.breakpoint.mdOnly&&this.ride.routeStations.length>=7||this.$vuetify.breakpoint.lgOnly&&this.ride.routeStations.length>=12||this.$vuetify.breakpoint.xlOnly&&this.ride.routeStations.length>=18},bookRide:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",t+="from="+this.departureStation.code,t+="&to="+this.arrivalStation.code,t+="&date="+yi(this.departureDate,"yyyy-mm-dd"),t+="&departureTime="+this.departureTime,t+="&arrivalTime="+this.arrivalTime,e.next=8,this.$router.push({name:"rideBooking",params:{details:t}});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},bi=Ai,Ei=r("0789"),Ti=r("7e85"),wi=r("e516"),Ci=r("9c54"),xi=r("56a4"),Ri=Object(v["a"])(bi,gi,Si,!1,null,"5b7fe055",null),_i=Ri.exports;f()(Ri,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCol:E["a"],VDivider:qe["a"],VExpandTransition:Ei["a"],VRow:V["a"],VSpacer:I["a"],VStepper:Ti["a"],VStepperContent:wi["a"],VStepperHeader:Ci["a"],VStepperStep:xi["a"]});var ki=r("72bf"),Di=r("b9b9"),Li={name:"RideSearchResultsPage",components:{RideCardSearchResult:_i,GrayContainer:gt},data:function(){return{rides:[],ridesNotFound:!1,departureStation:null,destinationStation:null,rideDateString:"",viaStation:null,travelClass:null}},computed:{pageTitle:function(){if(!this.departureStation||!this.destinationStation||!this.rideDateString)return"";var e="";return e+='<em style="color: darkblue">'+this.departureStation.name+'</em> <i class="fa fa-long-arrow-right"></i> <em style="color: darkblue">'+this.destinationStation.name+"</em>",this.$vuetify.breakpoint.mdOnly||this.$vuetify.breakpoint.xsOnly?e+="<br/>":e+=this.viaStation||this.travelClass?", ":"",e+=this.viaStation?'via <em style="color: darkblue">'+this.viaStation.name+"</em> ":"",e+=this.travelClass?"<em>("+this.travelClass.name+")</em>":"",e}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=ki.parse("?"+this.$route.params.filters),![t.from,t.to,t.date].includes(void 0)){e.next=5;break}return e.next=5,this.$router.push({name:"pageNotFound",params:{}});case 5:return e.next=7,hi.getStationByCode(t.from);case 7:return this.departureStation=e.sent,e.next=10,hi.getStationByCode(t.to);case 10:if(this.destinationStation=e.sent,this.rideDateString=Di(new Date(t.date),"dd mmmm yyyy"),!t.via){e.next=18;break}return e.next=15,hi.getStationByCode(t.via);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=null;case 19:if(this.viaStation=e.t0,!t.class){e.next=26;break}return e.next=23,fi.getTravelClassByCode(t.class);case 23:e.t1=e.sent,e.next=27;break;case 26:e.t1=null;case 27:return this.travelClass=e.t1,r=new Date,a=new Date(t.date),r.getDate()===a.getDate()&&r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear()&&a.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),0),i={sourceId:this.departureStation._id,destinationId:this.destinationStation._id,date:a.getTime(),viaStationId:this.viaStation?this.viaStation._id:null,travelClassId:this.travelClass?this.travelClass._id:null},e.next=34,vi.getFilteredRides(i);case 34:this.rides=e.sent,this.ridesNotFound=0===this.rides.length,e.next=42;break;case 38:e.prev=38,e.t2=e["catch"](0),this.ridesNotFound=!0,this.$emit("serverError",e.t2.response.data.err.message);case 42:case"end":return e.stop()}}),e,this,[[0,38]])})));function t(){return e.apply(this,arguments)}return t}()},Ni=Li,Oi=Object(v["a"])(Ni,mi,pi,!1,null,"40c73f67",null),Ui=Oi.exports;f()(Oi,{VCard:A["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:E["a"],VRow:V["a"],VSpacer:I["a"]});var Vi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",[e.rideNotFound?r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("v-row",{attrs:{justify:"center"}},[e._v(" Uh Oh... ")])],1),r("v-card-subtitle",{staticClass:"pt-2 pb-5"},[r("v-row",{attrs:{justify:"center"}},[e._v(" No ride was found in order to match the given criteria. "),r("br"),e._v(" Try searching for another date or give up any optional filters. ")])],1)],1)],1)],1):e._e(),e.rideFound?r("div",[r("v-row",{staticClass:"ma-0 pa-0 mb-3"},[r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" Book Ride ")])]),e.$vuetify.breakpoint.mdAndUp?r("v-spacer"):e._e(),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("v-row",{attrs:{"no-gutters":"","justify-md":"center"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[r("span",{domProps:{innerHTML:e._s(e.pageTitle)}})])])],1),e.$vuetify.breakpoint.mdAndUp?r("v-spacer"):e._e(),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[r("v-row",{attrs:{"no-gutters":"","justify-md":"end"}},[r("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString))])])],1)],1),r("v-stepper",{model:{value:e.currentStepperStep,callback:function(t){e.currentStepperStep=t},expression:"currentStepperStep"}},[r("v-stepper-header",[e._l(e.formHeaderSteps,(function(t){return[r("v-stepper-step",{key:t.orderNo,attrs:{complete:t.orderNo<e.currentStepperStep,step:t.orderNo}},[e._v(" "+e._s(t.title)+" ")]),t.orderNo!==e.formHeaderSteps.length?r("v-divider",{key:t.title}):e._e()]}))],2),r("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.waitingResponseFromServer,expression:"waitingResponseFromServer"}],attrs:{indeterminate:"",color:"primary",height:"4"}}),r("v-stepper-items",[r("v-stepper-content",{staticClass:"pt-4",attrs:{step:e.formHeaderSteps[0].orderNo}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-spacer"),r("v-col",{attrs:{cols:"auto"}},[r("v-row",[r("v-col",{attrs:{cols:"auto"}},[r("v-btn",{attrs:{icon:"",color:"accent",disabled:0===e.currentDisplayedCarIndex},on:{click:function(t){return e.decrementAvailableCarIfPossible()}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)],1),r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{"no-gutters":"",justify:"center"}},[e.availableCarsExist?r("h2",{staticClass:"title font-weight-black"},[e._v(" Car "+e._s(e.availableCars[e.currentDisplayedCarIndex].number)+" ")]):e._e()]),e.availableCarsExist?r("v-row",{attrs:{"no-gutters":"",justify:"center"}},[e._v(" "+e._s(e.availableCars[e.currentDisplayedCarIndex].travelClass.name)+" ")]):e._e()],1),r("v-col",{attrs:{cols:"auto"}},[r("v-btn",{attrs:{icon:"",color:"accent",disabled:e.currentDisplayedCarIndex===this.availableCars.length-1},on:{click:function(t){return e.incrementAvailableCarIfPossible()}}},[r("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1)],1),r("v-spacer")],1),r("v-row",{staticClass:"mt-3",staticStyle:{overflow:"auto"},attrs:{"no-gutters":""}},[r("v-spacer"),r("v-col",{attrs:{cols:"auto"}},[e.availableCarsExist?r("CarLayoutWithSelectableSeats",{attrs:{"car-layout":e.currentDisplayedCarLayout},on:{toggledSeat:e.toggleSelectedSeat}}):e._e()],1),r("v-spacer")],1),r("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[r("v-spacer"),r("v-btn",{attrs:{color:"primary",disabled:e.seatsNotPicked},on:{click:function(t){e.currentStepperStep++}}},[e._v(" Next Step ")])],1)],1),r("v-stepper-content",{attrs:{step:e.formHeaderSteps[1].orderNo}},[r("PassengerTypesFormStep",{attrs:{"ride-distance":e.distance,"available-cars":e.availableCars,tickets:e.requestedTickets},on:{changedTickets:e.onChangeTickets,nextBookingStep:e.onNextBookingStep,previousBookingStep:e.onPreviousBookingStep}})],1),r("v-stepper-content",{attrs:{step:e.formHeaderSteps[2].orderNo}},[r("ConfirmationBookingStep",{attrs:{"paypal-props":e.paypalData,"available-cars":e.availableCars,tickets:e.requestedTickets,ride:e.ride,"departure-station":e.departureStation,"destination-station":e.destinationStation,"departure-time-text":e.departureTimeText,"arrival-time-text":e.arrivalTimeText,"ride-date":e.rideDateString},on:{nextBookingStep:e.onNextBookingStep,previousBookingStep:e.onPreviousBookingStep,paymentCompleted:e.onPaymentCompleted}})],1),r("v-stepper-content",{attrs:{step:e.formHeaderSteps[3].orderNo}},[e.finishedOrder?r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h3",{staticClass:"headline font-weight-bold"},[e._v(" Thank you for choosing OTTR! ")]),r("p",{staticClass:"mt-4",staticStyle:{"max-width":"600px"}},[e._v(" You order "),r("strong",[e._v("#"+e._s(e.finishedOrder.number))]),e._v(" has been placed successfully and we've sent you an SMS with the tickets' details at the phone number provided in your account details. ")]),r("p",{staticClass:"mt-2",staticStyle:{"max-width":"600px"}},[e._v(" Please enjoy your ride, and let us now if there's anything else you need to know about our services by sending an e-mail to "),r("a",{attrs:{href:"mailto:ottr-contact@gmail.com"}},[e._v("ottr-contact@gmail.com")])]),r("p",[e._v(" Have a nice ride! ")])])],1):e._e()],1)],1)],1)],1):e._e()],1)},Ii=[],Fi={selectSeat:function(e){return n.a.patch(d.SERVER_URL+"/seat/"+e+"/selected/true").then((function(e){return e.data})).catch(this.throwServerError)},deselectSeat:function(e){return n.a.patch(d.SERVER_URL+"/seat/"+e+"/selected/false").then((function(e){return e.data})).catch(this.throwServerError)},preserveSeat:function(e){return n.a.patch(d.SERVER_URL+"/seat/"+e+"/preserve").then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Mi={getConfig:function(){return n.a.get(d.SERVER_URL+"/config").then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Bi={placeOrder:function(e){return n.a.post(d.SERVER_URL+"/order",e).then((function(e){return e.data})).catch(this.throwServerError)},getOrdersForUser:function(e){return n.a.get(d.SERVER_URL+"/order/user/"+e).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.carLayout.sheetWidth,height:e.carLayout.sheetHeight,align:"left"}},[a("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.carLayout.width,"row-height":e.carLayout.cellSize,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0,isResizable:!1,maxRows:e.carLayout.height},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return a("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[a("v-img",{class:{"hoverable-item":t.seatNumber&&!e.isReserved(t.type)&&!e.isReserving(t.type)},attrs:{src:r("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)},on:{click:function(r){return e.toggleSeat(t)}}},[t.seatNumber?a("div",{staticClass:"text elementContainer"},[a("p",{staticClass:"ma-0 pa-0 centeredText"},[a("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])],1)})),1)],1)},Gi=[],ji={name:"CarLayoutWithSelectableSeats",props:{carLayout:{type:Object,required:!0}},data:function(){return{gridMargin:d.LAYOUT.GRID_MARGIN}},computed:{gridMargins:function(){return[this.gridMargin,this.gridMargin]}},methods:{getPngNameFromElementType:function(e){return Br.getPngNameFromElementType(e)},toggleSeat:function(e){e.seatNumber&&(this.isReserved(e.type)||this.isReserving(e.type)||this.$emit("toggledSeat",e.seatNumber))},isReserved:function(e){return[d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT,d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT,d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP,d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN].includes(e)},isReserving:function(e){return[d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT,d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT,d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP,d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN].includes(e)}}},Hi=ji,Yi=(r("721d"),Object(v["a"])(Hi,Pi,Gi,!1,null,"49e4895e",null)),$i=Yi.exports;f()(Yi,{VImg:R["a"],VSheet:jr["a"]});var Ji=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",{staticClass:"mb-5",attrs:{"no-gutters":""}},[r("h2",{staticClass:"display-1 font-weight-medium"},[e._v(" Choose the passenger category ")])]),r("v-row",{attrs:{"no-gutters":""}},e._l(e.carsWithRequestedSeats,(function(t){return r("v-col",{key:t._id,attrs:{cols:"12",sm:"6",md:"4"}},[r("v-row",[r("v-col",[r("h3",{staticClass:"headline font-weight-medium"},[e._v(" Car "+e._s(t.number)+" "),r("em",[e._v("("+e._s(t.travelClass.name)+")")])]),e._l(e.requestedTicketsOfCar(t),(function(t){return r("v-row",{key:t.seat._id,attrs:{"no-gutters":"",align:"center"}},[r("p",{staticClass:"title font-weight-medium ml-5 mt-3"},[e._v(" Seat "+e._s(t.seat.number)+": ")]),r("v-select",{staticClass:"ml-3",staticStyle:{"max-width":"100px"},attrs:{items:e.travelerCategoriesSelectItems,"menu-props":"auto",rules:e.travelerCategoryRules},model:{value:t.passengerType,callback:function(r){e.$set(t,"passengerType",r)},expression:"ticket.passengerType"}})],1)}))],2)],1)],1)})),1),r("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.goToPreviousBookingStep}},[e._v(" Previous Step ")]),r("v-spacer"),r("v-btn",{attrs:{color:"primary",disabled:!e.isFormValid},on:{click:e.goToNextBookingStep}},[e._v(" Next Step ")])],1)],1)},zi=[],Wi={name:"PassengerTypesFormStep",props:{rideDistance:Number,availableCars:Array,tickets:Array},data:function(){return{selectedTickets:[],travelerCategories:[],travelerCategoriesSelectItems:[],travelerCategoryService:W.getCrudServiceForResource("traveler-category"),travelerCategoryRules:[function(e){return!!e||"Passenger category is required"}]}},computed:{carsWithRequestedSeats:function(){var e=this.selectedTickets.map((function(e){return e.seat._id}));return this.availableCars.filter((function(t){var r=t.seats.map((function(e){return e._id})),a=r.filter((function(t){return e.includes(t)}));return a.length>0}))},isFormValid:function(){var e=this.selectedTickets.map((function(e){return e.passengerType}));return e&&!e.includes(null)}},watch:{selectedTickets:{handler:function(e){JSON.stringify(e)!==JSON.stringify(this.tickets)&&this.$emit("changedTickets",e)},deep:!0},tickets:{handler:function(e){this.selectedTickets=JSON.parse(JSON.stringify(e))},deep:!0}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedTickets=JSON.parse(JSON.stringify(this.tickets)),e.next=3,this.travelerCategoryService.index();case 3:this.travelerCategories=e.sent,this.travelerCategories.forEach((function(e){t.travelerCategoriesSelectItems.push({value:e,text:e.name})}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{requestedTicketsOfCar:function(e){var t=e.seats.map((function(e){return e._id}));return this.selectedTickets.filter((function(e){return t.includes(e.seat._id)}))},goToNextBookingStep:function(){this.$emit("nextBookingStep")},goToPreviousBookingStep:function(){this.$emit("previousBookingStep")}}},qi=Wi,Ki=Object(v["a"])(qi,Ji,zi,!1,null,"67963965",null),Qi=Ki.exports;f()(Ki,{VBtn:y["a"],VCol:E["a"],VRow:V["a"],VSelect:na["a"],VSpacer:I["a"]});var Xi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",{staticClass:"mb-5",attrs:{"no-gutters":""}},[r("h2",{staticClass:"display-1 font-weight-medium"},[e._v(" "+e._s(e.title)+" ")])]),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"px-2"},e._l(e.tickets,(function(t){return r("v-card",{key:t.seat._id,staticClass:"mb-4 elevation-3"},[t.seat&&t.passengerType?r("v-card-text",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("h1",{staticClass:"headline font-weight-bold"},[e._v(" Car "+e._s(e.carForSeatId(t.seat._id).number)+" Seat "+e._s(t.seat.number)+" ")]),r("h3",{staticClass:"body-2 font-weight-bold"},[e._v(" "+e._s(e.carForSeatId(t.seat._id).travelClass.name)+" ")]),r("h2",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" "+e._s(t.passengerType.name)+" "+e._s(e.discountText(t.passengerType.discount))+" ")])])],1)],1),e.$vuetify.breakpoint.smAndUp?r("v-spacer"):e._e(),r("v-col",[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h1",{staticClass:"headline font-weight-bold"},[e._v(" "+e._s(t.price.toFixed(2))+" USD ")])])],1)],1)],1)],1)],1):e._e()],1)})),1)],1),r("v-divider"),r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h1",{staticClass:"headline font-weight-bold mt-2 mr-5"},[e._v(" Total: "+e._s(e.totalPrice.toFixed(2))+" USD ")])])],1)],1),r("v-row",{staticClass:"mt-7",attrs:{"no-gutters":"",align:"center"}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.goToPreviousBookingStep}},[e._v(" Previous Step ")]),r("v-spacer"),0===e.totalPrice?r("v-btn",{staticClass:"text-capitalize pl-4 pr-4",attrs:{color:"primary",outlined:""},on:{click:e.onPaymentCompleted}},[r("v-icon",{staticClass:"mr-2 pt-0",attrs:{small:""}},[e._v("mdi-send")]),e._v(" Finish Order ")],1):e._e(),e.totalPrice>0?r("PayPal",{staticStyle:{width:"200px"},attrs:{amount:e.totalPrice.toFixed(2),items:e.paypalItems,currency:"USD",client:e.paypalProps.paypalCredentials,env:"sandbox","button-style":e.paypalProps.paypalButtonStyle},on:{"payment-completed":e.onPaymentCompleted,"payment-cancelled":e.onPaymentCancelled}}):e._e()],1)],1)},Zi=[],en=(r("13d5"),r("afb1")),tn={name:"ConfirmationBookingStep",components:{PayPal:en["a"]},props:{paypalProps:Object,availableCars:Array,ride:Object,departureStation:Object,destinationStation:Object,departureTimeText:String,arrivalTimeText:String,rideDate:String,tickets:Array},data:function(){return{}},computed:{title:function(){return 1===this.tickets.length?"This is your requested ticket":"These are your requested tickets"},totalPrice:function(){return this.tickets.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0)},paypalItems:function(){var e="Tickets for ride: "+this.departureStation.name+" ("+this.departureTimeText+") - "+this.destinationStation.name+" ("+this.arrivalTimeText+") with departure on "+this.rideDate;return[{name:"OTTR Order",description:e,quantity:"1",price:this.totalPrice,currency:"USD"}]}},methods:{goToNextBookingStep:function(){this.$emit("nextBookingStep")},goToPreviousBookingStep:function(){this.$emit("previousBookingStep")},carForSeatId:function(e){var t=this.availableCars.find((function(t){var r=t.seats.map((function(e){return e._id}));return r.includes(e)}));return t||null},discountText:function(e){return e?"("+e+"% discount)":""},onPaymentCompleted:function(e){console.log("Payment Completed."),this.$emit("paymentCompleted")},onPaymentCancelled:function(e){console.log("Payment Canceled.")}}},rn=tn,an=Object(v["a"])(rn,Xi,Zi,!1,null,"3dbf4158",null),nn=an.exports;f()(an,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCol:E["a"],VDivider:qe["a"],VIcon:x["a"],VRow:V["a"],VSpacer:I["a"]});var sn=r("72bf"),on=r("b9b9"),ln={name:"RideBookingPage",components:{ConfirmationBookingStep:nn,PassengerTypesFormStep:Qi,CarLayoutWithSelectableSeats:$i,GrayContainer:gt},data:function(){return{ride:null,detailsFromQuery:null,departureStation:null,destinationStation:null,rideDateString:"",rideNotFound:!1,rideFound:!1,departureTime:null,arrivalTime:null,departureTimeText:"",arrivalTimeText:"",currentStepperStep:1,requestedTickets:[],availableCars:[],currentDisplayedCarIndex:0,currentDisplayedCarLayout:null,toggleSeatsLock:!1,selectedSeatsTimers:{},distance:0,config:null,kmPrice:0,finishedOrder:null,waitingResponseFromServer:!1,paypalData:{paypalCredentials:{sandbox:"AVkWHFnXdZqeisrLgPWwUDeG7xGXQ-ONQjEL_01-LMBJAm0m9QuDO4a2CXLar3Kh1gWiYBq9k4cAGa4G",production:""},paypalButtonStyle:{label:"paypal",size:"responsive",shape:"rect",color:"silver",tagline:!1},items:[]},formHeaderSteps:[{orderNo:1,title:"Pick Your Seats"},{orderNo:2,title:"Passenger Types"},{orderNo:3,title:"Confirmation"},{orderNo:4,title:"Finished"}]}},computed:{pageTitle:function(){if(!this.departureStation||!this.destinationStation||!this.rideDateString)return"";var e="";return e+='<em style="color: darkblue">'+this.departureStation.name+"</em> ",e+="("+this.departureTimeText+") ",e+='<i class="fa fa-long-arrow-right"></i> ',e+='<em style="color: darkblue">'+this.destinationStation.name+"</em> ",e+="("+this.arrivalTimeText+") ",e},seatsNotPicked:function(){return 0===this.requestedTickets.length},availableCarsExist:function(){return this.availableCars.length>0}},watch:{"$vuetify.breakpoint.smAndDown":{handler:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.availableCars.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.updateAvailableCarsAndCurrentDisplayedCarLayout();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=sn.parse("?"+this.$route.params.details),![t.from,t.to,t.date,t.departureTime,t.arrivalTime].includes(void 0)){e.next=5;break}return e.next=5,this.$router.push({name:"pageNotFound"});case 5:return e.next=7,hi.getStationByCode(t.from);case 7:return this.departureStation=e.sent,e.next=10,hi.getStationByCode(t.to);case 10:return this.destinationStation=e.sent,this.rideDateString=on(new Date(t.date),"dd mmmm yyyy"),this.departureTime=new Date(2e3,0,1),r=t.departureTime.substr(0,2),a=t.departureTime.substr(3,2),this.departureTime.setHours(r,a,0,0),this.departureTimeText=on(this.departureTime,"HH:MM"),this.arrivalTime=new Date(2e3,0,1),r=t.arrivalTime.substr(0,2),a=t.arrivalTime.substr(3,2),this.arrivalTime.setHours(r,a,0,0),this.arrivalTimeText=on(this.arrivalTime,"HH:MM"),this.detailsFromQuery={sourceId:this.departureStation._id,destinationId:this.destinationStation._id,date:new Date(t.date).getTime(),departureTime:this.departureTime.getTime(),arrivalTime:this.arrivalTime.getTime()},e.next=25,vi.getRideByDetails(this.detailsFromQuery);case 25:if(this.ride=e.sent,this.rideNotFound=null===this.ride,this.rideFound=null!==this.ride,!this.rideNotFound){e.next=30;break}return e.abrupt("return");case 30:return e.next=32,this.updateAvailableCarsAndCurrentDisplayedCarLayout();case 32:return i=this.ride.routeStations.find((function(e){return e.station._id===s.departureStation._id})),n=this.ride.routeStations.find((function(e){return e.station._id===s.destinationStation._id})),this.distance=n.distance-i.distance,e.next=37,Mi.getConfig();case 37:this.config=e.sent,this.kmPrice=this.config.kmPrice,e.next=47;break;case 41:e.prev=41,e.t0=e["catch"](0),this.rideNotFound=!0,this.rideFound=!1,console.error(e.t0),this.$emit("serverError",e.t0.response.data.err.message);case 47:case"end":return e.stop()}}),e,this,[[0,41]])})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){for(var e in this.selectedSeatsTimers)clearInterval(this.selectedSeatsTimers[e]);this.selectedSeatsTimers={}},methods:{decrementAvailableCarIfPossible:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.currentDisplayedCarIndex){e.next=2;break}return e.abrupt("return");case 2:return this.currentDisplayedCarIndex--,e.next=5,this.updateAvailableCarsAndCurrentDisplayedCarLayout();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),incrementAvailableCarIfPossible:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentDisplayedCarIndex!==this.availableCars.length-1){e.next=2;break}return e.abrupt("return");case 2:return this.currentDisplayedCarIndex++,e.next=5,this.updateAvailableCarsAndCurrentDisplayedCarLayout();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleSelectedSeat:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.toggleSeatsLock){e.next=2;break}return e.abrupt("return");case 2:if(this.toggleSeatsLock=!0,r=this.availableCars[this.currentDisplayedCarIndex].seats.find((function(e){return e.number===t})),e.prev=4,this.waitingResponseFromServer=!0,r.selected){e.next=14;break}return e.next=9,Fi.selectSeat(r._id);case 9:this.selectedSeatsTimers[r._id]=setInterval(Fi.preserveSeat,d.SEAT_SELECTION_REFRESH_TIMEOUT,r._id),this.requestedTickets.push({seat:r,car:JSON.parse(JSON.stringify(this.availableCars[this.currentDisplayedCarIndex])),passengerType:null,price:0}),this.requestedTickets.sort((function(e,t){return e.seat.number-t.seat.number})),e.next=21;break;case 14:if(r.selectingUser!==this.$store.getters.getUser._id){e.next=21;break}return clearInterval(this.selectedSeatsTimers[r._id]),delete this.selectedSeatsTimers[r._id],a=this.requestedTickets.findIndex((function(e){return e.seat._id===r._id})),this.requestedTickets.splice(a,1),e.next=21,Fi.deselectSeat(r._id);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](4),console.error(e.t0),this.$emit("serverError",e.t0.response.data.err.message);case 27:return e.next=29,this.updateAvailableCarsAndCurrentDisplayedCarLayout();case 29:this.waitingResponseFromServer=!1,this.toggleSeatsLock=!1;case 31:case"end":return e.stop()}}),e,this,[[4,23]])})));function t(t){return e.apply(this,arguments)}return t}(),updateAvailableCarsAndCurrentDisplayedCarLayout:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.waitingResponseFromServer=!0,e.next=3,vi.getRideByDetails(this.detailsFromQuery);case 3:this.ride=e.sent,this.availableCars=vi.getCarsContainingSourceDestination(this.ride,this.departureStation._id,this.destinationStation._id),t=JSON.parse(JSON.stringify(this.availableCars[this.currentDisplayedCarIndex].carLayout)),t=Br.transformFromMongo2FrontendModel(t),this.$vuetify.breakpoint.smAndDown&&(t=Br.rotateCarLayout(t)),r=JSON.parse(JSON.stringify(this.availableCars[this.currentDisplayedCarIndex])),r.carLayout=t,a=this.ride.routeStations.find((function(e){return e.station._id===n.departureStation._id})),i=this.ride.routeStations.find((function(e){return e.station._id===n.destinationStation._id})),this.currentDisplayedCarLayout=Br.fillCarLayoutWithColorfulSeats(r,a,i,this.$store.getters.getUser),this.waitingResponseFromServer=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onChangeTickets:function(e){var t=this;this.requestedTickets=JSON.parse(JSON.stringify(e)),this.requestedTickets.forEach((function(e){e.passengerType&&(e.price=t.kmPrice*t.distance*(1-e.passengerType.discount/100),e.price*=1-e.car.travelClass.discount/100)}))},onNextBookingStep:function(){this.currentStepperStep++},onPreviousBookingStep:function(){this.currentStepperStep--},onPaymentCompleted:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t={rideId:this.ride._id,departureStationId:this.departureStation._id,arrivalStationId:this.destinationStation._id,tickets:[]},r=!0,a=!1,i=void 0,e.prev=4,n=this.requestedTickets[Symbol.iterator]();!(r=(s=n.next()).done);r=!0)o=s.value,t.tickets.push({seatId:o.seat._id,travelerCategoryId:o.passengerType._id});e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](4),a=!0,i=e.t0;case 12:e.prev=12,e.prev=13,r||null==n.return||n.return();case 15:if(e.prev=15,!a){e.next=18;break}throw i;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.prev=20,this.waitingResponseFromServer=!0,e.next=24,Bi.placeOrder(t);case 24:for(l in this.finishedOrder=e.sent,this.currentStepperStep++,this.selectedSeatsTimers)clearInterval(this.selectedSeatsTimers[l]);return this.selectedSeatsTimers={},e.next=30,this.sendSms();case 30:e.next=36;break;case 32:e.prev=32,e.t1=e["catch"](20),console.error(e.t1),this.$emit("serverError",e.t1.response.data.err.message);case 36:this.waitingResponseFromServer=!1;case 37:case"end":return e.stop()}}),e,this,[[4,8,12,20],[13,,15,19],[20,32]])})));function t(){return e.apply(this,arguments)}return t}(),sendSms:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s,o,l,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t="Your order #"+this.finishedOrder.number+" for the train "+this.ride.route.train.trainCategory.code+"-"+this.ride.route.train.number+" with departure's ride on "+this.rideDateString+", "+this.departureStation.name+" ("+this.departureTimeText+") - "+this.destinationStation.name+" ("+this.arrivalTimeText+") contains the following reserved seats:\n",r=Object(ma["a"])(new Set(this.requestedTickets.map((function(e){return e.car.number})))),a=!0,i=!1,n=void 0,e.prev=5,s=function(){var e=l.value,r=c.availableCars.find((function(t){return t.number===e}));t+="- Car "+r.number+", ";var a=r.seats.map((function(e){return e._id})),i=!0,n=!1,s=!0,o=!1,u=void 0;try{for(var d,m=c.requestedTickets[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var p=d.value;a.includes(p.seat._id)&&(n&&(i=!1),n=!0)}}catch(A){o=!0,u=A}finally{try{s||null==m.return||m.return()}finally{if(o)throw u}}t+=i?"Seat ":"Seats ",n=!1;var v=!0,h=!1,f=void 0;try{for(var g,S=c.requestedTickets[Symbol.iterator]();!(v=(g=S.next()).done);v=!0){var y=g.value;a.includes(y.seat._id)&&(t+=n?", ":"",t+=y.seat.number,n=!0)}}catch(A){h=!0,f=A}finally{try{v||null==S.return||S.return()}finally{if(h)throw f}}t+="\n"},o=r[Symbol.iterator]();!(a=(l=o.next()).done);a=!0)s();e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](5),i=!0,n=e.t0;case 14:e.prev=14,e.prev=15,a||null==o.return||o.return();case 17:if(e.prev=17,!i){e.next=20;break}throw n;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return t+="\nHave a Safe Journey,\nThe OTTR Team\n.\n.",e.next=25,$e.sendSms(t);case 25:case"end":return e.stop()}}),e,this,[[5,10,14,22],[15,,17,21]])})));function t(){return e.apply(this,arguments)}return t}()}},cn=ln,un=r("8e36"),dn=Object(v["a"])(cn,Vi,Ii,!1,null,"5b37a6fe",null),mn=dn.exports;f()(dn,{VBtn:y["a"],VCard:A["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:E["a"],VDivider:qe["a"],VIcon:x["a"],VProgressLinear:un["a"],VRow:V["a"],VSpacer:I["a"],VStepper:Ti["a"],VStepperContent:wi["a"],VStepperHeader:Ci["a"],VStepperItems:Ci["b"],VStepperStep:xi["a"]});var pn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",[r("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("My Tickets")]),r("v-divider"),e.loadingOrders?r("v-progress-linear",{attrs:{indeterminate:"",color:"primary",height:"4"}}):e._e(),e.myOrders.length||e.loadingOrders?r("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[r("v-col",{attrs:{cols:"12"}},e._l(e.myOrders,(function(t){return r("v-card",{key:t.number,staticClass:"mb-4 elevation-3"},[r("v-card-title",{staticClass:"py-2"},[r("h2",{staticClass:"title font-weight-bold"},[e._v("Order #"+e._s(t.number))]),r("v-spacer"),r("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.price.toFixed(2))+" USD")])],1),r("v-divider"),r("v-card-text",{staticClass:"mb-0 pb-0"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Departure ")]),r("h1",{staticClass:"display-1 font-weight-bold"},[e._v(" "+e._s(t.departureStation)+" ")]),r("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.departureDateText)+" ")])])],1):r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Departure ")]),r("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.departureStation)+" - "+e._s(t.departureDateText)+" ")])])],1)],1),r("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("h1",{staticClass:"headline font-weight-bold"},[e._v("Train "+e._s(t.trainName)+" ")])]),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("h1",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.distance)+" Km, "+e._s(t.spentTime)+" ")])]),r("v-spacer"),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-btn",{attrs:{icon:"",color:"accent"},on:{click:function(r){return e.toggleVisibilityTicketsForOrder(t)}}},[r("v-icon",[e._v(e._s(t.showTickets?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1):r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Arrival ")]),r("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.arrivalStation)+" - "+e._s(t.arrivalDateText)+" ")])])],1)],1),r("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("v-col",{attrs:{cols:"auto"}},[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Arrival ")])]),r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h1",{staticClass:"display-1 font-weight-bold"},[e._v(" "+e._s(t.arrivalStation)+" ")])]),r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.arrivalDateText))])])],1)],1):r("v-row",{attrs:{justify:"start","no-gutters":""}},[r("v-col",[r("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Ride Details ")]),r("v-row",{attrs:{"no-gutters":""}},[r("h2",{staticClass:"title font-weight-bold"},[e._v(" Train "+e._s(t.trainName)+" ")]),r("v-spacer"),r("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.distance)+" Km, "+e._s(t.spentTime))])],1),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-btn",{attrs:{icon:"",color:"accent"},on:{click:function(r){return e.toggleVisibilityTicketsForOrder(t)}}},[r("v-icon",[e._v(e._s(t.showTickets?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1)],1)],1),r("v-expand-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showTickets,expression:"order.showTickets"}]},[r("v-divider"),r("v-card-text",[r("v-row",e._l(t.tickets,(function(t){return r("v-col",{key:t._id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{staticStyle:{"border-left":"3px solid orange"},attrs:{elevation:"3",color:"#F4F4F4"}},[r("v-card-title",{staticClass:"pb-2"},[r("h1",{staticClass:"headline font-weight-bold"},[e._v(" Car "+e._s(t.car.number)+" - Seat "+e._s(t.seat.number)+" ")])]),r("v-card-text",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.passengerType.name)+" ")]),r("h3",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" "+e._s(t.car.travelClass.name)+" ")])]),r("v-col",[r("v-row",{staticClass:"fill-height",attrs:{justify:"end","no-gutters":"",align:"center"}},[r("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.price.toFixed(2))+" USD ")])])],1)],1)],1)],1)],1)})),1)],1)],1)])],1)],1)})),1)],1):r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("v-row",{attrs:{justify:"center"}},[e._v(" No Tickets Found... ")])],1),r("v-card-subtitle",{staticClass:"pt-2 pb-5"},[r("v-row",{attrs:{justify:"center"}},[e._v(" Looks like you haven't placed any order so far. "),r("br"),e._v(" You can book your seat anytime from the Home page! ")])],1)],1)],1)],1)],1)},vn=[],hn=r("b9b9"),fn={name:"MyTickets",components:{GrayContainer:gt},data:function(){return{myOrders:[],loadingOrders:!0}},created:function(){var e=Object(z["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Bi.getOrdersForUser(this.$store.getters.getUser._id);case 2:this.myOrders=e.sent,r=[],this.myOrders.forEach((function(e){return r.push(e)})),r.forEach((function(e){e.showTickets=!1,e.departureStation=e.tickets[0].departureStation.station.name,e.arrivalStation=e.tickets[0].arrivalStation.station.name;var t=e.tickets[0].departureStation.orderNo-1,r=e.tickets[0].arrivalStation.orderNo-1;e.departureDateText=hn(e.tickets[0].ride.departureDates[t],"dd mmmm yyyy (HH:MM)"),e.arrivalDateText=hn(e.tickets[0].ride.arrivalDates[r],"dd mmmm yyyy (HH:MM)"),e.distance=e.tickets[0].arrivalStation.distance-e.tickets[0].departureStation.distance;var a=new Date(e.tickets[0].ride.departureDates[t]),i=new Date(e.tickets[0].ride.arrivalDates[r]),n=i-a,s=Number.parseInt(n/1e3/60/60),o=Number.parseInt(n/1e3/60);e.spentTime=s>0&&o%60>0?s+" h "+o%60+" min":s>0&&!(o%60)?s+" h":!s&&o%60>0?o%60+" min":"IMMEDIATELY",e.trainName=e.tickets[0].train.trainCategory.code+"-"+e.tickets[0].train.number})),r.sort((function(e,t){return t.number-e.number})),(t=this.myOrders).splice.apply(t,[0,this.myOrders.length].concat(r)),this.loadingOrders=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{toggleVisibilityTicketsForOrder:function(e){var t,r=this.myOrders.findIndex((function(t){return t.number===e.number}));if(e.showTickets)return e.showTickets=!1,void this.myOrders.splice(r,1,e);var a=[];this.myOrders.forEach((function(e){return a.push(e)})),a.forEach((function(e){return e.showTickets=!1})),(t=this.myOrders).splice.apply(t,[0,this.myOrders.length].concat(a)),e.showTickets=!0,this.myOrders.splice(r,1,e)}}},gn=fn,Sn=Object(v["a"])(gn,pn,vn,!1,null,"4c578e39",null),yn=Sn.exports;f()(Sn,{VBtn:y["a"],VCard:A["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VCol:E["a"],VDivider:qe["a"],VExpandTransition:Ei["a"],VIcon:x["a"],VProgressLinear:un["a"],VRow:V["a"],VSpacer:I["a"]}),a["default"].use(P["a"]);var An=[{path:"/login",name:"login",component:we},{path:"/register",name:"register",component:De},{path:"/my-account",name:"my-account",component:Qe,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/my-tickets",name:"my-tickets",component:yn,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/dashboard",name:"dashboard",component:at,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes",name:"routes",component:Lt,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/create",name:"routesCreate",component:Ya,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/:routeName",name:"routesEdit",component:Ya,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/:routeName/rides",name:"rides",component:di,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts",name:"carLayouts",component:Xr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts/create",name:"carLayoutsForm",component:oa,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts/edit/:carLayoutName",name:"carLayoutsEdit",component:oa,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/miscellaneous",name:"miscellaneous",component:pr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/users-management/students",name:"students",component:Cr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/",name:"home",component:fe},{path:"/ride-search/:filters",name:"rideSearchResults",component:Ui},{path:"/book-ride/:details",name:"rideBooking",component:mn,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/copyrights",name:"copyrights",component:ct},{path:"*",name:"pageNotFound",component:Ie}],bn=new P["a"]({mode:"history",base:"/",routes:An});bn.beforeEach((function(e,t,r){var a=Y.getters.getUser.role;Y.getters.isLoggedIn&&["login","register"].includes(e.matched[0].name)?r({path:"/my-account"}):e.matched.every((function(e){return!e.meta.requiredAuthGroup}))?r():Y.getters.isLoggedIn&&e.matched[0].meta.requiredAuthGroup.includes(a)?r():r({path:"/login"})}));var En=bn,Tn=r("9670"),wn=r("f309"),Cn={home:"mdi-home"},xn={icons:{iconfont:"mdi",values:Cn},theme:{themes:{light:{primary:"#1515CA",secondary:"#FFF",accent:"#F28110",error:"#DC0028",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",anchor:"#0000db"}}}};a["default"].component("v-text-field",ee["a"]),a["default"].component("v-select",na["a"]),a["default"].use(wn["a"]);var Rn=new wn["a"](xn);a["default"].config.productionTip=!1,n.a.defaults.headers.common["Authorization"]="Bearer ".concat(Y.state.token),a["default"].use(Tn["a"],{vuetify:Rn}),new a["default"]({router:En,store:Y,vuetify:Rn,render:function(e){return e(B)}}).$mount("#app")},"5b44":function(e,t,r){},"5bd7":function(e,t,r){},"679b":function(e,t,r){},"70fd":function(e,t,r){"use strict";var a=r("cd26"),i=r.n(a);i.a},"721d":function(e,t,r){"use strict";var a=r("679b"),i=r.n(a);i.a},7629:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAABRSURBVEhL7cwxCoAwEEXB3P8EluIpUmlnoUEsA5tgLYl3EDv59ZYPpp7QbL/z6q6XFGwecxzclWWi/qMW1IJaUAtqQS2oBbX46l6PZpu75zpftUqwrgXlL9IAAAAASUVORK5CYII="},"79ca":function(e,t,r){"use strict";var a=r("5bd7"),i=r.n(a);i.a},"7a83":function(e,t,r){e.exports=r.p+"img/carousel-img-4.b7d6a44d.png"},"7cc9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFCsDEgo7XwAAAbNJREFUSMft1sFK40Acx/HvrElaGyKLsra0xogIVkEq1JuHXsRePHjwAbwoPoUefQdfR/Cg9CjWglXK4qqLIZjatDRmPHgRbRS7bXNY/6fhzw8+zDAz/EWlUpFnhQK9qjHXZX5nB2V3V3yU+0EfKuE4n2Z6DrdUFe34mFqtJh3HmQ7LKW8bmu9jeB6xdrsrWPN9KJeZ39yEePzCW1jgfGsLy7KEqqrhcNq2mQ4C9FehL9XQEKTTL+tmk+GTExZPTylvb8tfxaKIxWKd4UQQoCeTMDHRu/NvNMgeHFCyLDmby4m+Xa4wPL+/j+u6DBYGuLvj+upKDh4GxkolIoGnjo6igbm5iQiu1yOC+/lXf8Pf8H8Gp1LRwE42Gw18vbQUAZxI8DQ3N3j499oapmmKjqNPAPDwALbdvTA6+r43Pk5zfZ2fitJ55vqr6yiPj8QvL7t+Jsl6HSYnXxojI9wWCtgbG5iplAidMu8Ng3vD6Hqzmu9TbDRwl5f5k8vRyufJZDLC1LSP5+p/LcPzYGWFp709kVFVpJSD+0CcmRkURQlFAUS1WpWtw8OeoW1dZ2p1VXyWewYn9ICrfKPHIwAAAABJRU5ErkJggg=="},"82d5":function(e,t,r){},"8a23":function(e,t,r){},"8a7c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiEeiGdrYgAAAZFJREFUSMftlr9OwlAUh7+LkLZAE8IgaowhLtbNxMTBN/BFfAMGV56C6Cs4MDgZF3cZDIMM2kgasOFPQiqt2BbrQGJAsIMWdegZ7z253z0nv3PvT1iWxV9E8qsN3/cxDCNYubtj4+aGXKMBphl+WjYLa2s8Hh7S399no1gUqqouTBWLKjZNM5CrVTYvLsBxvl/W6iq1kxOKmiYkSQoHG4YR7JZK0OlE09N0msbxMYWjI5FKpT6WE9M5ruuSPz+PDgrgOGinpzSbzWB6eQbcarWCwvV19EpyHHbOzlgIFkIg1WqwJJUr9TqDwWB7Dux5Huu3t8ubn9EIy7IeZsTll8tB7v4erq4gnYatrWihvR6026BpuAcHOLkcycfLy8CqVAB4VhT2ul0K2Szk89GB223q4zE9w0DS9ckDkrJt+lND/rakTrvJJENZZijL86r+zYjBMTgGx+AY/P/Bc/Z2NLGZP3OXn8L2PF4zmXDwUyaDb9skXl6is1yJBM+KEg7uq+rM/xyLK6oQuq6Pfd//9Qu8AzNfl7Oy+pOMAAAAAElFTkSuQmCC"},"8c2f":function(e,t,r){e.exports=r.p+"img/ottr-icon.b2123aad.png"},"8f8e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiAf5ntqtQAAAWxJREFUSMft1U8vA0EYx/HvbLbTKjPaAxGl1ZREgsQLcHR09RacJCKu3kXfg1fBa8ABPdSm0pBKxGGqstpNx6ER6l9Fdutgn9vMYT7zzPwmIzzPs0EQMOxyJyYPODvfHzrs8Ef1Z7D7fkJKGEmDE+KWnnzwfeh2v4GVhmJxBNChwa3WLZdVaLe/gVMpgCmaZi40WOl7HKfzz8MVwzEcwzEcwz//j31fI2VvEATh/sN9HTrguq/rC2MMo2rXwh2WQyBN0yyHiirtATd0OivIxBIge3Cv24Dx7J41phbZ8V7Xy+TzedF3x4lEgqCTiwxVuo3WuvQhXNZaKhebKB0NLJgnk8l4n6Y6l8sJwWIE3QacHu98/ZyklFTOt9E6FSr6YDYoFAqi7wRewvW2Go2GLS2UsZzQNO6vUa1TXNW2UGNrIplMMhB+SXm9Xrczs0dksmdAA2MeB3TXRTAFTONV10mnV4VS6vM7/wqOup4BthBwJZ+Xj90AAAAASUVORK5CYII="},"91cf":function(e,t,r){e.exports=r.p+"img/woman-traveling.744ae1d3.png"},"9b19":function(e,t,r){e.exports=r.p+"img/logo.63a7d78d.svg"},"9e14":function(e,t,r){e.exports=r.p+"img/carousel-img-5-2.ab554cdc.png"},a14c:function(e,t,r){"use strict";var a=r("cb6d"),i=r.n(a);i.a},a1e1:function(e,t,r){},a29e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSY72fQ13gAAAW9JREFUSMftlr9Lw0AUx78XL4kmTZsY2oKODvoviDgI+ndUF8FBsncLhJL/w01cHKTWH4ijOOjkZlzVodbSa5c05xBFS1qLeGmXfOFxcMvnvbvv4z3iOA6PogiTFjk8MnnjtDVxsIQpaWpgmrigcUgCUwrDOH5aKQFWFKBYik9Rem8BzeYYMKVALgdEfV0YWJ1lmbkycAbOwBk4A/9hHneZAUrj1SeKxM7hgQql7wAA0m63cX5Z4L0eRxDEc5jO6GKphKHTASyTYmGxD0n6BMdbQoira5s/BVpqzxs8VuD7Phn4Y1mWQamSGjRfYFBVdSlhLs456ic7mLdZKmDLInBdNxjqas/ziG0T4VDTYrg42x3dToqioFHfQ6nMhEK1uSJqtRr5tY993ye3N/tYXunCtP6XQKnM0HpbxdbmA5FledDoX65O7sIhqtUqX1s/hqY9gzGO1xd9bHW6TpDPA/d3G9iuHBDDMIZ32Chw2voAE2FwPG4C1hQAAAAASUVORK5CYII="},ab68:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiEJC7TupQAAAYJJREFUSMftlstKI1EQhr8TupMQPY2uFEdhLgzEG+repUsfY3ApDPgiOr7FbGc5s5sHcOMgJDaGNtKgi1DtJZ5u+8xC0YS0WUhHXXQt6xT1nSr+okqJCG9hznMPSZIQBIGdnfvDxOQhECJyPTSZ9lIU08AMfnODWm1Vaa0zY1VWxWEY2i9ff2A5IBLnxVV5XpXWyRZ6fF1VKpXh4CAIbH1hB5FuLi3VXsKlbHKXfFOu6z76S71BxhjqC/u5QQEicRj3ftFqtWyvvw/cbret5Sh3IUXisLK2SyZYKUV9/ifRiERuadLpdD4PgOM4xnHbIxufSMqIyHGfuMb0dwsXWH4DNSJZyhWqPR84I46XKbuLQBl1frFng9Pth9mFD7MwNfWJSD7mCP7Lv8MYY6D00GOnWhWMeQpK09G0Ok3vC8tU9WtaAS7ABbgAF+D3Dx44IbtdgBDtXecGubqKB7aeM3gpQKNxQ6l0kxv4ttu/EjPBxtC3nwtx5WXK9/27JEle/QP/AZaMme+JtEdAAAAAAElFTkSuQmCC"},ac0b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPEBghjJayxQAAAV9JREFUSMft1rGKwkAQBuB/sjsJkkSCJCJIDBLfwNIn9jV8DtnGxhQqxKCFq3uVoqeR41i1MH+ZIh/MzjBDSimjtca7I5VSmE6nb4cdfCgfg+XvD0IIMDOIyBqitYbWGsaYetjzPCRJAs/zrMGbzQbr9RrH47EellIiCAK0Wi1r8H6/v6vg9zVXAzdwAzdwA/99HwshIIQAAJxOJ6t7+DpEBMdxLv+X4/GYyrI0u90OSikws9WVCABhGAIA4jhGr9eDEAJUluXlSpjNZqYoipeVdzKZYDAY0M0bMzN833/dm0qJdrud3zWXMQbdbtfqyXOdTqeDKIrUw67u9/sUx7F1lJmRZVn9OLmui+FwaLXkZzTLMnp63qZpSsxs5vM5lsslDofDv1Hf95HnOUajETHz7Xidu/rRLbxYLMxqtcJ2u0VVVaiq6inkui6CIEAYhoiiCGma0nmU7ua6Dn51fgBryGYdtfqZQAAAAABJRU5ErkJggg=="},af4b:function(e,t,r){e.exports=r.p+"img/carousel-img-5.b68a9992.png"},b1f2:function(e,t,r){e.exports=r.p+"img/bringing-people-together.43949a75.png"},b6b4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh82/BfY5QAAAY1JREFUSMft179qwkAcB/DvpUo0MRAc1EoJblWhUBA6CD6Ar+AD+AYOrj6F6Cs4ODiJUNwVKg46OAhBG/wDkjbRJrHppCBRhKgJFL/j/eHD3YXc74gsyziXcbNpehUF1wqdycBzbpBRKplyuYwlx10NTrTboE51EkJgGAb40Qi3iGXFmqZhMpmYdLeLx14PaLXw5fffFhZF0QzWanhpt4Hd2TMMXudz/NoENgA+WdZyVHtYkiQzUSgAs9nhTEFAOBCwvzRJgqEox2HDMOCr163oLsGgfVhVQa3XlmZqt8VPjQacDAUAD4MBoKrOw9FOB06HAgB+OHQHhiS5BLuQO3yH/yt8ye1zERyJuAOP02l34GUq5Q4cjcUIQiHnYY7j0C0WAYZxDN7XXLF4nAzzeTNeqRwWBYsFMJ3aBhRdh0pRp2GaphHOZslHMmk+V6vw9/vAZgNMp+hvt9A8HlvwD8seLY/JqSfMarXyyrKsJXM5vIsivn0+Z14SPM/rgiAQ7e0NtK47/8tUef4mH9cfd72OEZf2jM8AAAAASUVORK5CYII="},b92a:function(e,t,r){e.exports=r.p+"img/error-404-logo.f6db3394.png"},ba8e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSIu0EUUMQAAAYlJREFUSMft1z1Lw0AcBvDnYg2Yo60uOuiu6C5VcRCkWvwQ9Qt0L2mhX0IUuji4K46SOol01MHBF+jc1KE15qxJz5yD1ra0tRDzAtJnzR0/LvlzPCGGYWBUTs9WhEJf4VWur9KIjFqkXcZFuSzAuWculCkH0rCHhBBwztFsCviRvhPbto18Pi9Se8fg3EalAjiOz3A2mxU7qSOsJgSeHimACGSZIRZzj3MO2Db6PtUPnMvlRGL98BvsWjBBMb/AXJ/MNAG9OgTmnCO5e4CHezpws/NBXcOyzCANmCQJAFRVFbruzxANiwQAG5vnaNRp8LCiVBF0JABgTIQD13QaDhxGxvAY/qfw9AwLB6aUhAPHYiG96tubrXDg/fQJmZ1jwcPRaBQ1fS3QISPtQm9ZFrTSsnhrPveWAsJgmu4B6x1oNL4KX6dXZzowALRaLaiqKraTRdTrAsYLhckY9OrfKq7j9O7vg7tTKBQmLcuyF5eKuLvjnnbrX+F2LrS4KGle/8JkRl+Zkk+X6ic5baezqoahWQAAAABJRU5ErkJggg=="},bd32:function(e,t,r){e.exports=r.p+"img/carousel-img-3.4d148079.png"},c0d6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSYjypitiAAAAYpJREFUSMftls9KW0EUh79JbxK8Q2KyqIVqNz6FWlwUJCp9B9PHCDeBvIS00I2KT6BbcSXFpS7dmI2bXCW9aXqnaW7GmW7ERBL/IDfWxT0wmzOH+eZ3+A1nRKfT4X+Ec9+G1hrP8+zH5T1ct4lSlktfPnhYoaiQUpDPw+nJJ76Ud0UulxtbK8YprlartrS2ie9b2oF8tqqZd4pLf5Hyxr7IZrMPgyuVil1Y+vqouqdGoahwp96yWjoT6XT6Np8aLoqiiNX1b7FBAdqB5E/3Cs/z7HD+DrhWq9lWy8ZupHYgWSl9ZyxYCMH65y1+tuREXBwElnq9Pj8C7vf7aB1N7Pl0fkl6vd75HXMdHE7bbtfSaEAmA86bmFULRRhCseDwfvaaVArE9s4He3x8AYAxkM/D7ByY6/jgoVL4TdAaUjc9dlz5G60HRcZMptXGDNaIq18yEnACTsAJOAG/frAz+q2FMIRMRsUG6f19AjiKwG8O5mYcofXouB2reHg+J+aKzVw/jsrGnTIvfoF/X06XBD9WvuoAAAAASUVORK5CYII="},c86c:function(e,t,r){e.exports=r.p+"img/user-logo-man.a069724d.png"},cb6d:function(e,t,r){},cd26:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"},d12b:function(e,t,r){e.exports=r.p+"img/carousel-img-2.78ad6c19.png"},d4ae:function(e,t,r){"use strict";var a=r("e436"),i=r.n(a);i.a},d7f9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECEiGxtuxQAAAYtJREFUSMft182K4kAUhuG3YsVo4l9UYkAkKO4EN+4Fl16b1+VNCAbUjaiQgH9oDDWr2fR0uiGjcdF9lsWBhzoUh6/EYrFQs9mMZ1Uul2M6nTKZTMRXfRovqDiOv+15OqyUYrvdsl6vVRiGvaQ++fFACIGmaQghUsFCCA6HA/P5HCnlsl6v43kenucJXdeTYSkltVqNQqGQ+tblchmAx+PBbrcjCAKCIFDD4VAYhpEM27ZNpVJ52vijKGK1WmGaphoMBuJljysJXy6XHI9HMoUBzuczm81GZQ4DhGHIW+C3jBrgdDq9B77f7++BX7qrf+Ff+GfBpVLph8F/Q0KmsK7rNBqN7GHXdel0OuLT6KOU4na7cb1eUwPFYvGfM8uy6Pf7SCk/z1xRFLHf7wmCIHXKdByHarUKgGEYNJtNut0uruuKxJQZxzGXyyX1bYUQ2LZNq9XCsiwcx6Hdbot8Pv91rv7vxaBp9Ho9xuOx0HUdpVR2C8Q0TaSUiSiA8H1f+b7/1E/baDT69hvyBxkLdtt6xR7OAAAAAElFTkSuQmCC"},e436:function(e,t,r){},ebf9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAcSURBVChTYywqb/jPQARggtIEwahCvIBIhQwMAOV/Anze9NqYAAAAAElFTkSuQmCC"},efc8:function(e,t,r){},f57d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFCoHDHzOBwAAAXtJREFUSMft1rtqAkEYhuF3jefDsigRo2E1pLGRFEKKNLkJb0GvQUu9Ei/BwtJO7EwbTRAJCGYFtXBZTXRgU4SIOZiEsGqR/cppnp+Zb5iR+v2+KYRg33E+N5vcF4t7hx0cKAeDnR8XIrrOsWFYOtHc4WAYDrN0OrfDJ4bBmc8HsmwZbIxG6IsFk1BoO+wFiMUgHLYMDkyneFarf14uG7ZhG7ZhG/79e7wKBIjoOgC6z7ezSdxCEHx6Wr9S0mw2Q1QqptLrQaMBfj+oqrXqeAzDIaTTLC8vmSvKKwwghOCoXDZDrdbOtve2WkVVVendGbtcLh4vLnZ3qF4vsiyffyqXaZo8Z7OWfnk2s8hkUBSl/2WrE4mENLq+tl71+7nL57dfJ7fbzTSXg2jUUrRbKJBMJqXN5XW5NqNpmumt1Tit12E+/zsajXJTKpFKpyWPx8OP8FvLB4OBedTpEG+3Ubpd0LTvoWAQYjEerq6YZLPEUykptPGl/RW867wAtKJ5b85KowwAAAAASUVORK5CYII="},f584:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh425QzppAAAAYxJREFUSMft1z9Lw0AYBvDnjraU2DtiHSpai1CUWgV1d/QzODg4ugt+EdFVcHd11M1ZFKxIW0pDiQR1KBf7LzlyTq0Nba3Utln6jMkbftzlTfKGCCEwLC3nSkWjw+v+mo/3Q4SGFc2xE1V8uoTjjM1FXD8AHXSSEAIpJYBPTCI9K3YcB6ZpqszGNbSYCYVbSDlhuFKpqEz2AvrCK2wBoAEwrmE5WYPnjQY0m4At0HOrOrBlWSqTPYUQTV+BLbaQSJT/sTYLhUKjPyylRHrtvAf9wVdHZhmvg9JGz3Ha3mKFR0wzFACSK3ewRWj6sD6fw7RD2w0QCCxEPagVYwbP4Bk8HphxLxiYYDGorV4KBi4V94OBNW2HcB4NoLkYg1E+BuNyanDn689ie+RL5BXjN76hgPESgLeRgVrNRavPREW6/yRc14VhGGp79wwKRdgiAsbv8ZJzR54yPQ+QEr7r43reD3enWq2GhRBOev0IueeHsc7WcT0/+M2l67qbSqVIJLwJSif2HP+WyESa6xtlG5oG5juszwAAAABJRU5ErkJggg=="},f9d4:function(e,t,r){"use strict";var a=r("5b44"),i=r.n(a);i.a}});
//# sourceMappingURL=app.9ed1ec01.js.map