(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},i=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"005a":function(e,t,a){},"0307":function(e,t,a){e.exports=a.p+"img/ottr-logo.34402ede.png"},"034f":function(e,t,a){"use strict";var r=a("85ec"),n=a.n(r);n.a},"0718":function(e,t,a){e.exports=a.p+"img/student-in-train.1e699bda.png"},"089f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECA6EWzH0gAAAW5JREFUSMft1suKwjAYBeCTOlHEW9250YXmAXw5n82l4F58AbEUKURRkdYG2/yaWSlIFaHaFmY8yzbwkQvJYb7v41Vms5k5n8/4VPr9Pn5eDZpMJmY8HuOT8Gg0gvXsJ2MMRASlFLJIYsZxHMPzPLPZbBCGIZbLJS6XS7bwarUyjuNgu90iiiIAAOcczWYTxphUABEhiqLEVt1gKaWZz+cIw/BuQKvVQrlcTj2z4/GI9Xr9GCYiLBaLBHpNtVpNDWutwRhLfLeuSyylRJ6xAGC320FrnT8cBAHyjnU9AP8LLiJf+Av/Ufid1+ctuF6vFwM3Go1iYNu2i4G73S6r1WrFLPVgMADnPDf41rmEEEwpZVzXvSsFSqm33uvT6QQieg5XKhUMh0PWbreN67rY7/cgIgRBACll6pZpjHlYj+/qLeccQggmhMDhcOC+78fT6RSe5328Wz+9uWzb1r1ej3U6nYctMfMrs1QqZXK4fgExfrZjb8DfUAAAAABJRU5ErkJggg=="},1771:function(e,t,a){var r={"./bringing-people-together.png":"b1f2","./carousel-img-1.png":"3d7a","./carousel-img-2.png":"d12b","./carousel-img-3.png":"bd32","./carousel-img-4.png":"7a83","./carousel-img-5-2.png":"9e14","./carousel-img-5-full.png":"1978","./carousel-img-5.png":"af4b","./error-404-logo.png":"b92a","./logo.png":"cf05","./logo.svg":"9b19","./luggage-rack.png":"1999","./ottr-icon.png":"8c2f","./ottr-logo-blue.png":"3408","./ottr-logo.png":"0307","./reserved-seat-down.png":"f57d","./reserved-seat-left.png":"b6b4","./reserved-seat-right.png":"7cc9","./reserved-seat-up.png":"8a7c","./reserving-seat-down.png":"a29e","./reserving-seat-left.png":"ba8e","./reserving-seat-right.png":"2bbd","./reserving-seat-up.png":"c0d6","./seat-down.png":"ac0b","./seat-left.png":"089f","./seat-right.png":"d7f9","./seat-up.png":"3bd0","./selected-seat-down.png":"8f8e","./selected-seat-left.png":"f584","./selected-seat-right.png":"1dce","./selected-seat-up.png":"ab68","./student-in-train.png":"0718","./table.png":"7629","./user-logo-man.png":"c86c","./wall.png":"ebf9","./woman-traveling.png":"91cf"};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id="1771"},1978:function(e,t,a){e.exports=a.p+"img/carousel-img-5-full.545efe5d.png"},1999:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAIAAAC1JZyVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAOCSURBVEhL7VZJSBtRGO5kmyRO4pKYuITUBTdESxcMpBUj9NCCQiHowZMoepKCXrTgQRAP4nL2IiqIYA9SSnGroBZCtVJKKFUsVIwLFo0JNYkxe7/JDFpF0syAnvx4A/P/781887557/sfsbi4uby8ee8yCIKQSsVCoSAYDPn9oXA4zHZwB0VJm5vLia6u911dH9hcFEqlNDdXo9cng8zvDx4c/LFa98LhCNvNERkZSWtrbwRsFJ0BgBnk5WlbW593dLxsaalsb3/R1FSenCwXCJh+gh3NETQNHhaJBHK5RCoVpaUpS0oy9PqUtra3zc3jAwMfj47c4MMU0UuSInwH8yQniHAVFmobG59hElbrbmoqZTTm6nTJPT2vfL6gUilTqRI8Ht/U1Le6urKiovSVla2+vrlQiJuGNI1KRZlM+SUlmWKxQK2mSkt1SFZWFkQH0Dg8dFEUWVaWVVGRH4lECAIKhiJciFjRxGJhPLpDsThHXgEfoXngFml8vgDUD4X+vwdPTs7sdjdGcvoxAL0Ednedw8OWpaWf29t2uZycnv7O9J3D7fbv7TnHxlbm5tbX1w94mALtAr298xqNgiSFCNk0F2ByNpsDtsTGl8G4AE0zOvq5qqpUo6H4bT0oOTT06eTEe62SFzSTk18bGp5mZibxo3E6Tzs73x0fe7Cl2NQ/uKAZGFiAu8CSr2wI+FjUyuj7YJD+H9d+byAQ3Nj4DZNl48u4oLni0AxAUF39AD4EH4M9Y4HNzv6w2Y65rrGrDo33QjR4KJpMJi4uzoDfmEwFBkMOXM5sfpSXp8E6ZAagYXD8dkAvaJFISFESpVIukQhBhgwcDP5vt7tGRiw7O46EBLK29klWlsrl8jkcnuiDkDHkdvuQ8Xr9TCYGaJrsbFV9vdFsfqhQSJkPBBleDa2gO/4KQplMUlPzGD/gvL7BpFdXtyYmvsC8mUwM0KKlpCQYjTn376ugY3p6IppWq8SEUGNg3rhPTVUgRHHDPTMADSvTYMiGnsyLYoOmkUhEYOK6mjHtxEQZ6hMbxwSfjcIDdzQ8cEfDA7dIg/Ln9QaurRaxAU9zOE7ZICZoT9vfd46Pr+I8DmOO23NpT4OrWiy/2Dgm6HrT3T2NA7ROl0SSYkHcKsJSUYRwwg4Erj8FMGDLWn///ODgApu7AWi1ipmZ1wSOCi7XGZu7AcCR1WrqL5obW3tGIFgLAAAAAElFTkSuQmCC"},"1dce":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh0sM0NDHQAAAZFJREFUSMftlrFOG0EURc+MZuwVHjdJxK4wy8ZWlKAUgRRuqfgACipaSkBGSpWPiPIZ+Y8oRboohESRI+TIRUThgJMdjGTQDgV0rG3JXnYb32aaK533nt7MXNFut91Z/zlZqVSCtbVdLuL3YpxP8iAaTnRkDk4SGF59p9vtun6/3xjlU/cqkaDU7TmNpAStv7Ec7WHM9YngGV+/tIiiSGitR4M9D6KnUKnoGfpeAsBaBfzm1esWgg131jsU5XI5HVz2oFLxsXY1s/FbKzHmI4gXDrbEAy5XOvzR4w/EcUyuYIDYDpDyk8sdDLAYfKYQMPwpBuw4LQZsLUWNeg6eg+fgjFQ1pqiOg6LAS/mDjUk4PtrOHyxYJwxDkRp9kgTgP8Z0Z/gIVlKWaoGTXwcEgUrPXJcD6HQu8bzO1CnT9y3Wvrwbr0Swys8f+4RhIEamzOEQ/vZmuJ8SfH9A1TSARY6PdqjVaiIMS+Nz9axSCgSb/Dt/J7TW1OsuzwfkCUopnHNjClSKZvNthtASF/EbMcl1A0enY+jCkwFlAAAAAElFTkSuQmCC"},"21a9":function(e,t,a){"use strict";var r=a("a618"),n=a.n(r);n.a},"2bbd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSYJESNkXgAAAZlJREFUSMftlz1Lw1AUht97TRrTln5QaodulQ7iIkIpIlKKaDdx0p+gCBkL3brU0s3BSRd/gIg4SK3+BREXR90U2qI1DTXShlyHgCAkraRNMuiBw10O9+GeL95LJEliH+ohJmUcB6wXCNZWZTIsjsIB0/XRMdQJ6MvzFEqlEiuXy6lfgyk10jWOd941zKZPMDd/8Ni4CbNiscgGg8HPkpjVKBIBhGn7rw4GjVNRRCgKkMke4fbumC0utIggCNbgcATgeXFi6ZdlEYCKZjPLNjfuiWPNZQ1/gqIocBUMAO22iMt6gbkOBoBk8gGegLtdeAPu9Zg3YKPJPAA7uqv/wf/gvwWOx1VvwIEA8QYcCnmQ6nBYxdnpjvvgRIKgWq0SU+mj60C/D/h8qm0AY6JpU11fScitcOaaS9OAdgvovNkcEwrEZ9RvzRaNqojFCBr1PdRq+8RSZWqa4bbnkxpiMZ3+hN8PXJzvolKpkHzON1zejr0YKJBKAfncK+F5HstLzL0FIooEHMeBMWb9x6KUYmubTPTF2Yw88sIvdqRvryhWFK0AAAAASUVORK5CYII="},"32f8":function(e,t,a){},3408:function(e,t,a){e.exports=a.p+"img/ottr-logo-blue.839a6bce.png"},"34a2":function(e,t,a){"use strict";var r=a("7a8b"),n=a.n(r);n.a},"3bd0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECIM7OAwyQAAAW1JREFUSMftlk1uwjAQhd8UDEIQYMEiCxBS4QBcm1PkCFyABkURkoMAocREBMdxF1URP4ZFa2gXmeV45M8zevYzxXGMv4jqvYU8zxGGod5sNkiSBEIICCEeblar1dBqteA4DrrdLgaDATmOY6wlU8eccz2fz8E5h5Tyx101m02MRiOMx2Oq1+uPwWEY6tlshv1+b2WkjDEMh0NMJhNijJ3yb+dFx+MRi8XCGhQApJQIggBBEOjz/AV4uVzq9XptXUjfcCOYiLBarZBl2VNUvN1usdvt3m/AUkqrIzbdkjiOPy7E5XmeTtMUvu+DMYZOp2MVmqYpkiRBr9eD67qoVCogz/P0dDoFABRFgXa7jX6/j0ajYQ0cRRE451BKgYi+HhClFJRSpyKt9VNGrbVGURRmVb8ySnAJLsEluAT/f3DVZNhCiF/9Lq/jcDjcuN4NOMsyRFF08k1bv49zSzSCr/25FJetIN/3VZ7nLz/AJ7c8wSvd/iEeAAAAAElFTkSuQmCC"},"3d7a":function(e,t,a){e.exports=a.p+"img/carousel-img-1.3929535f.png"},4466:function(e,t,a){},4656:function(e,t,a){"use strict";var r=a("6817"),n=a.n(r);n.a},"52a5":function(e,t,a){"use strict";var r=a("4466"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("bc3a"),i=a.n(n),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"ottr-app"}},[r("v-dialog",{attrs:{width:"300"},on:{keydown:function(t){e.serverErrorDialog=!1}},model:{value:e.serverErrorDialog,callback:function(t){e.serverErrorDialog=t},expression:"serverErrorDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline mb-1"},[r("v-icon",{staticClass:"mr-2",attrs:{color:"error"}},[e._v("mdi-alert")]),r("strong",[e._v(e._s(e.serverErrorTitle))])],1),r("v-card-text",{staticClass:"body-1 py-0"},[e._v(" "+e._s(e.serverErrorMessage))]),r("v-card-actions",{staticClass:"pa-0 ma-0"},[r("v-spacer"),r("v-btn",{staticClass:"pa-0 mr-2 mb-2",attrs:{color:"error",text:""},on:{click:function(t){e.serverErrorDialog=!1}}},[e._v(" OK ")])],1)],1)],1),r("v-app-bar",{staticStyle:{"z-index":"100"},attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"secondary",height:"85"}},[r("v-row",{attrs:{"no-gutters":"",align:"center"}},[r("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[r("v-row",{attrs:{"no-gutters":"",align:"center"}},[r("v-btn",{staticClass:"hidden-sm-and-down mx-0 pl-2",attrs:{color:"primary"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[r("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.drawer,expression:"drawer"}]},[e._v("mdi-chevron-left")]),r("v-icon",{directives:[{name:"show",rawName:"v-show",value:!e.drawer,expression:"!drawer"}]},[e._v("mdi-chevron-down")]),r("span",{staticClass:"ml-1 text-capitalize title"},[e._v(" Menu ")])],1),r("v-btn",{staticClass:"hidden-md-and-up",attrs:{icon:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[r("v-icon",[e._v("$menu")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-row",{attrs:{"no-gutters":"",justify:"center",align:"center"}},[r("router-link",{attrs:{to:"/"}},[r("v-img",{attrs:{src:a("3408"),alt:"Online Train Ticket Reservation","max-height":"74","max-width":"208",transition:"scale-transition"}})],1)],1)],1),r("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[r("v-row",{attrs:{"no-gutters":"",justify:"end"}},[e.userIsGuest?r("v-btn",{staticClass:"ml-4 pl-3 text-capitalize title hidden-sm-and-down",attrs:{color:"primary",to:"/register"}},[r("v-icon",{attrs:{size:"large"}},[e._v("mdi-account-plus")]),r("span",{staticClass:"ml-2 text-capitalize title"},[e._v(" Register ")])],1):e._e(),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.userIsGuest,expression:"userIsGuest"}],staticClass:"mx-4 pl-3 text-capitalize title hidden-sm-and-down",attrs:{color:"primary",to:"/login"}},[r("v-icon",{attrs:{size:"large"}},[e._v("mdi-login")]),r("span",{staticClass:"ml-2 text-capitalize title"},[e._v(" Login ")])],1),r("v-menu",{staticClass:"ml-auto my-auto",attrs:{"close-on-click":"","close-on-content-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:!e.userIsGuest,expression:"!userIsGuest"}],attrs:{color:"primary",dark:"",icon:e.$vuetify.breakpoint.smAndDown}},a),[r("span",{staticClass:"text-capitalize subtitle-1 hidden-sm-and-down",staticStyle:{"text-transform":"none !important"}},[e._v(" Welcome, "+e._s(e.$store.getters.getUser.username)+" "),r("v-icon",{staticClass:"ml-1 mb-1 py-auto",attrs:{size:"medium"}},[e._v("mdi-arrow-down-drop-circle-outline")])],1),r("v-icon",{staticClass:"hidden-md-and-up"},[e._v("mdi-dots-vertical")])],1)]}}]),model:{value:e.valueOfDrobdownAppBar,callback:function(t){e.valueOfDrobdownAppBar=t},expression:"valueOfDrobdownAppBar"}},[r("v-list",{staticClass:"py-1"},e._l(e.dropDownAppBarItems,(function(t,a){return r("v-list-item",{key:a,attrs:{to:t.route},on:{click:function(a){return e.logoutWhenRequested(t)}}},[r("v-icon",{attrs:{color:"primary"}},[e._v(e._s(t.icon))]),r("v-list-item-title",{staticClass:"ml-2"},[e._v(e._s(t.title))])],1)})),1)],1)],1)],1)],1)],1),r("v-navigation-drawer",{staticStyle:{"z-index":"101"},attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,color:"primary",app:"",dark:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",[e._l(e.menuItems,(function(t){return[t.heading&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?r("v-row",{key:t.heading,attrs:{align:"center"}},[r("v-subheader",{staticClass:"ml-3"},[e._v(" "+e._s(t.heading)+" ")])],1):t.children&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?r("v-list-group",{key:t.text,attrs:{color:"secondary","prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-content",[r("v-list-item-title",{staticClass:"subtitle-1"},[e._v(" "+e._s(t.text)+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},e._l(t.children,(function(t,a){return r("v-list-item",{key:a,staticClass:"ml-5",attrs:{link:"",to:t.route}},[t.icon?r("v-list-item-action",[r("v-icon",[e._v(e._s(t.icon))])],1):e._e(),r("v-list-item-content",[r("v-list-item-title",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.text)+" ")])],1)],1)})),1):t.text&&e.shouldDisplayForUserGroup(t.displayForUserGroup)&&e.shouldDisplayForScreenSize(t.displayForScreenSize)?r("v-list-item",{key:t.text,attrs:{link:"",to:t.route},on:{click:function(a){return e.logoutWhenRequested(t)}}},[r("v-list-item-action",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",{staticClass:"subtitle-1"},[e._v(" "+e._s(t.text)+" ")])],1)],1):e._e()]}))],2)],1),r("v-main",{attrs:{app:"",id:"content"}},[r("router-view",{on:{serverError:e.onServerError}})],1),r("v-footer",{staticClass:"flex-column",staticStyle:{position:"absolute"},attrs:{app:"",inset:"",color:"#E9E9E9"}},[r("v-row",[r("strong",[e._v("Copyright Â© 2020 - Now | Catalin-Gabriel Anastasiu ("),r("a",{attrs:{href:"mailto:catalinanastas@gmail.com"}},[e._v("catalinanastas@gmail.com")]),e._v("). More details "),r("router-link",{attrs:{to:"/copyrights"}},[e._v("here")]),e._v(". ")],1)])],1)],1)},o=[],l=(a("caad"),a("b0c0"),a("2532"),{ADMIN:1,USER:2,GUEST:3}),c={SEAT_LEFT:1,SEAT_RIGHT:2,SEAT_UP:3,SEAT_DOWN:4,LUGGAGE_RACK:5,TABLE:6,WALL:7,RESERVED_SEAT_LEFT:8,RESERVED_SEAT_RIGHT:9,RESERVED_SEAT_UP:10,RESERVED_SEAT_DOWN:11,SELECTED_SEAT_LEFT:12,SELECTED_SEAT_RIGHT:13,SELECTED_SEAT_UP:14,SELECTED_SEAT_DOWN:15,RESERVING_SEAT_LEFT:16,RESERVING_SEAT_RIGHT:17,RESERVING_SEAT_UP:18,RESERVING_SEAT_DOWN:19},u={USER_ROLES:l,USER_GROUPS:{AUTHENTICATED:[l.ADMIN,l.USER],ADMIN_ONLY:[l.ADMIN],UNAUTHENTICATED:[l.GUEST]},LAYOUT:{GRID_MARGIN:1,ELEMENTS:c},ERRORS:{LOGIN_FAILED:"Login failed. Please check your credentials.",UNREACHABLE_SERVER:"Couldn't contact the server.",SEAT_ALREADY_SELECTED:{code:1022,message:"Requested seat has already been selected by somebody else."}},SEAT_SELECTION_REFRESH_TIMEOUT:24e4,SERVER_URL:"/api"},d=u,m={props:{source:String},data:function(){return{serverErrorDialog:!1,serverErrorMessage:"",serverErrorTitle:"Server Error",drawer:null,valueOfDrobdownAppBar:!1,dropDownAppBarItems:[{title:"My Account",icon:"mdi-account-circle",route:"/my-account"},{title:"Log Out",icon:"mdi-power",route:"",isLogout:!0}],menuItems:[{heading:"Account",displayForScreenSize:"smAndDown"},{icon:"mdi-account-plus",text:"Register",route:"/register",displayForUserGroup:d.USER_GROUPS.UNAUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-login",text:"Login",route:"/login",displayForUserGroup:d.USER_GROUPS.UNAUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-account",text:"My Account",route:"/my-account",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"smAndDown"},{icon:"mdi-power",text:"Logout",route:"",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"smAndDown",isLogout:!0},{heading:"General"},{icon:"mdi-home",text:"Home",route:"/"},{icon:"mdi-account",text:"My Account",route:"/my-account",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED,displayForScreenSize:"mdAndUp"},{icon:"mdi-chart-areaspline",text:"Dashboard",route:"/dashboard",displayForUserGroup:d.USER_GROUPS.ADMIN_ONLY},{icon:"mdi-ticket",text:"My Tickets",route:"/my-tickets",displayForUserGroup:d.USER_GROUPS.AUTHENTICATED},{icon:"mdi-chevron-up","icon-alt":"mdi-chevron-down",text:"Railway Management",model:!1,displayForUserGroup:d.USER_GROUPS.ADMIN_ONLY,children:[{icon:"mdi-road-variant",text:"Routes",route:"/railway-management/routes"},{icon:"mdi-draw",text:"Car Layouts",route:"/railway-management/car-layouts"},{icon:"mdi-cog",text:"Miscellaneous",route:"/railway-management/miscellaneous"}]}]}},computed:{userRole:function(){return this.$store.getters.isLoggedIn?this.$store.getters.getUser.role:d.USER_ROLES.GUEST},userIsGuest:function(){return this.userRole===d.USER_ROLES.GUEST}},methods:{shouldDisplayForUserGroup:function(e){if(!e)return!0;if(!Array.isArray(e))throw console.error("displayGroup is not an Array!"),DOMException("displayGroup is not an Array!");return e.includes(this.userRole)},shouldDisplayForScreenSize:function(e){if(!e)return!0;var t=this.$vuetify.breakpoint.name;switch(e){case"mdAndUp":if(["md","lg","xl"].includes(t))return!0;break;case"mdAndDown":if(["xs","sm","md"].includes(t))return!0;break;case"smAndDown":if(["xs","sm"].includes(t))return!0;break;default:throw console.error("displayScreenSize has abeen given an invalid value!"),DOMException("displayScreenSize has abeen given an invalid value!")}return!1},onServerError:function(e,t){this.serverErrorDialog=!0,this.serverErrorMessage=e,this.serverErrorTitle=t||"Server Error"},logoutWhenRequested:function(e){e.isLogout&&(this.$store.dispatch("logout"),this.$router.push("/"))}}},p=m,v=(a("034f"),a("2877")),h=a("6544"),g=a.n(h),f=a("7496"),S=a("40dc"),y=a("8336"),A=a("b0af"),b=a("99d9"),T=a("62ad"),w=a("169a"),E=a("553a"),C=a("132d"),x=a("adda"),R=a("8860"),_=a("56b0"),D=a("da13"),k=a("1800"),L=a("5d23"),N=a("f6c4"),O=a("e449"),U=a("f774"),V=a("0fd9"),I=a("2fa4"),F=a("e0c7"),M=Object(v["a"])(p,s,o,!1,null,null,null),B=M.exports;g()(M,{VApp:f["a"],VAppBar:S["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VDialog:w["a"],VFooter:E["a"],VIcon:C["a"],VImg:x["a"],VList:R["a"],VListGroup:_["a"],VListItem:D["a"],VListItemAction:k["a"],VListItemContent:L["a"],VListItemTitle:L["b"],VMain:N["a"],VMenu:O["a"],VNavigationDrawer:U["a"],VRow:V["a"],VSpacer:I["a"],VSubheader:F["a"]});a("a623");var P=a("8c4f"),G=a("2f62"),j=a("0e44"),H=function(){return{token:"",user:{},notification:{state:!1,message:""}}};r["default"].use(G["a"]);var Y=new G["a"].Store({strict:!0,plugins:[Object(j["a"])()],state:H(),getters:{isLoggedIn:function(e){return e.token},getUser:function(e){return e.user},getNotification:function(e){return e.notification}},mutations:{setToken:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setNotification:function(e,t){e.notification=t},reset:function(e){return Object.assign(e,H())}},actions:{login:function(e,t){var a=e.commit,r=(e.dispatch,t.token),n=t.user;a("setToken",r),a("setUser",n),i.a.defaults.headers.common["Authorization"]="Bearer ".concat(r)},logout:function(e){var t=e.commit;t("reset","")},showNotification:function(e,t){var a=e.commit,r=t.msg;a("setNotification",{state:!0,message:r})},hideNotification:function(e){var t=e.commit;t("setNotification",{state:!1,message:""})}},modules:{}}),$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("v-carousel",{staticClass:"carousel",attrs:{"show-arrows":!1,"hide-delimiters":!0,cycle:"",interval:8e3,vertical:"",height:"200"}},e._l(e.carouselItems,(function(t,n){return r("v-carousel-item",{key:n,staticClass:"carousel-item",attrs:{src:a("1771")("./"+t.path),height:"100%"}},[r("v-row",{staticClass:"carousel-item ma-0 pa-0",staticStyle:{width:"100%",height:"100%"},attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-center"},[e.$vuetify.breakpoint.smAndUp?r("h1",{staticClass:"primary--text carousel-heading"},[e._v(" Book Your Ride ")]):r("h1",{staticClass:"primary--text carousel-heading-xs"},[e._v(" Book Your Ride ")]),r("p",{staticClass:"title primary--text font-italic font-weight-bold text--lighten-1"},[e._v(" Safe, Secure, Fast. "),r("br"),e._v("There is no easier way to book your train ride other than OTTR. ")])])],1)],1)})),1),r("v-row",{staticClass:"px-5 mt-10 mb-5 mx-0"},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticStyle:{"border-top":"solid 4px indigo",margin:"auto"},attrs:{"max-width":"450",elevation:"5"}},[r("v-form",{ref:"searchRidesForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.searchRides(t)}},model:{value:e.searchRidesFormValid,callback:function(t){e.searchRidesFormValid=t},expression:"searchRidesFormValid"}},[r("v-card-title",{staticClass:"justify-center"},[r("h3",[e._v("Search for rides")])]),r("v-card-text",{staticClass:"px-7"},[r("v-row",{staticClass:"justify-center align-center"},[r("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"1"}},[r("v-btn",{attrs:{color:"primary",icon:""},on:{click:e.swapFromToStations}},[r("v-icon",[e._v("mdi-swap-vertical")])],1)],1),r("v-col",[r("v-autocomplete",{attrs:{items:e.stations,"search-input":e.fromStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"From",placeholder:"Source Station","prepend-icon":"mdi-city","return-object":"",rules:e.validationRules.fromStation},on:{"update:searchInput":function(t){e.fromStationSearch=t},"update:search-input":function(t){e.fromStationSearch=t}},model:{value:e.fromStation,callback:function(t){e.fromStation=t},expression:"fromStation"}}),r("v-autocomplete",{attrs:{items:e.stations,"search-input":e.toStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"To",placeholder:"Destination Station","prepend-icon":"mdi-city","return-object":"",rules:e.validationRules.toStation},on:{"update:searchInput":function(t){e.toStationSearch=t},"update:search-input":function(t){e.toStationSearch=t}},model:{value:e.toStation,callback:function(t){e.toStation=t},expression:"toStation"}})],1)],1),r("v-autocomplete",{attrs:{items:e.stations,"search-input":e.viaStationSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"Via",placeholder:"Optional","prepend-icon":"mdi-city","return-object":""},on:{"update:searchInput":function(t){e.viaStationSearch=t},"update:search-input":function(t){e.viaStationSearch=t}},model:{value:e.viaStation,callback:function(t){e.viaStation=t},expression:"viaStation"}}),r("DatePicker",{attrs:{name:"rideDateSearch",label:"Departure Date","initial-value":e.todayDateText,classes:"mt-3","prepend-icon":"mdi-calendar","inline-style":"width: 400px;","min-date":e.todayDateText},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}}),r("v-autocomplete",{attrs:{items:e.travelClasses,"search-input":e.travelClassSearch,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"_id",label:"Travel Class",placeholder:"Any","prepend-icon":"mdi-seat-passenger","return-object":""},on:{"update:searchInput":function(t){e.travelClassSearch=t},"update:search-input":function(t){e.travelClassSearch=t}},model:{value:e.selectedTravelClass,callback:function(t){e.selectedTravelClass=t},expression:"selectedTravelClass"}})],1),r("v-card-actions",{staticClass:"pb-5 px-7"},[r("v-btn",{attrs:{color:"primary",width:"100%",disabled:!e.searchRidesFormValid,type:"submit"}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-magnify")]),e._v(" Search ")],1)],1)],1)],1)],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("AdvertisementCarousel")],1)],1)],1)},z=[],J=(a("96cf"),a("1da1")),q={getCrudServiceForResource:function(e){return{index:function(){return i.a.get(d.SERVER_URL+"/"+e+"/").then((function(e){return e.data})).catch(this.throwServerError)},show:function(t){return i.a.get(d.SERVER_URL+"/"+e+"/"+t).then((function(e){return e.data})).catch(this.throwServerError)},create:function(t){return i.a.post(d.SERVER_URL+"/"+e+"/",t).then((function(e){return e.data})).catch(this.throwServerError)},update:function(t){return i.a.put(d.SERVER_URL+"/"+e+"/"+t._id,t).then((function(e){return e.data})).catch(this.throwServerError)},delete:function(t){return i.a.delete(d.SERVER_URL+"/"+e+"/"+t).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}}}},W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"datePickerDialog",attrs:{"return-value":e.datePickerText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.datePickerText=t},"update:return-value":function(t){e.datePickerText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({class:e.classes,style:e.inlineStyle,attrs:{label:e.label,"hide-details":e.hideDetails,"prepend-icon":e.prependIcon,readonly:"",rules:e.datePickerTextRules},model:{value:e.datePickerText,callback:function(t){e.datePickerText=t},expression:"datePickerText"}},r))]}}]),model:{value:e.datePickerDialog,callback:function(t){e.datePickerDialog=t},expression:"datePickerDialog"}},[e.datePickerDialog?a("v-date-picker",{attrs:{scrollable:"",min:e.minDate},model:{value:e.datePickerText,callback:function(t){e.datePickerText=t},expression:"datePickerText"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerDialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.datePickerDialog.save(e.datePickerText)}}},[e._v(" OK ")])],1):e._e()],1)},K=[],Q={name:"DatePicker",props:{name:String,initialValue:String,label:{type:String,default:""},requiredMessage:{type:String,default:""},hideDetails:{type:Boolean,default:!1},classes:{type:String,default:""},inlineStyle:{type:String,default:""},minDate:{type:String,default:""},prependIcon:{type:String,default:""}},data:function(){return{datePickerDialog:!1,datePickerText:null,datePickerTextRules:[]}},mounted:function(){var e=this;this.datePickerTextRules.push((function(t){return!!t||e.requiredMessage})),this.initialValue&&"N/A"!==this.initialValue&&(this.datePickerText=this.initialValue)},watch:{initialValue:function(e){this.datePickerText=e&&"N/A"!==e?e:null},datePickerText:function(e){this.$emit("datePickerChanged",{name:this.name,newDate:e})}}},X=Q,Z=a("2e4b"),ee=a("8654"),te=Object(v["a"])(X,W,K,!1,null,"15fbc96b",null),ae=te.exports;g()(te,{VBtn:y["a"],VDatePicker:Z["a"],VDialog:w["a"],VSpacer:I["a"],VTextField:ee["a"]});var re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-carousel",{staticStyle:{margin:"auto","max-width":"510px"},attrs:{"hide-delimiter-background":!0,"hide-delimiters":!1,"show-arrows-on-hover":!0,"show-arrows":!1,light:"","delimiter-icon":"mdi-minus",continuous:"",height:"533"}},e._l(e.ads,(function(t,n){return r("v-carousel-item",{key:n},[r("v-card",{staticClass:"mt-9 px-9",staticStyle:{margin:"auto"},attrs:{"max-width":"500",height:"493"}},[r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-col",{staticClass:"pa-0 ma-0"},[r("v-row",{attrs:{justify:"center"}},[r("v-img",{staticClass:"mt-n8 elevation-7",staticStyle:{"border-radius":"15px"},attrs:{src:a("1771")("./"+t.imagePath),alt:"Advertisement Image",transition:"slide-y-reverse-transition"}})],1),r("v-row",{staticClass:"ma-0 pa-0 mt-2",attrs:{"no-gutters":""}},[r("v-spacer"),r("v-card-title",{class:["pb-0","font-weight-bold",e.$vuetify.breakpoint.smAndUp?"title":"subtitle-1"]},[e._v(" "+e._s(t.textTitle)+" ")]),r("v-spacer")],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-spacer"),r("v-card-text",{staticClass:"pt-2 text-center text--secondary"},[r("span",{domProps:{innerHTML:e._s(t.textDescription)}})]),r("v-spacer")],1)],1)],1)],1)],1)})),1)},ne=[],ie={name:"AdvertisementCarousel",data:function(){return{ads:[{imagePath:"woman-traveling.png",textTitle:"Summer Travel",textDescription:'This summer you too can enjoy the touristic attractions by traveling with our\n                            seasonal discounts ranging from 5% to 30%. No matter where you are, you can\n                            easily book a ride so you can choose your own seat (even next to the A/C during\n                            this hot time, you\'ll enjoy it). For more details, check our <a href="offers"> offers page...</a>\n                            <br><br>'},{imagePath:"bringing-people-together.png",textTitle:"Bringing People Together",textDescription:'Trains have always been known as a way to reunite people separated by long distances.\n                         OTTR can give <strong>you</strong> the possibility to see your dearest friends and relatives\n                         so you can enjoy more time with them. For this reason, you can join\n                         <a href="bringing-people-together">our draw</a> and be the lucky one to benefit from a\n                         free ride wherever your heart desires. All you have to do is to <a href="register">register</a>\n                         on our website, isn\'t that simple?<br><br>'},{imagePath:"student-in-train.png",textTitle:"Student Discounts",textDescription:"<strong>Comming Soon</strong><br><br>Students will be able to book any ride for free in order to travel\n                        in any place they wish. This is supported by our good government so that we can help our young\n                        citizens to learn more about our country by exploring it without any limits."}]}}},se=ie,oe=a("5e66"),le=a("3e35"),ce=Object(v["a"])(se,re,ne,!1,null,"42728704",null),ue=ce.exports;g()(ce,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCarousel:oe["a"],VCarouselItem:le["a"],VCol:T["a"],VImg:x["a"],VRow:V["a"],VSpacer:I["a"]});var de={name:"home",components:{AdvertisementCarousel:ue,DatePicker:ae},data:function(){return{stations:[],travelClasses:[],searchRidesFormValid:!0,fromStation:null,toStation:null,viaStation:null,selectedTravelClass:null,fromStationSearch:null,toStationSearch:null,viaStationSearch:null,travelClassSearch:null,rideDateString:(new Date).toISOString().substr(0,10),stationService:q.getCrudServiceForResource("station"),travelClassService:q.getCrudServiceForResource("travel-class"),todayDateText:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),carouselItems:[{path:"carousel-img-1.png"},{path:"carousel-img-2.png"},{path:"carousel-img-3.png"},{path:"carousel-img-4.png"},{path:"carousel-img-5.png"}],validationRules:{fromStation:[function(e){return!!e||"Departure station is required"}],toStation:[function(e){return!!e||"Destination station is required"}]}}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.stationService.index();case 3:return e.stations=t.sent,t.next=6,e.travelClassService.index();case 6:e.travelClasses=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},methods:{swapFromToStations:function(){var e=[this.toStation,this.fromStation];this.fromStation=e[0],this.toStation=e[1];var t=[this.toStationSearch,this.fromStationSearch];this.fromStationSearch=t[0],this.toStationSearch=t[1]},onDatePickerChanged:function(e){"rideDateSearch"===e.name&&(this.rideDateString=e.newDate)},searchRides:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.searchRidesForm.validate()){t.next=4;break}return e.searchRidesFormValid=!1,t.abrupt("return");case 4:return a="from="+e.fromStation.code+"&to="+e.toStation.code+"&date="+e.rideDateString,a+=e.viaStation?"&via="+e.viaStation.code:"",a+=e.selectedTravelClass?"&class="+e.selectedTravelClass.code:"",t.next=9,e.$router.push({name:"rideSearchResults",params:{filters:a}});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},me=de,pe=(a("34a2"),a("c6a6")),ve=a("4bd4"),he=Object(v["a"])(me,$,z,!1,null,"5c241b1a",null),ge=he.exports;g()(he,{VAutocomplete:pe["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCarousel:oe["a"],VCarouselItem:le["a"],VCol:T["a"],VForm:ve["a"],VIcon:C["a"],VRow:V["a"]});var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height ma-0",attrs:{fluid:""}},[a("v-row",{staticClass:"fill-height mx-0",attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-card",{staticStyle:{"border-top":"solid 4px indigo"},attrs:{loading:e.loggingInAccount,"loader-height":"3"}},[a("v-card-title",{staticClass:"justify-center"},[a("p",{staticClass:"display-1"},[e._v(" Login ")])]),a("v-card-text",[a("v-form",{ref:"loginForm",staticClass:"px-6",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.login(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",color:"primary",placeholder:"Enter your e-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{rules:e.passwordRules,label:"Password",color:"primary",placeholder:"Enter your password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"mt-2 px-7 text-capitalize",attrs:{disabled:!e.valid,color:"primary",type:"submit"}},[e._v(" Login Now ")])],1)],1)],1)],1)],1)],1)],1)},Se=[],ye={login:function(e){return i.a.post(d.SERVER_URL+"/user/login",e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}))},register:function(e){return i.a.post(d.SERVER_URL+"/user/register",e).then((function(e){return e.data})).catch((function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}))},getUserDetails:function(){return i.a.get(d.SERVER_URL+"/user/my-account").then((function(e){return e.data}))}},Ae={data:function(){return{valid:!0,email:"",password:"",showPassword:!1,loggingInAccount:!1,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail is invalid"}],passwordRules:[function(e){return!!e||"Password is required"}]}},methods:{login:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.validateForm()){t.next=4;break}return e.valid=!1,t.abrupt("return");case 4:return a={email:e.email,password:e.password},e.loggingInAccount=!0,t.next=8,ye.login(a);case 8:return r=t.sent,n=r.token,i=r.user,t.next=13,e.$store.dispatch("login",{token:n,user:i});case 13:return t.next=15,e.$router.push("/");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 20:e.loggingInAccount=!1;case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))()},validateForm:function(){return this.$refs.loginForm.validate()}}},be=Ae,Te=a("a523"),we=Object(v["a"])(be,fe,Se,!1,null,null,null),Ee=we.exports;g()(we,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VForm:ve["a"],VRow:V["a"],VTextField:ee["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{staticClass:"fill-height mx-0",attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticStyle:{"border-top":"solid 4px indigo"},attrs:{loading:e.registeringAccount,"loader-height":"3"}},[a("v-card-title",{staticClass:"justify-center"},[a("p",{staticClass:"display-1"},[e._v(" Create a new account ")])]),a("v-card-text",[a("v-form",{ref:"registerForm",staticClass:"px-6",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.register(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.usernameRules,label:"User Name",color:"primary",placeholder:"Enter a username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",color:"primary",placeholder:"Enter your e-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("vue-tel-input-vuetify",{attrs:{label:"Phone Number",rules:e.phoneRules,inputOptions:{showDialCode:!0,tabindex:0},mode:"international",placeholder:"",loading:!e.phoneCountriesAvailable,preferredCountries:["RO"]},on:{"country-changed":function(t){e.phoneCountriesAvailable=!0}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("v-text-field",{attrs:{rules:e.passwordRules,label:"Password",color:"primary",placeholder:"Minimum 6 characters","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"mt-4 px-7 text-capitalize",attrs:{disabled:!e.valid,color:"primary",type:"submit"}},[e._v(" Register Now ")])],1)],1)],1)],1)],1)],1)],1)},xe=[],Re={data:function(){return{valid:!0,username:"",email:"",phone:null,password:"",showPassword:!1,showPasswordRepeat:!1,phoneCountriesAvailable:!1,registeringAccount:!1,usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Username must have at least 3 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/g.test(e)||"E-mail is invalid"}],phoneRules:[function(e){return!!e||"Phone number is required"},function(e){return/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/g.test(e)||"Phone number is invalid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=6||"Password must have at least 6 characters"}]}},methods:{register:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.validateForm()){t.next=4;break}return e.valid=!1,t.abrupt("return");case 4:return a={username:e.username,email:e.email,phone:e.phone,password:e.password,role:d.USER_ROLES.USER},e.registeringAccount=!0,t.next=8,ye.register(a);case 8:return r=t.sent,t.next=11,e.$store.dispatch("login",{token:r.token,user:r.user});case 11:return t.next=13,e.$router.push({name:"my-account"});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 18:e.registeringAccount=!1;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},validateForm:function(){return this.$refs.registerForm.validate()}}},_e=Re,De=Object(v["a"])(_e,Ce,xe,!1,null,null,null),ke=De.exports;g()(De,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VForm:ve["a"],VRow:V["a"],VTextField:ee["a"]});var Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height ma-0",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height ma-0",attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticClass:"pt-10 pb-2",staticStyle:{"border-top":"solid 5px indigo"}},[r("v-row",{attrs:{justify:"center"}},[r("v-img",{attrs:{src:a("b92a"),alt:"Error 404 Logo",contain:"","max-height":"94%","max-width":"250"}})],1),r("v-row",{staticClass:"mt-3",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"8"}},[r("v-row",{attrs:{justify:"start"}},[r("v-card-title",{class:[e.$vuetify.breakpoint.smAndUp?"display-3":"headline"]},[e._v(" Page not found ")])],1),r("v-row",{attrs:{justify:"start"}},[r("v-card-text",{staticClass:"body-1"},[e._v(" We are sorry, it looks like the page you are searching for does not exist. ")])],1)],1)],1)],1)],1)],1)],1)},Ne=[],Oe={name:"PageNotFound"},Ue=Oe,Ve=Object(v["a"])(Ue,Le,Ne,!1,null,null,null),Ie=Ve.exports;g()(Ve,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VImg:x["a"],VRow:V["a"]});var Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[r("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.editAccountDialog,callback:function(t){e.editAccountDialog=t},expression:"editAccountDialog"}},[r("v-card",{attrs:{loading:e.savingAccountDetails}},[r("v-form",{ref:"editAccountForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.editAccount(t)}},model:{value:e.editAccountFormValid,callback:function(t){e.editAccountFormValid=t},expression:"editAccountFormValid"}},[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Edit Account")])]),r("v-divider"),r("v-card-text",{staticClass:"px-7"},[r("v-container",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"User Name",rules:e.usernameRules,required:""},model:{value:e.editUsername,callback:function(t){e.editUsername=t},expression:"editUsername"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Email",rules:e.emailRules,required:""},model:{value:e.editEmail,callback:function(t){e.editEmail=t},expression:"editEmail"}})],1),r("v-col",{attrs:{cols:"12"}},[r("vue-tel-input-vuetify",{attrs:{label:"Phone",rules:e.phoneRules,mode:"international",placeholder:"",loading:!e.phoneCountriesAvailable,preferredCountries:["RO"],value:e.editPhone},on:{"country-changed":e.onCountryChange},model:{value:e.editPhone,callback:function(t){e.editPhone=t},expression:"editPhone"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"New Password",hint:"Optional","persistent-hint":"","append-icon":e.showEditPassword?"mdi-eye":"mdi-eye-off",type:e.showEditPassword?"text":"password",rules:e.passwordRules},on:{"click:append":function(t){e.showEditPassword=!e.showEditPassword}},model:{value:e.editPassword,callback:function(t){e.editPassword=t},expression:"editPassword"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",disabled:!e.editAccountFormValid,type:"submit"}},[e._v("Save")])],1)],1)],1)],1),r("v-dialog",{attrs:{width:"350"},on:{keydown:function(t){return e.changeDeleteConfirmationDialogVisibility()}},model:{value:e.deleteConfirmationDialog,callback:function(t){e.deleteConfirmationDialog=t},expression:"deleteConfirmationDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline mb-1"},[r("v-icon",{staticClass:"mr-2",attrs:{color:"error"}},[e._v("mdi-alert")]),r("strong",[e._v("Are you sure?")])],1),r("v-card-text",{staticClass:"body-1 py-0"},[e._v(" Deleting your account will result in losing all data gathered so far. "),r("br"),r("br"),e._v(" This will permanently erase your account. ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.changeDeleteConfirmationDialogVisibility()}}},[e._v(" Cancel ")]),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteAccount()}}},[e._v(" Delete ")])],1)],1)],1),r("v-alert",{staticClass:"mb-5",attrs:{color:"accent",elevation:"2",icon:"mdi-bell-outline",border:"left","colored-border":"",dismissible:""},model:{value:e.notificationBanner,callback:function(t){e.notificationBanner=t},expression:"notificationBanner"}},[e._v(" "+e._s(e.notificationBannerMessage)+" ")]),r("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"my-account-container"}},[r("v-col",{staticClass:"pa-6 pt-5"},[r("v-card",{staticClass:"ma-0 d-block pa-5 pl-3"},[r("v-row",{staticClass:"ma-0 pa-0",attrs:{"no-gutters":""}},[r("v-col",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],staticClass:"ma-0 pa-0 px-3",attrs:{cols:"auto"}},[r("v-img",{attrs:{src:a("c86c"),alt:"Error 404 Logo","min-width":"100","max-width":"200"}})],1),r("v-col",{staticClass:"pa-0"},[r("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],attrs:{"no-gutters":"",justify:"end"}},[r("v-btn",{staticClass:"text-capitalize body-1",attrs:{color:"primary"},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v(" Edit Account ")])],1),r("v-row",{staticClass:"ml-1",attrs:{"no-gutters":"",align:"center"}},[r("v-col",{attrs:{cols:"auto"}},[e.$vuetify.breakpoint.smAndUp?r("v-card-title",{staticClass:"ma-0 pl-0 display-1 font-weight-black"},[r("v-icon",{staticClass:"mr-2 pt-1",attrs:{color:"primary",large:""}},[e._v("mdi-account-circle")]),r("span",[e._v(e._s(e.user.username))])],1):r("v-card-title",{staticClass:"ma-0 pl-0 title font-weight-black"},[r("v-icon",{staticClass:"mr-2 pt-1",attrs:{color:"primary",large:""}},[e._v("mdi-account-circle")]),r("span",[e._v(e._s(e.user.username))])],1)],1),e.$vuetify.breakpoint.xs?r("v-spacer"):e._e(),e.$vuetify.breakpoint.xs?r("v-col",[r("v-row",{attrs:{justify:"end","no-gutters":""}},[r("v-icon",{attrs:{color:"primary"},on:{click:function(t){return e.changeEditAccountDialogVisibility()}}},[e._v("mdi-pen")])],1)],1):e._e()],1)],1)],1)],1),r("v-row",{staticClass:"mt-8"},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("SpecificUserInfoCard",{attrs:{"icon-name":"mdi-email","property-title":"Email","info-value":e.user.email}}),r("SpecificUserInfoCard",{staticClass:"mt-5",attrs:{"icon-name":"mdi-phone","property-title":"Phone","info-value":e.user.phone}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("SpecificUserInfoCard",{attrs:{"icon-name":"mdi-account","property-title":"User Type","info-value":e.userRoleString}}),r("SpecificUserInfoCard",{staticClass:"mt-5",attrs:{"icon-name":"mdi-calendar","property-title":"Registration Date","info-value":e.userRegistrationDate}})],1)],1),r("v-row",{staticClass:"mt-6 mb-2",attrs:{justify:"end","no-gutters":""}},[r("v-btn",{staticClass:"text-capitalize body-1",attrs:{color:"error"},on:{click:function(t){return e.changeDeleteConfirmationDialogVisibility()}}},[e._v(" Delete Account ")])],1)],1)],1)],1)},Me=[],Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-row",{staticClass:"ml-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"auto"}},[e.$vuetify.breakpoint.smAndUp?a("v-icon",{attrs:{large:"",color:"primary"}},[e._v(e._s(e.iconName))]):a("v-icon",{attrs:{medium:"",color:"primary"}},[e._v(e._s(e.iconName))])],1),a("v-col",{attrs:{cols:"auto"}},[e.$vuetify.breakpoint.smAndUp?a("v-row",{staticClass:"subtitle-1 font-weight-black text-uppercase",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.propertyTitle)+" ")]):a("v-row",{staticClass:"subtitle-2 font-weight-black text-uppercase ml-n3",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.propertyTitle)+" ")]),e.$vuetify.breakpoint.smAndUp?a("v-row",{staticClass:"body-1",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.infoValue)+" ")]):a("v-row",{staticClass:"body-2 ml-n3",attrs:{"no-gutters":""}},[e._v(" "+e._s(e.infoValue)+" ")])],1)],1)],1)},Pe=[],Ge={name:"SpecificUserInfoCard",props:["infoValue","propertyTitle","iconName","isPassword"]},je=Ge,He=Object(v["a"])(je,Be,Pe,!1,null,null,null),Ye=He.exports;g()(He,{VCard:A["a"],VCol:T["a"],VIcon:C["a"],VRow:V["a"]});var $e={edit:function(e){return i.a.put(d.SERVER_URL+"/user/"+e._id,e).then((function(e){return e.data})).catch(this.throwServerError)},delete:function(e){return i.a.delete(d.SERVER_URL+"/user/"+e).then((function(e){return e.data})).catch(this.throwServerError)},sendSms:function(e){return i.a.post(d.SERVER_URL+"/user/sms/",{text:e}).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},ze={name:"MyAccount",components:{SpecificUserInfoCard:Ye},data:function(){return{editAccountDialog:!1,editAccountFormValid:!0,showEditPassword:!1,notificationBanner:!1,notificationBannerMessage:"",deleteConfirmationDialog:!1,editUsername:this.$store.getters.getUser.username,editEmail:this.$store.getters.getUser.email,editPhone:this.$store.getters.getUser.phone,editPassword:"",phoneCountriesAvailable:!1,savingAccountDetails:!1,usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Username must have at least 3 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/g.test(e)||"E-mail is invalid"}],phoneRules:[function(e){return!!e||"Phone number is required"},function(e){return/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s./0-9]*$/g.test(e)||"Phone number is invalid"},function(e){return"string"===typeof e&&"+"===e[0]||"Phone number must be in international format"}],passwordRules:[function(e){return!e||e.length>=6||"New password must have at least 6 characters"}]}},computed:{userRoleString:function(){switch(this.user.role){case d.USER_ROLES.ADMIN:return"Railway Administrator";case d.USER_ROLES.USER:return"Regular User";case d.USER_ROLES.GUEST:return"Guest";default:throw console.error("Unknown user role type "+this.user.role+" to display."),DOMError("Unknown user role type to display.")}},userRegistrationDate:function(){var e=new Date(this.user.registered);return e.getDate()+"."+e.toLocaleString("default",{month:"2-digit"})+"."+e.getFullYear()},user:function(){return this.$store.getters.getUser}},methods:{editAccount:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.editAccountForm.validate()){t.next=4;break}return e.editAccountFormValid=!1,t.abrupt("return");case 4:return a={_id:e.user._id,username:e.editUsername,email:e.editEmail,phone:e.editPhone,password:e.editPassword},e.savingAccountDetails=!0,t.next=8,$e.edit(a);case 8:return r=t.sent,t.next=11,e.$store.dispatch("login",{token:r.token,user:r.user});case 11:e.editAccountDialog=!1,e.notificationBanner=!0,e.notificationBannerMessage="Account details have been succesfully updated.",t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 19:e.savingAccountDetails=!1;case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))()},changeEditAccountDialogVisibility:function(){this.editAccountDialog=!this.editAccountDialog,this.editAccountDialog&&(this.showEditPassword=!1,this.editUsername=this.user.username,this.editEmail=this.user.email,this.editPhone=this.user.phone,this.editPassword="")},changeDeleteConfirmationDialogVisibility:function(){this.deleteConfirmationDialog=!this.deleteConfirmationDialog},deleteAccount:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$e.delete(e.user._id);case 3:return t.next=5,e.$store.dispatch("logout");case 5:return t.next=7,e.$router.push("/");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},onCountryChange:function(e){this.phoneCountriesAvailable=!0}}},Je=ze,qe=(a("f9d4"),a("0798")),We=a("ce7e"),Ke=Object(v["a"])(Je,Fe,Me,!1,null,null,null),Qe=Ke.exports;g()(Ke,{VAlert:qe["a"],VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VDialog:w["a"],VDivider:We["a"],VForm:ve["a"],VIcon:C["a"],VImg:x["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"]});var Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Dashboard")]),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"pa-7",attrs:{width:"100%"}},[a("VueApexCharts",{attrs:{type:"bar",options:e.destinationsChart.options,series:e.destinationsChart.series}})],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"pa-7",attrs:{width:"100%"}},[a("VueApexCharts",{attrs:{type:"line",options:e.salesChart.options,series:e.salesChart.series}})],1)],1)],1),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12",md:"7"}},[a("v-card",{staticClass:"pa-7",attrs:{width:"100%"}},[a("VueApexCharts",{attrs:{type:"area",options:e.mostRequestedRoutesChart.options,series:e.mostRequestedRoutesChart.series}})],1)],1),a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-card",{staticClass:"pa-7",attrs:{width:"100%"}},[a("VueApexCharts",{attrs:{type:"pie",options:e.travelersChart.options,series:e.travelersChart.series}})],1)],1)],1)],1)},Ze=[],et=(a("d81d"),a("b680"),a("5530")),tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[a("v-alert",{staticClass:"mb-5",staticStyle:{width:"100%"},attrs:{color:"accent",elevation:"2",icon:"mdi-bell-outline",border:"left","colored-border":"",dismissible:""},model:{value:e.notificationState,callback:function(t){e.notificationState=t},expression:"notificationState"}},[e._v(" "+e._s(this.$store.state.notification.message)+" ")]),a("v-row",{staticClass:"fill-height ma-0 pa-0",attrs:{id:"gray-container"}},[a("v-col",{staticClass:"pa-6 pt-5"},[e._t("default")],2)],1)],1)},at=[],rt={name:"GrayContainer",computed:{notificationState:{get:function(){return this.$store.state.notification.state},set:function(e){e?this.$store.dispatch("showNotification",{msg:this.$store.state.notification.message}):this.$store.dispatch("hideNotification")}}}},nt=rt,it=(a("70fd"),Object(v["a"])(nt,tt,at,!1,null,"74cb85bf",null)),st=it.exports;g()(it,{VAlert:qe["a"],VCol:T["a"],VContainer:Te["a"],VRow:V["a"]});var ot=a("1321"),lt=a.n(ot),ct=a("b9b9"),ut={name:"TheDashboard",components:{GrayContainer:st,VueApexCharts:lt.a},data:function(){return{last30Days:[],destinationsChart:{options:{chart:{id:"destinationsChart"},xaxis:{categories:["Bucuresti Nord","Brasov","Constanta","Cluj","Mures","Sibiu","Prahova","Suceava","Iasi","Galati"]},title:{text:"Most Visited Destinations (last 30 days)",style:{fontSize:"16px"}},theme:{monochrome:{enabled:!0,color:this.$vuetify.theme.themes.light.secondary,shadeTo:"light",shadeIntensity:.65}},plotOptions:{bar:{horizontal:!0}}},series:[{name:"Sold Tickets",data:[10855,9672,8659,7902,7371,6825,6461,6174,5968,5714].map((function(e){return(.6*e).toFixed(0)}))}]},salesChart:{options:{chart:{id:"salesChart",type:"line"},xaxis:{type:"datetime",categories:[]},title:{text:"Ticket Sales",style:{fontSize:"16px"}},fill:{type:"gradient",gradient:{shade:"dark",gradientToColors:[this.$vuetify.theme.themes.light.secondary],shadeIntensity:1,type:"horizontal",opacityFrom:1,opacityTo:1,stops:[0,100,100,100]}},theme:{monochrome:{enabled:!0,color:this.$vuetify.theme.themes.light.secondary,shadeTo:"light",shadeIntensity:.65}},stroke:{curve:"smooth",width:4},yaxis:{labels:{formatter:function(e){return e.toFixed(2)+" USD"}}}},series:[{name:"Sales",data:[56,52,48,46,49,53,55,54,59,62,58,61,64,67,60,58,57,53,49,52,59,65,69,70,67,62,63,63,64,66,68].map((function(e){return(13.17*e*34).toFixed(2)}))}]},mostRequestedRoutesChart:{series:[{name:"Bucuresti Nord (9:21) - Brasov (12:02)",data:[56,52,48,46,49,53,55,54,59,62,58,61,64,67,60,58,57,53,49,52,59,65,69,70,67,62,63,63,64,66,69].map((function(e){return(3.3*e).toFixed(0)}))},{name:"Bucuresti Nord (10:27) - Constanta (12:14)",data:[52,50,49,41,47,50,50,45,50,58,53,56,60,61,64,67,66,60,56,53,52,54,58,64,63,60,58,56,60,63,65].map((function(e){return(3.25*e).toFixed(0)}))},{name:"Constanta (19:30) - Bucuresti Nord (21:18)",data:[53,49,45,46,49,47,44,40,38,36,39,44,48,49,51,53,57,61,59,56,53,50,47,49,51,50,47,49,52,55,57].map((function(e){return(3.25*e).toFixed(0)}))}],options:{chart:{id:"mostRequestedRoutesChart",type:"area"},xaxis:{type:"datetime",categories:[]},title:{text:"Most Requested Routes",style:{fontSize:"16px"}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},theme:{monochrome:{enabled:!0,color:this.$vuetify.theme.themes.light.secondary,shadeTo:"light",shadeIntensity:.95}},yaxis:{labels:{formatter:function(e){return e+" tickets"}}}}},travelersChart:{options:{chart:{id:"travelersChart",type:"pie"},labels:["Adult","Child","Retired"],title:{text:"Number of Travelers (last 30 days)",margin:10,style:{fontSize:"16px"}},theme:{monochrome:{enabled:!0,color:this.$vuetify.theme.themes.light.secondary,shadeTo:"light",shadeIntensity:.7}},plotOptions:{pie:{dataLabels:{offset:-10}}},dataLabels:{formatter:function(e,t){var a=t.w.globals.labels[t.seriesIndex];return[a,e.toFixed(2)+"%"]}},legend:{show:!1}},series:[28547,5472,9690]}}},created:function(){for(var e=new Date,t=0;t<31;t++){var a=ct(e,"m/d/yyyy");this.last30Days.push(a),e.setTime(e.getTime()-864e5)}this.last30Days.reverse(),this.mostRequestedRoutesChart.options=Object(et["a"])(Object(et["a"])({},this.mostRequestedRoutesChart.options),{xaxis:{type:"datetime",categories:this.last30Days}}),this.salesChart.options=Object(et["a"])(Object(et["a"])({},this.salesChart.options),{xaxis:{type:"datetime",categories:this.last30Days}})}},dt=ut,mt=Object(v["a"])(dt,Xe,Ze,!1,null,null,null),pt=mt.exports;g()(mt,{VCard:A["a"],VCol:T["a"],VDivider:We["a"],VRow:V["a"]});var vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[a("v-row",{staticClass:"fill-height ma-0 pa-0",attrs:{id:"copyright-container"}},[a("v-col",{staticClass:"pa-6 pt-5"},[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Copyrights Details")]),a("v-divider"),a("v-row",{staticClass:"ma-0 mt-5 body-1",attrs:{"no-gutters":""}},[a("p",[e._v(" This is a Bachelor thesis, made for non-commercial use! All that can be seen on this website is of fictional kind, and any image found on this domain has been made by the author himself or has been carefully selected to be used as it is or modified in order to satisfy the project's requirements. ")]),a("p",[e._v(" Down below you can find a list with resources gathered from around the Internet, resources made publicly available and labeled for noncommercial reuse (with or without modification). ")]),a("ul",{staticStyle:{overflow:"auto"}},[a("li",[e._v("https://www.logolynx.com/topic/otter#&gid=1&pid=15")]),a("li",[e._v("https://commons.wikimedia.org/wiki/File:Otter_Logo.jpg")]),a("li",[e._v("https://svgsilh.com/image/303792.html")]),a("li",[e._v("https://www.bahn.de/p/view/index.shtml")]),a("li",[e._v("https://www.wallpaperflare.com/white-bullet-train-on-rail-road-tgv-the-train-station-calais-frethun-wallpaper-wqvut")]),a("li",[e._v("https://www.wallpaperflare.com/search?wallpaper=two+tgv+trains")]),a("li",[e._v("https://www.wallpaperflare.com/train-ticket-fare-united-kingdom-number-western-script-wallpaper-gsual")]),a("li",[e._v("https://www.wallpaperflare.com/machine-postal-office-ticket-elevator-db-deutsche-bahn-wallpaper-eoxjh")]),a("li",[e._v("https://www.wallpaperflare.com/people-near-train-station-group-of-people-on-train-station-king-s-cross-station-wallpaper-wjspp/download/1920x1080")]),a("li",[e._v("https://www.uihere.com/free-photos/woman-standing-on-train-door-326609")]),a("li",[e._v("https://www.uihere.com/free-photos/two-persons-hugging-each-other-on-train-station-platform-538891")]),a("li",[e._v("https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.dreamstime.com%2Fphotos-images%2Fbusiness-travel.html&psig=AOvVaw1Ww7KUyezCZhar0E4KQ2Zd&ust=1587760753406000&source=images&cd=vfe&ved=0CA0QjhxqFwoTCJjNrvCz_-gCFQAAAAAdAAAAABAO")])])])],1)],1)],1)},ht=[],gt={name:"TheCopyright"},ft=gt,St=(a("4656"),Object(v["a"])(ft,vt,ht,!1,null,null,null)),yt=St.exports;g()(St,{VCol:T["a"],VContainer:Te["a"],VDivider:We["a"],VRow:V["a"]});var At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("GrayContainer",[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Routes Management")]),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},[a("RoutesTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)},bt=[],Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,"sort-by":"name","no-results-text":"No routes have been found",loading:e.loadingRoutes},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Routes ")]),a("v-spacer"),e.$vuetify.breakpoint.mdAndUp?a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-2 pr-5 text-capitalize",attrs:{color:"primary",outlined:""},on:{click:e.goCreateNewRoute}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-routes")]),a("strong",[e._v("Create New Route")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:""},on:{click:e.goCreateNewRoute}},[a("v-icon",[e._v("mdi-plus-circle")])],1)],1),e.$vuetify.breakpoint.smAndDown?a("v-row",{staticClass:"ma-0 pa-0"},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.goToRides(r)}}},[e._v(" mdi-calendar-clock ")]),a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"},on:{click:function(t){return e.goEditRoute(r)}}},[e._v(" mdi-pen ")]),a("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}}])},[a("template",{slot:"no-data"},[a("span",[e._v(" No routes available to display ")])])],2)},wt=[],Et=(a("4160"),a("159b"),a("fb6a"),a("a434"),a("ac1f"),a("1276"),a("b9b9")),Ct={index:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i.a.get(d.SERVER_URL+"/route/").then((function(e){return e.data})).catch(e.throwServerError));case 1:case"end":return t.stop()}}),t)})))()},getByName:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.get(d.SERVER_URL+"/route/name/"+e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},create:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.post(d.SERVER_URL+"/route/",e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},update:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.put(d.SERVER_URL+"/route/"+e._id,e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},delete:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.delete(d.SERVER_URL+"/route/"+e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},attachFrontendFields2MongoFormat:function(e){var t="",r=a("b9b9"),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=e.routeStations,s=new Date(e.departureTime),o=new Date(e.arrivalTime),l=i.length-1;return e.activeWeekDays.sort((function(e,t){return e-t})),0===e.activeWeekDays[0]&&(e.activeWeekDays.splice(0,1),e.activeWeekDays.push(0)),e.activeWeekDays.forEach((function(e){t+=n[e]+" "})),t=t.slice(0,-1),e.frontend={name:i[0].station.code+"("+r(s,"HH:MM")+")-"+i[l].station.code+"("+r(o,"HH:MM")+")",depStation:i[0].station.name,arrStation:i[l].station.name,depTime:r(s,"HH:MM"),arrTime:r(o,"HH:MM"),train:e.train.trainCategory.code+" "+e.train.number,activeDays:t,halts:i.length-2},e},getUTCRouteName:function(e){var t="",a=e.split(/[()-]/),r=a[0],n=a[1],i=a[3],s=a[4];t+=r+"(";var o=new Date(2e3,0,1),l=n.substr(0,2),c=n.substr(3,2);o.setHours(parseInt(l),parseInt(c)),t+=Et(o,"UTC:HH:MM"),t+=")-"+i+"(";var u=new Date(2e3,0,1);return l=s.substr(0,2),c=s.substr(3,2),u.setHours(parseInt(l),parseInt(c)),t+=Et(u,"UTC:HH:MM")+")",t},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},xt={name:"RoutesTable",data:function(){return{searchBar:"",tableHeaders:[{text:"Source",value:"frontend.depStation",align:"left"},{text:"Destination",value:"frontend.arrStation",align:"left"},{text:"Departure",value:"frontend.depTime",align:"left"},{text:"Arrival",value:"frontend.arrTime",align:"left"},{text:"Train",value:"frontend.train",align:"left"},{text:"Active Days",value:"frontend.activeDays",align:"left"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],service:Ct,loadingRoutes:!0}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.service.index();case 3:a=t.sent,a.forEach((function(t){e.items.push(Ct.attachFrontendFields2MongoFormat(t))})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 10:e.loadingRoutes=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteItem:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loadingRoutes=!0,a.next=4,t.service.delete(e._id);case 4:return t.items=[],a.next=7,t.service.index();case 7:r=a.sent,r.forEach((function(e){t.items.push(Ct.attachFrontendFields2MongoFormat(e))})),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),t.$emit("serverError",a.t0.response.data.err.message);case 14:t.loadingRoutes=!1;case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()},goCreateNewRoute:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$router.push({name:"routesCreate"});case 2:case"end":return t.stop()}}),t)})))()},goEditRoute:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$router.push({name:"routesEdit",params:{routeName:e.frontend.name,route:e}});case 2:case"end":return a.stop()}}),a)})))()},goToRides:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$router.push({name:"rides",params:{routeName:e.frontend.name,route:e}});case 2:case"end":return a.stop()}}),a)})))()}}},Rt=xt,_t=a("8fea"),Dt=a("71d9"),kt=a("2a7f"),Lt=Object(v["a"])(Rt,Tt,wt,!1,null,null,null),Nt=Lt.exports;g()(Lt,{VBtn:y["a"],VCol:T["a"],VDataTable:_t["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:Dt["a"],VToolbarTitle:kt["a"]});var Ot={name:"TheRoutes",components:{RoutesTable:Nt,GrayContainer:st},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},Ut=Ot,Vt=Object(v["a"])(Ut,At,bt,!1,null,null,null),It=Vt.exports;g()(Vt,{VCol:T["a"],VDivider:We["a"],VRow:V["a"]});var Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[a("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"miscellaneous-container"}},[a("v-col",{staticClass:"pa-6 pt-5"},[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Miscellaneous")]),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12",md:"5",lg:"5"}},[a("TrainCategoriesTable",{on:{serverError:e.onServerError}})],1),a("v-divider",{staticClass:"my-5",attrs:{vertical:""}}),a("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[a("TravelClassesTable",{on:{serverError:e.onServerError}})],1)],1),a("v-row",{staticClass:"mt-6",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[a("StationsTable",{on:{serverError:e.onServerError}})],1),a("v-divider",{staticClass:"my-5",attrs:{vertical:""}}),a("v-col",{attrs:{cols:"12",md:"5",lg:"5"}},[a("TravelerCategoryTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)],1)},Mt=[],Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CrudTable",{attrs:{entity:"station","entity-name-plural":"stations","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5,"with-search":""},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Station code",rules:e.validationRules.code},model:{value:r.code,callback:function(t){e.$set(r,"code",t)},expression:"editedItem.code"}})],1),a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-text-field",{attrs:{label:"Station name",rules:e.validationRules.name},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"editedItem.name"}})],1)],1)],1)]}}])})},Pt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,"sort-by":e.sortDefaultBy,search:e.searchBar,"no-results-text":"No "+e.entityNamePlural+" have been found","items-per-page":e.itemsPerPage,loading:e.loadingItems},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" "+e._s(e.entityNamePlural))]),a("v-spacer"),e.withSearch&&e.$vuetify.breakpoint.mdAndUp?a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-icon",e._g({attrs:{color:"primary"}},r),[e._v("mdi-plus-circle")])]}}]),model:{value:e.formDialog,callback:function(t){e.formDialog=t},expression:"formDialog"}},[e.formDialog?a("v-card",{attrs:{loading:e.savingItem}},[a("v-form",{ref:"itemForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save(t)}},model:{value:e.itemFormValid,callback:function(t){e.itemFormValid=t},expression:"itemFormValid"}},[a("v-card-title",[a("span",{staticClass:"headline text-capitalize"},[e._v(e._s(e.formTitle))])]),a("v-divider"),a("v-card-text",{staticClass:"py-0"},[e._t("form",null,{editedItem:e.editedItem})],2),a("v-card-actions",{staticClass:"pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",type:"submit",color:"primary",disabled:!e.itemFormValid||e.savingItem}},[e._v(" Save ")])],1)],1)],1):e._e()],1)],1),e.withSearchSmallScreen?a("v-row",{staticClass:"ma-0 pa-0 mt-3"},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withChangeOrder,expression:"withChangeOrder"}],staticClass:"mr-1",attrs:{small:"",color:e.changeOrderColor},on:{click:function(t){return e.moveUpItem(r)}}},[e._v(" mdi-menu-up-outline ")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withChangeOrder,expression:"withChangeOrder"}],staticClass:"mr-2",attrs:{small:"",color:e.changeOrderColor},on:{click:function(t){return e.moveDownItem(r)}}},[e._v(" mdi-menu-down-outline ")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.withShowItem,expression:"withShowItem"}],staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.showItem(r)}}},[e._v(" mdi-eye ")]),a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"},on:{click:function(t){return e.editItem(r)}}},[e._v(" mdi-pen ")]),a("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("span",[e._v(" No "+e._s(e.entityNamePlural.toLowerCase())+" available to display ")])]},proxy:!0}],null,!0)})},jt=[],Ht=(a("99af"),a("c975"),a("a9e3"),{name:"CrudTable",props:{entity:String,entityNamePlural:String,headers:Array,sortDefaultBy:String,validationRules:Object,defaultItem:Object,withSearch:{type:Boolean,required:!1,default:!1},service:{type:Object,required:!0},withChangeOrder:{type:Boolean,default:!1},changeOrderColor:{type:String,default:"accent"},disableSort:{type:Boolean,default:!1},withShowItem:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:10}},data:function(){return{formDialog:!1,itemFormValid:!0,searchBar:"",savingItem:!1,loadingItems:!0,tableHeaders:[{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],editingItem:!1,editedItem:{}}},computed:{formTitle:function(){var e=this.entity[0].toUpperCase()+this.entity.slice(1);return this.editingItem?"Edit "+e:"New "+e},withSearchSmallScreen:function(){return this.withSearch&&this.$vuetify.breakpoint.smAndDown},tallToolbar:function(){return{"pt-6":this.withSearchSmallScreen,"mb-12":this.withSearchSmallScreen}}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize(),this.tableHeaders=this.headers.concat(this.tableHeaders),this.editedItem=JSON.parse(JSON.stringify(this.defaultItem))},methods:{initialize:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=JSON,t.t1=JSON,t.next=5,e.service.index();case 5:t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),e.items=t.t0.parse.call(t.t0,t.t3),t.next=13;break;case 10:t.prev=10,t.t4=t["catch"](0),e.$emit("serverError",t.t4.response.data.err.message);case 13:e.loadingItems=!1;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},editItem:function(e){this.editedItem=JSON.parse(JSON.stringify(e)),this.editingItem=!0,this.formDialog=!0,this.$emit("clickedEditItem",e)},deleteItem:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingItems=!0,a.prev=1,a.next=4,t.service.delete(e._id);case 4:return a.t0=JSON,a.t1=JSON,a.next=8,t.service.index();case 8:a.t2=a.sent,a.t3=a.t1.stringify.call(a.t1,a.t2),t.items=a.t0.parse.call(a.t0,a.t3),t.$emit("deletedItem",e),a.next=17;break;case 14:a.prev=14,a.t4=a["catch"](1),t.$emit("serverError",a.t4.response.data.err.message);case 17:t.loadingItems=!1;case 18:case"end":return a.stop()}}),a,null,[[1,14]])})))()},close:function(){var e=this;this.formDialog=!1,setTimeout((function(){e.editedItem=JSON.parse(JSON.stringify(e.defaultItem)),e.editingItem=!1}),300),this.$emit("closedForm")},save:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.itemForm.validate()){t.next=4;break}return e.itemFormValid=!1,t.abrupt("return");case 4:if(e.savingItem=!0,!e.editingItem){t.next=11;break}return t.next=8,e.service.update(e.editedItem);case 8:e.$emit("updatedItem",e.editedItem),t.next=14;break;case 11:return t.next=13,e.service.create(e.editedItem);case 13:e.$emit("createdItem",e.editedItem);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 19:return t.prev=19,e.loadingItems=!0,t.t1=JSON,t.t2=JSON,t.next=25,e.service.index();case 25:t.t3=t.sent,t.t4=t.t2.stringify.call(t.t2,t.t3),e.items=t.t1.parse.call(t.t1,t.t4),t.next=33;break;case 30:t.prev=30,t.t5=t["catch"](19),e.$emit("serverError",t.t5.response.data.err.message);case 33:e.loadingItems=!1,e.savingItem=!1,e.close();case 36:case"end":return t.stop()}}),t,null,[[0,16],[19,30]])})))()},moveUpItem:function(e){var t=this.items.indexOf(e);t<1||(this.items=this.service.moveUp(t),this.$emit("movedUpItem",t))},moveDownItem:function(e){var t=this.items.indexOf(e);-1!==t&&t!==this.items.length-1&&(this.items=this.service.moveDown(t),this.$emit("movedDownItem",t))},showItem:function(e){this.$emit("showItem",e)}}}),Yt=Ht,$t=Object(v["a"])(Yt,Gt,jt,!1,null,null,null),zt=$t.exports;g()($t,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VDataTable:_t["a"],VDialog:w["a"],VDivider:We["a"],VForm:ve["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:Dt["a"],VToolbarTitle:kt["a"]});var Jt={name:"StationsTable",components:{CrudTable:zt},data:function(){return{service:q.getCrudServiceForResource("station"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"}],defaultItem:{code:"",name:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},qt=Jt,Wt=Object(v["a"])(qt,Bt,Pt,!1,null,null,null),Kt=Wt.exports;g()(Wt,{VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VTextField:ee["a"]});var Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CrudTable",{attrs:{entity:"train category","entity-name-plural":"train categories","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Category Code",rules:e.validationRules.code},model:{value:r.code,callback:function(t){e.$set(r,"code",t)},expression:"editedItem.code"}})],1),a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-text-field",{attrs:{label:"Category Name",rules:e.validationRules.name},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"editedItem.name"}})],1)],1)],1)]}}])})},Xt=[],Zt={name:"TrainCategoriesTable",components:{CrudTable:zt},data:function(){return{service:q.getCrudServiceForResource("train-category"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"}],defaultItem:{code:"",name:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},ea=Zt,ta=Object(v["a"])(ea,Qt,Xt,!1,null,null,null),aa=ta.exports;g()(ta,{VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VTextField:ee["a"]});var ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CrudTable",{attrs:{entity:"travel class","entity-name-plural":"travel classes","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"Class Code",rules:e.validationRules.code},model:{value:r.code,callback:function(t){e.$set(r,"code",t)},expression:"editedItem.code"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-text-field",{attrs:{label:"Class Name",rules:e.validationRules.name},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Ticket Discount (%)",rules:e.validationRules.discount},model:{value:r.discount,callback:function(t){e.$set(r,"discount",t)},expression:"editedItem.discount"}})],1)],1)],1)]}}])})},na=[],ia={name:"TravelClassesTable",components:{CrudTable:zt},data:function(){return{service:q.getCrudServiceForResource("travel-class"),headers:[{text:"Code",value:"code",align:"center"},{text:"Name",value:"name",align:"center"},{text:"Ticket Discount (%)",value:"discount",align:"center"}],defaultItem:{code:"",name:"",discount:""},validationRules:{code:[function(e){return!!e||"Code is required"},function(e){return e.length<5||"Code must have less than 5 characters"},function(e){return!e.includes(" ")||"Code must not contain spaces"},function(e){return e===e.toUpperCase()||"Code must contain capital letters only"}],name:[function(e){return!!e||"Name is required"}],discount:[function(e){return!!e||"Discount is required"},function(e){return/^\d+$/.test(e)||"Discount must be a number"},function(e){return e>=0&&e<=100||"Discount must be between 0 and 100"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},sa=ia,oa=Object(v["a"])(sa,ra,na,!1,null,null,null),la=oa.exports;g()(oa,{VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VTextField:ee["a"]});var ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CrudTable",{attrs:{entity:"traveler category","entity-name-plural":"traveler categories","sort-default-by":"name",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"items-per-page":5},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"7"}},[a("v-text-field",{attrs:{label:"Category Name",rules:e.validationRules.name},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-text-field",{attrs:{type:"number",label:"Ticket Discount (%)",rules:e.validationRules.discount},model:{value:r.discount,callback:function(t){e.$set(r,"discount",t)},expression:"editedItem.discount"}})],1)],1)],1)]}}])})},ua=[],da={name:"TravelerCategoryTable",components:{CrudTable:zt},data:function(){return{service:q.getCrudServiceForResource("traveler-category"),headers:[{text:"Name",value:"name",align:"center"},{text:"Ticket Discount (%)",value:"discount",align:"center"}],defaultItem:{name:"",discount:""},validationRules:{name:[function(e){return!!e||"Name is required"}],discount:[function(e){return!!e||"Discount is required"},function(e){return/^\d+$/.test(e)||"Discount must be a number"},function(e){return e>=0&&e<=100||"Discount must be between 0 and 100"}]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},ma=da,pa=Object(v["a"])(ma,ca,ua,!1,null,null,null),va=pa.exports;g()(pa,{VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VTextField:ee["a"]});var ha={name:"TheMiscellaneous",components:{TravelerCategoryTable:va,TravelClassesTable:la,TrainCategoriesTable:aa,StationsTable:Kt},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},ga=ha,fa=(a("a14c"),Object(v["a"])(ga,Ft,Mt,!1,null,null,null)),Sa=fa.exports;g()(fa,{VCol:T["a"],VContainer:Te["a"],VDivider:We["a"],VRow:V["a"]});var ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 px-7 pt-7 pb-1 ",attrs:{fluid:""}},[a("v-row",{staticClass:"ma-0 pa-0",attrs:{id:"students-container"}},[a("v-col",{staticClass:"pa-6 pt-5"},[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Students Administration")]),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",[a("StudentsTable",{on:{serverError:e.onServerError}})],1)],1)],1)],1)],1)},Aa=[],ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CrudTable",{attrs:{entity:"student","entity-name-plural":"students","sort-default-by":"cardId",headers:e.headers,service:e.service,"default-item":e.defaultItem,"validation-rules":e.validationRules,"with-search":""},on:{serverError:e.onServerError},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"First Name",rules:e.validationRules.firstName},model:{value:r.firstName,callback:function(t){e.$set(r,"firstName",t)},expression:"editedItem.firstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Last Name",rules:e.validationRules.lastName},model:{value:r.lastName,callback:function(t){e.$set(r,"lastName",t)},expression:"editedItem.lastName"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"National Identification Number (NIN)",rules:e.validationRules.nin},model:{value:r.nin,callback:function(t){e.$set(r,"nin",t)},expression:"editedItem.nin"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Expiration Date","prepend-icon":"mdi-calendar",rules:e.validationRules.expirationDate},model:{value:r.expirationDate,callback:function(t){e.$set(r,"expirationDate",t)},expression:"editedItem.expirationDate"}})],1)],1)],1)]}}])})},Ta=[],wa={name:"StudentsTable",components:{CrudTable:zt},props:{defaultExpirationDate:{type:String}},data:function(){return{service:q.getCrudServiceForResource("student"),headers:[{text:"Card ID",value:"cardId",align:"center"},{text:"First Name",value:"firstName",align:"center"},{text:"Last Name",value:"lastName",align:"center"},{text:"NIN",value:"nin",align:"center"},{text:"Creation Date",value:"creationDate",align:"center"}],defaultItem:{cardId:"",firstName:"",lastName:"",nin:"",creationDate:(new Date).toISOString().substr(0,10),expirationDate:this.defaultDate},validationRules:{cardId:[],firstName:[],lastName:[],nin:[],creationDate:[]}}},methods:{onServerError:function(e){this.$emit("serverError",e)}},computed:{defaultDate:function(){return this.defaultExpirationDate}}},Ea=wa,Ca=Object(v["a"])(Ea,ba,Ta,!1,null,null,null),xa=Ca.exports;g()(Ca,{VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VTextField:ee["a"]});var Ra={name:"TheStudents",components:{StudentsTable:xa},data:function(){return{}},methods:{onServerError:function(e){this.$emit("serverError",e)}}},_a=Ra,Da=(a("52a5"),Object(v["a"])(_a,ya,Aa,!1,null,"082e9d22",null)),ka=Da.exports;g()(Da,{VCol:T["a"],VContainer:Te["a"],VDivider:We["a"],VRow:V["a"]});var La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[a("CarLayoutDialog",{attrs:{state:e.printedCarLayoutDialog,"car-layout":e.printedCarLayout},on:{changeDialogState:e.onChangeDialogState}}),a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("Car Layouts Management")]),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},[a("CarLayoutsTable",{on:{serverError:e.onServerError,showCarLayout:e.onShowCarLayout}})],1)],1)],1)},Na=[],Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,loading:e.loadingCarLayouts,"sort-by":"name","no-results-text":"No car layouts have been found"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Car Layouts ")]),a("v-spacer"),e.$vuetify.breakpoint.mdAndUp?a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-3 pr-5 text-capitalize",attrs:{color:"primary",outlined:"",to:{name:"carLayoutsForm"}}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-draw")]),a("strong",[e._v("Create New Layout")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:"",to:{name:"carLayoutsForm"}}},[a("v-icon",[e._v("mdi-plus-circle")])],1)],1),e.$vuetify.breakpoint.smAndDown?a("v-row",{staticClass:"ma-0 pa-0"},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"accent"},on:{click:function(t){return e.showCarLayout(r)}}},[e._v(" mdi-eye ")]),a("router-link",{attrs:{to:{name:"carLayoutsEdit",params:{carLayoutName:r.name}}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"}},[e._v(" mdi-pen ")])],1),a("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}}])},[a("template",{slot:"no-data"},[a("span",[e._v(" No car layouts available to display ")])])],2)},Ua=[],Va={name:"CarLayoutsTable",data:function(){return{searchBar:"",tableHeaders:[{text:"Name",value:"name",align:"center"},{text:"Seating Capacity",value:"seatingCapacity",align:"center"},{text:"Width (cells)",value:"width",align:"center"},{text:"Height (cells)",value:"height",align:"center"},{text:"Cell Size (pixels)",value:"cellSize",align:"center"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],loadingCarLayouts:!0,service:q.getCrudServiceForResource("car-layout")}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.service.index();case 3:e.items=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 9:e.loadingCarLayouts=!1;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteItem:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingCarLayouts=!0,a.prev=1,a.next=4,t.service.delete(e._id);case 4:return a.next=6,t.service.index();case 6:t.items=a.sent,a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),t.$emit("serverError",a.t0.response.data.err.message);case 12:t.loadingCarLayouts=!1;case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},showCarLayout:function(e){this.$emit("showCarLayout",e)}}},Ia=Va,Fa=Object(v["a"])(Ia,Oa,Ua,!1,null,null,null),Ma=Fa.exports;g()(Fa,{VBtn:y["a"],VCol:T["a"],VDataTable:_t["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:Dt["a"],VToolbarTitle:kt["a"]});var Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:Math.max(300,e.responsiveCarLayout.sheetWidth+40)},model:{value:e.dialogState,callback:function(t){e.dialogState=t},expression:"dialogState"}},[a("v-card",{staticStyle:{overflow:"auto"}},[a("v-card-title",{staticClass:"headline mb-1"},[a("strong",[e._v(e._s(e.responsiveCarLayout.name))])]),a("v-divider"),a("v-card-text",{staticClass:"ma-0 pa-5",attrs:{align:"center"}},[a("CarLayoutDisabledSheet",{attrs:{"car-layout":e.responsiveCarLayout}})],1)],1)],1)},Pa=[],Ga=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.carLayout.sheetWidth,height:e.carLayout.sheetHeight,align:"left"}},[r("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.carLayout.width,"row-height":e.carLayout.cellSize,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0,isResizable:!1,maxRows:e.carLayout.height},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return r("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[r("v-img",{attrs:{src:a("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)}},[t.seatNumber?r("div",{staticClass:"text elementContainer"},[r("p",{staticClass:"ma-0 pa-0 centeredText"},[r("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])],1)})),1)],1)},ja=[],Ha=(a("c740"),a("b64b"),a("53ca")),Ya=a("b85c"),$a={getByName:function(e){return i.a.get(d.SERVER_URL+"/car-layout/name/"+e).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e},getPngNameFromElementType:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return"seat-left.png";case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return"seat-right.png";case d.LAYOUT.ELEMENTS.SEAT_UP:return"seat-up.png";case d.LAYOUT.ELEMENTS.SEAT_DOWN:return"seat-down.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT:return"reserved-seat-left.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT:return"reserved-seat-right.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP:return"reserved-seat-up.png";case d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN:return"reserved-seat-down.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT:return"selected-seat-left.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT:return"selected-seat-right.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP:return"selected-seat-up.png";case d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN:return"selected-seat-down.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT:return"reserving-seat-left.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT:return"reserving-seat-right.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP:return"reserving-seat-up.png";case d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN:return"reserving-seat-down.png";case d.LAYOUT.ELEMENTS.LUGGAGE_RACK:return"luggage-rack.png";case d.LAYOUT.ELEMENTS.TABLE:return"table.png";case d.LAYOUT.ELEMENTS.WALL:return"wall.png";default:return console.error("No image found for: "+e),"no-existing-png-for-this-type"}},transformFromMongo2FrontendModel:function(e){var t={};t.name=e.name,t.seatingCapacity=e.seatingCapacity,t.width=e.width,t.height=e.height,t.cellSize=e.cellSize,t.lastElementId=e.lastElementId,t.gridLayout=[];var a,r=Object(Ya["a"])(e.elements);try{for(r.s();!(a=r.n()).done;){var n=a.value;t.gridLayout.push(JSON.parse(JSON.stringify(n)))}}catch(i){r.e(i)}finally{r.f()}return t.sheetWidth=e.cellSize*e.width+d.LAYOUT.GRID_MARGIN*(e.width-1)+40,t.sheetHeight=e.cellSize*e.height+d.LAYOUT.GRID_MARGIN*(e.height-1)+40,t},rotateCarLayout:function(e){if("object"!==Object(Ha["a"])(e))return console.error("Car Layout to be rotated is not an object!"),{};if(!Object.keys(e).length)return{};if(e.width<=e.height)return e;var t,a={name:e.name,seatingCapacity:e.seatingCapacity,width:e.height,height:e.width,cellSize:e.cellSize,lastElementId:e.lastElementId,sheetWidth:e.cellSize*e.height+d.LAYOUT.GRID_MARGIN*(e.height-1)+40,sheetHeight:e.cellSize*e.width+d.LAYOUT.GRID_MARGIN*(e.width-1)+40,gridLayout:[]},r=Object(Ya["a"])(e.gridLayout);try{for(r.s();!(t=r.n()).done;){var n=t.value,i={i:n.i,x:e.height-n.h-n.y,y:n.x,w:n.h,h:n.w,type:n.type};if(n.seatNumber)switch(i.seatNumber=n.seatNumber,n.type){case d.LAYOUT.ELEMENTS.SEAT_LEFT:i.type=d.LAYOUT.ELEMENTS.SEAT_UP;break;case d.LAYOUT.ELEMENTS.SEAT_UP:i.type=d.LAYOUT.ELEMENTS.SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:i.type=d.LAYOUT.ELEMENTS.SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.SEAT_DOWN:i.type=d.LAYOUT.ELEMENTS.SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT:i.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP:i.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT:i.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN:i.type=d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT:i.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP:i.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT:i.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN:i.type=d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT:i.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP:i.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT:i.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN;break;case d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN:i.type=d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT;break;default:console.error("Unknown type for an element having a seat number!")}a.gridLayout.push(i)}}catch(s){r.e(s)}finally{r.f()}return a},fillCarLayoutWithColorfulSeats:function(e,t,a,r){var n,i=t.orderNo,s=a.orderNo,o=Object(Ya["a"])(e.seats);try{for(o.s();!(n=o.n()).done;){var l=n.value;if(l.reservations.length||l.selected){var c,u=!1,d=Object(Ya["a"])(l.reservations);try{for(d.s();!(c=d.n()).done;){var m=c.value,p=m.departureStation.orderNo,v=m.arrivalStation.orderNo;if(i<p&&s>p||i===p||i>p&&i<v){u=!0;break}}}catch(h){d.e(h)}finally{d.f()}u?this.changeSeatAppearanceToReserved(e,l,r):l.selected&&this.changeSeatAppearanceToSelectedOrReserving(e,l,r)}}}catch(h){o.e(h)}finally{o.f()}return e.carLayout},changeSeatAppearanceToSelectedOrReserving:function(e,t,a){var r=e.carLayout.gridLayout.findIndex((function(e){return e.seatNumber===t.number}));t.selectingUser!==a._id?e.carLayout.gridLayout[r].type=this.getReservingSeatTypeFromUnselected(e.carLayout.gridLayout[r].type):e.carLayout.gridLayout[r].type=this.getSelectedSeatTypeFromUnselected(e.carLayout.gridLayout[r].type)},changeSeatAppearanceToReserved:function(e,t,a){var r=e.carLayout.gridLayout.findIndex((function(e){return e.seatNumber===t.number}));e.carLayout.gridLayout[r].type=this.getCorrespondingReservedSeatAppearance(e.carLayout.gridLayout[r].type)},getCorrespondingReservedSeatAppearance:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN;default:return console.error("Unknown seat type to make an association"),null}},getSelectedSeatTypeFromUnselected:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.SELECTED_SEAT_DOWN;default:return console.error("This is not an unselected seat!"),null}},getReservingSeatTypeFromUnselected:function(e){switch(e){case d.LAYOUT.ELEMENTS.SEAT_LEFT:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT;case d.LAYOUT.ELEMENTS.SEAT_RIGHT:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT;case d.LAYOUT.ELEMENTS.SEAT_UP:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP;case d.LAYOUT.ELEMENTS.SEAT_DOWN:return d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN;default:return console.error("This is not a seat selected by someone else!"),null}}},za={name:"CarLayoutDisabledSheet",props:{carLayout:{type:Object,required:!0}},data:function(){return{gridMargin:d.LAYOUT.GRID_MARGIN}},computed:{gridMargins:function(){return[this.gridMargin,this.gridMargin]}},methods:{getPngNameFromElementType:function(e){return $a.getPngNameFromElementType(e)}}},Ja=za,qa=(a("21a9"),a("8dd9")),Wa=Object(v["a"])(Ja,Ga,ja,!1,null,"1ac778f3",null),Ka=Wa.exports;g()(Wa,{VImg:x["a"],VSheet:qa["a"]});var Qa={name:"CarLayoutDialog",components:{CarLayoutDisabledSheet:Ka},props:{state:{type:Boolean,required:!0},carLayout:{type:Object,required:!0}},data:function(){return{dialogState:!1}},computed:{responsiveCarLayout:function(){return this.$vuetify.breakpoint.xsOnly?$a.rotateCarLayout(this.carLayout):this.carLayout}},watch:{state:function(e){this.dialogState=e},dialogState:function(e){this.$emit("changeDialogState",e)}}},Xa=Qa,Za=Object(v["a"])(Xa,Ba,Pa,!1,null,"6d1a046e",null),er=Za.exports;g()(Za,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VDialog:w["a"],VDivider:We["a"]});var tr={name:"CarLayouts",components:{CarLayoutDialog:er,GrayContainer:st,CarLayoutsTable:Ma},data:function(){return{printedCarLayoutDialog:!1,printedCarLayout:{}}},methods:{onServerError:function(e){this.$emit("serverError",e)},onShowCarLayout:function(e){this.printedCarLayout=$a.transformFromMongo2FrontendModel(e),this.printedCarLayoutDialog=!0},onChangeDialogState:function(e){this.printedCarLayoutDialog=e}}},ar=tr,rr=Object(v["a"])(ar,La,Na,!1,null,null,null),nr=rr.exports;g()(rr,{VCol:T["a"],VDivider:We["a"],VRow:V["a"]});var ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GrayContainer",[r("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.saveLayoutDialog,callback:function(t){e.saveLayoutDialog=t},expression:"saveLayoutDialog"}},[r("v-card",{attrs:{loading:e.savingCarLayout}},[r("v-form",{ref:"saveLayoutForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.saveLayout(t)}},model:{value:e.saveLayoutFormValid,callback:function(t){e.saveLayoutFormValid=t},expression:"saveLayoutFormValid"}},[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Save Car Layout")])]),r("v-divider"),r("v-card-text",{staticClass:"px-7"},[r("v-container",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Layout Name",rules:e.layoutNameRules},model:{value:e.newLayoutName,callback:function(t){e.newLayoutName=t},expression:"newLayoutName"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",disabled:!e.saveLayoutFormValid||e.savingCarLayout,type:"submit"}},[e._v(" Save ")])],1)],1)],1)],1),r("v-row",{staticClass:"ma-0 pa-0"},[r("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.title)+" ")]),r("v-spacer"),e.$vuetify.breakpoint.smAndUp?r("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"carLayouts"}}},[r("strong",[e._v("Cancel")])]):e._e(),e.$vuetify.breakpoint.smAndUp?r("v-btn",{staticClass:"ma-0 mr-2",attrs:{color:"primary",outlined:"",disabled:!e.layoutPropFormValid},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[r("strong",[e._v("Save layout")])]):e._e(),e.$vuetify.breakpoint.xsOnly?r("v-btn",{attrs:{color:"error",icon:"",to:{name:"carLayouts"}}},[r("v-icon",[e._v("mdi-cancel")])],1):e._e(),e.$vuetify.breakpoint.xsOnly?r("v-btn",{attrs:{color:"primary",icon:""},on:{click:function(t){return e.changeSaveLayoutDialogVisibility()}}},[r("v-icon",[e._v("mdi-content-save")])],1):e._e()],1),r("v-divider",{staticClass:"my-4"}),r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-card",{staticClass:"fill-height",attrs:{loading:e.editingCarLayout&&e.loadingCarLayout}},[r("v-form",{ref:"layoutPropForm",attrs:{"lazy-validation":""},model:{value:e.layoutPropFormValid,callback:function(t){e.layoutPropFormValid=t},expression:"layoutPropFormValid"}},[r("v-card-title",[e._v(" Layout Properties ")]),r("v-card-text",{staticClass:"px-0"},[r("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Width (cells)",rules:e.carLayoutWidthRules,type:"number","prepend-icon":"mdi-arrow-left-right"},model:{value:e.carLayout.width,callback:function(t){e.$set(e.carLayout,"width",e._n(t))},expression:"carLayout.width"}}),r("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Height (cells)",rules:e.carLayoutHeightRules,type:"number","prepend-icon":"mdi-arrow-up-down"},model:{value:e.carLayout.height,callback:function(t){e.$set(e.carLayout,"height",e._n(t))},expression:"carLayout.height"}}),r("v-text-field",{staticClass:"ml-5 mr-12",attrs:{label:"Cell Size (pixels)",rules:e.cellSizeRules,type:"number","prepend-icon":"mdi-arrow-expand"},model:{value:e.carLayout.cellSize,callback:function(t){e.$set(e.carLayout,"cellSize",e._n(t))},expression:"carLayout.cellSize"}})],1)],1)],1)],1),r("v-col",{attrs:{cols:"12",md:"9"}},[r("v-card",{staticClass:"fill-height pb-0",attrs:{loading:e.editingCarLayout&&e.loadingCarLayout}},[r("v-form",{ref:"elementForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.addNewElement(t)}},model:{value:e.elementFormValid,callback:function(t){e.elementFormValid=t},expression:"elementFormValid"}},[r("v-card-title",[e._v(" New Layout Element ")]),r("v-card-text",{staticClass:"pb-0 mb-0"},[r("v-row",{staticClass:"ma-0 pa-0"},[r("v-col",{staticClass:"ma-0 pa-0 pr-12",attrs:{cols:"12",md:"6"}},[r("v-select",{staticClass:"mb-6",attrs:{items:e.layoutElementTypes,"menu-props":"auto",label:"Element Type","hide-details":"","prepend-icon":"mdi-shape-square-plus"},on:{change:function(t){return e.updateElementFields()}},model:{value:e.newElementType,callback:function(t){e.newElementType=t},expression:"newElementType"}}),r("v-text-field",{attrs:{disabled:!e.checkElementTypeIsSeat(e.newElementType),label:"Seat Number",rules:e.newSeatNumberRules,type:"number",color:"accent","prepend-icon":"mdi-counter"},model:{value:e.newElementSeatNumber,callback:function(t){e.newElementSeatNumber=e._n(t)},expression:"newElementSeatNumber"}}),r("v-sheet",{attrs:{color:"#F2F2F2"}},[r("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"ma-0 pa-0",attrs:{justify:"center",align:"center"}},[r("v-col",{staticClass:"ma-0 py-4",attrs:{cols:"2"}},[r("v-img",{attrs:{src:a("1771")("./"+e.newElementImagePath),alt:"Element Image",width:"30",transition:"scale-transition"}},[e.checkElementTypeIsSeat(e.newElementType)?r("div",{staticClass:"text elementContainer"},[r("p",{staticClass:"ma-0 pa-0 centeredText"},[r("strong",[e._v(e._s(e.newElementSeatNumber))])])]):e._e()])],1)],1)],1)],1),r("v-col",{staticClass:"pa-0 pr-4 mb-0",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Element Width (cells)",rules:e.newElementWidthRules,type:"number","prepend-icon":"mdi-arrow-left-right"},model:{value:e.newElementWidth,callback:function(t){e.newElementWidth=e._n(t)},expression:"newElementWidth"}}),r("v-text-field",{attrs:{disabled:e.shouldDisableNewElementHeight,label:"Element Height (cells)",rules:e.newElementHeightRules,type:"number","prepend-icon":"mdi-arrow-up-down"},model:{value:e.newElementHeight,callback:function(t){e.newElementHeight=e._n(t)},expression:"newElementHeight"}}),r("v-sheet",{attrs:{color:"#F2F2F2"}},[r("v-row",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"ma-0 pa-0",attrs:{justify:"center",align:"center"}},[r("v-col",{staticClass:"ma-0 py-4",attrs:{cols:"3"}},[r("v-img",{staticClass:"ml-5 ml-sm-7",attrs:{src:a("1771")("./"+e.newElementImagePath),alt:"Element Image",width:"30",transition:"scale-transition"}},[e.checkElementTypeIsSeat(e.newElementType)?r("div",{staticClass:"text elementContainer"},[r("p",{staticClass:"ma-0 pa-0 centeredText"},[r("strong",[e._v(e._s(e.newElementSeatNumber))])])]):e._e()])],1)],1)],1),r("v-row",{staticClass:"ma-0 pa-0"},[r("v-spacer"),r("v-btn",{staticClass:"mt-3 mt-md-6 mb-3 text-capitalize",attrs:{color:"accent",outlined:"",disabled:!e.elementFormValid||!e.getAvailablePosition()||e.seatNumberAlreadyTaken()},on:{click:function(t){return e.addNewElement()}}},[r("strong",[e._v("Add Element")])])],1)],1)],1)],1)],1)],1)],1)],1),r("v-card",{staticClass:"mt-3",staticStyle:{overflow:"auto"},attrs:{loading:e.editingCarLayout&&e.loadingCarLayout}},[r("v-card-title",[r("p",[e._v("Layout Result")]),r("v-spacer"),r("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(t){return e.removeAllElements()}}},[r("strong",[e._v("Remove all elements")])])],1),r("v-card-text",{attrs:{align:"center"}},[r("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.sheetWidth,height:e.sheetHeight,align:"left"}},[r("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.colNum,maxRows:e.maxRows,"row-height":e.rowHeight,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return r("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[r("v-menu",{attrs:{top:"","offset-x":!0,"nudge-top":t.h*e.carLayout.cellSize+(t.h-1)*e.gridMargin-10,"max-width":"20","open-on-click":""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[r("v-img",e._g({attrs:{src:a("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)}},i),[t.seatNumber?r("div",{staticClass:"text elementContainer"},[r("p",{staticClass:"ma-0 pa-0 centeredText"},[r("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])]}}],null,!0),model:{value:t.showDeleteIcon,callback:function(a){e.$set(t,"showDeleteIcon",a)},expression:"item.showDeleteIcon"}},[r("v-btn",{attrs:{icon:"","x-small":"",color:"error"},on:{click:function(a){return e.deleteElement(t.i)}}},[r("v-icon",[e._v("mdi-cancel")])],1)],1)],1)})),1)],1)],1)],1)],1)},sr=[],or=(a("8ba4"),a("7be8")),lr=a.n(or),cr={name:"CarLayoutsForm",components:{GrayContainer:st,GridLayout:lr.a.GridLayout,GridItem:lr.a.GridItem},data:function(){var e=this;return{service:q.getCrudServiceForResource("car-layout"),savingCarLayout:!1,loadingCarLayout:!0,saveLayoutDialog:!1,saveLayoutFormValid:!0,layoutPropFormValid:!0,editingCarLayout:!1,carLayout:{_id:null,name:"",seatingCapacity:0,width:150,height:30,cellSize:4,lastElementId:0,gridLayout:[]},newLayoutName:"",newElementType:d.LAYOUT.ELEMENTS.SEAT_LEFT,newElementWidth:6,newElementHeight:6,newElementSeatNumber:10,newElementImagePath:"seat-left.png",gridMargin:d.LAYOUT.GRID_MARGIN,elementFormValid:!0,layoutElementTypes:[{text:"Seat (left)",value:d.LAYOUT.ELEMENTS.SEAT_LEFT},{text:"Seat (right)",value:d.LAYOUT.ELEMENTS.SEAT_RIGHT},{text:"Seat (up)",value:d.LAYOUT.ELEMENTS.SEAT_UP},{text:"Seat (down)",value:d.LAYOUT.ELEMENTS.SEAT_DOWN},{text:"Luggage Rack",value:d.LAYOUT.ELEMENTS.LUGGAGE_RACK},{text:"Table",value:d.LAYOUT.ELEMENTS.TABLE},{text:"Wall",value:d.LAYOUT.ELEMENTS.WALL}],layoutNameRules:[function(e){return!!e||"Layout name is required"},function(e){return e.length>=3||"Layout name must have at least 3 characters"}],carLayoutWidthRules:[function(e){return/^\d+$/.test(e)||"Width must be an integer number"},function(e){return e>=10||"Width must be 10 or above"},function(e){return e<=1e3||"Width must be 1000 or under"}],carLayoutHeightRules:[function(e){return/^\d+$/.test(e)||"Height must be an integer number"},function(e){return e>=1||"Height must be 1 or above"},function(e){return e<=1e3||"Height must be 1000 or under"}],cellSizeRules:[function(e){return/^\d+$/.test(e)||"Size must be an integer number"},function(e){return e>=1||"Size must be 1 or above"},function(e){return e<=100||"Size must be 100 or under"}],newElementWidthRules:[function(e){return/^\d+$/.test(e)||"Width must be an integer number"},function(e){return e>=1||"Width must be 1 or above"},function(e){return e<=100||"Width must be 100 or under"}],newElementHeightRules:[function(e){return/^\d+$/.test(e)||"Height must be an integer number"},function(e){return e>=1||"Height must be 1 or above"},function(e){return e<=100||"Height must be 100 or under"}],newSeatNumberRules:[function(e){return/^\d+$/.test(e)||"Seat number must be an integer number"},function(e){return e>=1||"Seat number must be 1 or above"},function(e){return e<1e3||"Seat number must be under 1000"},function(t){return!e.seatNumberAlreadyTaken(t)||"Seat number already in use"}]}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("carLayoutsForm"!==e.$route.name){t.next=3;break}return e.loadingCarLayout=!1,t.abrupt("return");case 3:return e.editingCarLayout=!0,t.prev=4,t.next=7,$a.getByName(e.$route.params.carLayoutName);case 7:a=t.sent,e.carLayout._id=a._id,e.carLayout.name=a.name,e.carLayout.seatingCapacity=a.seatingCapacity,e.carLayout.width=a.width,e.carLayout.height=a.height,e.carLayout.cellSize=a.cellSize,e.carLayout.lastElementId=a.lastElementId,e.carLayout.gridLayout=[],r=Object(Ya["a"])(a.elements);try{for(r.s();!(n=r.n()).done;)i=n.value,e.carLayout.gridLayout.push(i)}catch(s){r.e(s)}finally{r.f()}t.next=25;break;case 20:return t.prev=20,t.t0=t["catch"](4),e.$emit("serverError",t.t0.response.data.err.message),t.next=25,e.$router.push({name:"carLayouts"});case 25:e.loadingCarLayout=!1;case 26:case"end":return t.stop()}}),t,null,[[4,20]])})))()},watch:{newElementWidth:function(e){this.checkElementTypeIsSquare(this.newElementType)&&(this.newElementHeight=e)}},computed:{title:function(){return this.editingCarLayout?"Edit Car Layout":"New Car Layout"},shouldDisableNewElementHeight:function(){return this.checkElementTypeIsSquare(this.newElementType)},gridMargins:function(){return[this.gridMargin,this.gridMargin]},sheetWidth:function(){return this.carLayout.cellSize*this.carLayout.width+this.gridMargin*(this.carLayout.width-1)+40},sheetHeight:function(){return this.carLayout.cellSize*this.carLayout.height+this.gridMargin*(this.carLayout.height-1)+40},colNum:function(){return Number.isInteger(this.carLayout.width)?this.carLayout.width:0},maxRows:function(){return Number.isInteger(this.carLayout.height)?this.carLayout.height:0},rowHeight:function(){return Number.isInteger(this.carLayout.cellSize)?this.carLayout.cellSize:0}},methods:{checkElementTypeIsSeat:function(e){return[d.LAYOUT.ELEMENTS.SEAT_LEFT,d.LAYOUT.ELEMENTS.SEAT_RIGHT,d.LAYOUT.ELEMENTS.SEAT_UP,d.LAYOUT.ELEMENTS.SEAT_DOWN].includes(e)},checkElementTypeIsSquare:function(e){return[d.LAYOUT.ELEMENTS.SEAT_LEFT,d.LAYOUT.ELEMENTS.SEAT_RIGHT,d.LAYOUT.ELEMENTS.SEAT_UP,d.LAYOUT.ELEMENTS.SEAT_DOWN,d.LAYOUT.ELEMENTS.LUGGAGE_RACK].includes(e)},updateElementFields:function(){this.newElementImagePath=this.getPngNameFromElementType(this.newElementType),this.checkElementTypeIsSquare(this.newElementType)&&(this.newElementHeight=this.newElementWidth)},getPngNameFromElementType:function(e){return $a.getPngNameFromElementType(e)},addNewElement:function(){var e=this.getAvailablePosition();this.carLayout.lastElementId++;var t={i:this.carLayout.lastElementId,x:e.x,y:e.y,w:this.newElementWidth,h:this.newElementHeight,type:this.newElementType};this.checkElementTypeIsSeat(t.type)&&(t.seatNumber=this.newElementSeatNumber,this.carLayout.seatingCapacity++),this.carLayout.gridLayout.push(t)},getAvailablePosition:function(){for(var e=this.carLayout.height-this.newElementHeight+1,t=this.carLayout.width-this.newElementWidth+1,a=0;a<e;a++)for(var r=0;r<t;r++){for(var n=!1,i=a;i<a+this.newElementHeight;i++){for(var s=r;s<r+this.newElementWidth;s++){var o,l=Object(Ya["a"])(this.carLayout.gridLayout);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(i>=c.y&&i<=c.y+c.h-1&&s>=c.x&&s<=c.x+c.w-1){n=!0;break}}}catch(u){l.e(u)}finally{l.f()}if(n)break}if(n)break}if(!n)return{x:r,y:a}}return null},deleteElement:function(e){var t=this.carLayout.gridLayout.findIndex((function(t){return t.i===e}));this.checkElementTypeIsSeat(this.carLayout.gridLayout[t].type)&&this.carLayout.seatingCapacity--,this.carLayout.gridLayout.splice(t,1)},removeAllElements:function(){this.carLayout.gridLayout.splice(0,this.carLayout.gridLayout.length),this.carLayout.seatingCapacity=0},seatNumberAlreadyTaken:function(){if(!this.checkElementTypeIsSeat(this.newElementType))return!1;var e,t=Object(Ya["a"])(this.carLayout.gridLayout);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.seatNumber===this.newElementSeatNumber)return!0}}catch(r){t.e(r)}finally{t.f()}return!1},saveLayout:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.saveLayoutForm.validate()){t.next=4;break}return e.saveLayoutFormValid=!1,t.abrupt("return");case 4:if(e.$refs.layoutPropForm.validate()){t.next=7;break}return e.layoutPropFormValid=!1,t.abrupt("return");case 7:a={_id:e.carLayout._id,name:e.newLayoutName,seatingCapacity:e.carLayout.seatingCapacity,width:e.carLayout.width,height:e.carLayout.height,cellSize:e.carLayout.cellSize,lastElementId:e.carLayout.lastElementId,elements:[]},r=Object(Ya["a"])(e.carLayout.gridLayout);try{for(r.s();!(n=r.n()).done;)i=n.value,s={i:i.i,x:i.x,y:i.y,w:i.w,h:i.h,type:i.type,seatNumber:i.seatNumber},"undefined"===typeof s.seatNumber&&delete s.seatNumber,a.elements.push(s)}catch(o){r.e(o)}finally{r.f()}if(e.savingCarLayout=!0,!e.editingCarLayout){t.next=18;break}return t.next=14,e.service.update(a);case 14:return t.next=16,e.$store.dispatch("showNotification",{msg:"Car Layout has been successfully saved."});case 16:t.next=22;break;case 18:return t.next=20,e.service.create(a);case 20:return t.next=22,e.$store.dispatch("showNotification",{msg:"New Car Layout has been successfully created."});case 22:return e.saveLayoutDialog=!1,t.next=25,e.$router.push({name:"carLayouts"});case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 30:e.savingCarLayout=!1;case 31:case"end":return t.stop()}}),t,null,[[0,27]])})))()},changeSaveLayoutDialogVisibility:function(){this.saveLayoutDialog=!this.saveLayoutDialog,this.saveLayoutDialog&&(this.newLayoutName=this.carLayout.name,this.$refs.saveLayoutForm&&this.$refs.saveLayoutForm.resetValidation())}}},ur=cr,dr=(a("7125"),a("b974")),mr=Object(v["a"])(ur,ir,sr,!1,null,"7b5aaf86",null),pr=mr.exports;g()(mr,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VDialog:w["a"],VDivider:We["a"],VForm:ve["a"],VIcon:C["a"],VImg:x["a"],VMenu:O["a"],VRow:V["a"],VSelect:dr["a"],VSheet:qa["a"],VSpacer:I["a"],VTextField:ee["a"]});var vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",{staticClass:"fill-height"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.title)+" ")]),a("v-spacer"),e.$vuetify.breakpoint.smAndUp?a("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"routes"}}},[a("strong",[e._v("Cancel")])]):e._e(),e.$vuetify.breakpoint.smAndUp?a("v-btn",{staticClass:"ma-0 mr-2",attrs:{color:"primary",outlined:"",disabled:!e.routeFormValid||e.savingRoute},on:{click:function(t){return e.saveRoute()}}},[a("strong",[e._v("Save route")])]):e._e(),e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{color:"error",icon:"",to:{name:"routes"}}},[a("v-icon",[e._v("mdi-cancel")])],1):e._e(),e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{color:"primary",icon:"",disabled:!e.routeFormValid||e.savingRoute},on:{click:function(t){return e.saveRoute()}}},[a("v-icon",[e._v("mdi-content-save")])],1):e._e()],1),a("v-divider",{staticClass:"my-4"}),a("v-card",[e.editingRoute&&e.loadingRouteDetails||e.savingRoute?a("v-progress-linear",{attrs:{indeterminate:""}}):e._e(),a("v-tabs",{attrs:{grow:"","center-active":""}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-clock-outline")]),e._v(" Time Details ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-city")]),e._v(" Stations ")],1),a("v-tab",[a("v-icon",{attrs:{left:""}},[e._v("mdi-train")]),e._v(" Train & Cars ")],1),a("v-tab-item",[a("v-form",{ref:"timeDetailsForm",attrs:{"lazy-validation":""},model:{value:e.timeDetailsFormValid,callback:function(t){e.timeDetailsFormValid=t},expression:"timeDetailsFormValid"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pl-7"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[a("v-text-field",{attrs:{value:"1",label:"Departure Day",type:"number","prepend-icon":"mdi-clock-start",disabled:""}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-dialog",{ref:"depTimeDialog",attrs:{"return-value":e.depTimeText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.depTimeText=t},"update:return-value":function(t){e.depTimeText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Departure Time","prepend-icon":"mdi-clock",readonly:"",rules:e.departureTimeRules},model:{value:e.depTimeText,callback:function(t){e.depTimeText=t},expression:"depTimeText"}},r))]}}]),model:{value:e.depTimeDialog,callback:function(t){e.depTimeDialog=t},expression:"depTimeDialog"}},[e.depTimeDialog?a("v-time-picker",{attrs:{"full-width":""},model:{value:e.depTimeText,callback:function(t){e.depTimeText=t},expression:"depTimeText"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.depTimeDialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.depTimeDialog.save(e.depTimeText)}}},[e._v("OK")])],1):e._e()],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[a("v-text-field",{attrs:{value:"1",label:"Arrival Day",type:"number","prepend-icon":"mdi-clock-end",rules:e.arrivalDayRules},model:{value:e.arrivalDay,callback:function(t){e.arrivalDay=e._n(t)},expression:"arrivalDay"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[a("v-dialog",{ref:"arrTimeDialog",attrs:{"return-value":e.arrTimeText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.arrTimeText=t},"update:return-value":function(t){e.arrTimeText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Arrival Time","prepend-icon":"mdi-clock",readonly:"",rules:e.arrivalTimeRules},model:{value:e.arrTimeText,callback:function(t){e.arrTimeText=t},expression:"arrTimeText"}},r))]}}]),model:{value:e.arrTimeDialog,callback:function(t){e.arrTimeDialog=t},expression:"arrTimeDialog"}},[e.arrTimeDialog?a("v-time-picker",{attrs:{"full-width":""},model:{value:e.arrTimeText,callback:function(t){e.arrTimeText=t},expression:"arrTimeText"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.arrTimeDialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.arrTimeDialog.save(e.arrTimeText)}}},[e._v(" OK ")])],1):e._e()],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-select",{attrs:{items:e.activeDaysItems,label:"Days of the week when the route is active",chips:"",multiple:"","deletable-chips":""},model:{value:e.route.activeWeekDays,callback:function(t){e.$set(e.route,"activeWeekDays",t)},expression:"route.activeWeekDays"}})],1)],1)],1)],1)],1)],1),a("v-tab-item",{staticClass:"pa-5"},[a("RouteStationsPanel",{attrs:{items:e.route.routeStations,"route-departure-time":e.depTimeText,"route-arrival-day":e.arrivalDay,"route-arrival-time":e.arrTimeText},on:{changedRouteStations:e.onChangeRouteStations}})],1),a("v-tab-item",{staticClass:"pa-5"},[a("TrainCarsPanel",{attrs:{carTemplates:e.route.carTemplates,train:e.route.train,"route-stations":e.route.routeStations},on:{changedCarTemplates:e.onChangeCarTemplates,changedTrain:e.onChangeTrain}})],1)],1)],1)],1)},hr=[],gr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pl-7"},[a("CrudTable",{attrs:{entity:"route station","entity-name-plural":"route stations","with-change-order":"",headers:e.headers,service:e.service,"default-item":e.defaultItem,"sort-default-by":"orderNo"},on:{serverError:e.onServerError,movedUpItem:e.notifyChangedRouteStations,movedDownItem:e.notifyChangedRouteStations,createdItem:e.notifyChangedRouteStations,updatedItem:e.notifyChangedRouteStations,deletedItem:e.notifyChangedRouteStations},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Station","prepend-icon":"mdi-city",rules:e.validationRules["station._id"]},model:{value:r.station._id,callback:function(t){e.$set(r.station,"_id",t)},expression:"editedItem.station._id"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{label:"Distance",type:"number",suffix:"Km",rules:e.validationRules.distance,disabled:r.isSource},model:{value:r.distance,callback:function(t){e.$set(r,"distance",t)},expression:"editedItem.distance"}})],1)],1),a("v-divider"),a("v-row",[a("v-col",[a("p",{staticClass:"title mb-n2"},[e._v(" Station Type ")]),a("v-radio-group",{attrs:{mandatory:!0},on:{change:function(t){return e.onRadioChange(r)}},model:{value:r.stationTypeRadio,callback:function(t){e.$set(r,"stationTypeRadio",t)},expression:"editedItem.stationTypeRadio"}},[a("v-radio",{attrs:{label:"The route's point of departure",value:"source"}}),a("v-radio",{attrs:{label:"An internal node of the route",value:"internal"}}),a("v-radio",{attrs:{label:"The route's point of arrival",value:"destination"}})],1)],1)],1),a("v-divider"),r.isSource?e._e():a("v-row",[a("v-col",{attrs:{cols:"5",sm:"4"}},[a("v-text-field",{attrs:{value:"1",label:"Arrival Day",type:"number","prepend-icon":"mdi-clock-end",rules:e.validationRules.arrivalDay},model:{value:r.arrivalDay,callback:function(t){e.$set(r,"arrivalDay",e._n(t))},expression:"editedItem.arrivalDay"}})],1),a("v-col",{attrs:{cols:"7",sm:"6"}},[a("TimePicker",{attrs:{name:"arrTimeRouteStation",label:"Arrival Time",requiredMessage:"Arrival time is required","initial-value":r.arrivalTimeText},on:{timePickerChanged:function(t){return e.onTimePickerChanged(r,t)}}})],1)],1),r.isDestination?e._e():a("v-row",[a("v-col",{attrs:{cols:"5",sm:"4"}},[a("v-text-field",{attrs:{value:"1",label:"Departure Day",type:"number","prepend-icon":"mdi-clock-start",rules:e.validationRules.departureDay},model:{value:r.departureDay,callback:function(t){e.$set(r,"departureDay",e._n(t))},expression:"editedItem.departureDay"}})],1),a("v-col",{attrs:{cols:"7",sm:"6"}},[a("TimePicker",{attrs:{name:"depTimeRouteStation",label:"Departure Time",requiredMessage:"Departure time is required","initial-value":r.departureTimeText},on:{timePickerChanged:function(t){return e.onTimePickerChanged(r,t)}}})],1)],1)],1)]}}])})],1)],1)},fr=[],Sr=(a("7db0"),a("25eb"),a("d3b7"),a("25f0"),a("2909")),yr=a("b9b9"),Ar=q.getCrudServiceForResource("station"),br={routeStations:[],init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.routeStations=Object(Sr["a"])(e);var t,a=Object(Ya["a"])(this.routeStations);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.isSource=!1,r.isDestination=!1,r.mongoId=r._id,r._id=r.orderNo,0===new Date(r.departureTime).getTime())r.isSource=!1,r.isDestination=!0,r.arrivalTimeText=yr(r.arrivalTime,"HH:MM"),r.departureTimeText="N/A",r.haltText="N/A",r.stationTypeRadio="destination",r.arrivalDay=1+Math.floor((new Date(r.arrivalTime)-new Date(2e3,0,1))/864e5),r.departureDay=1;else if(0===new Date(r.arrivalTime).getTime())r.isSource=!0,r.isDestination=!1,r.arrivalTimeText="N/A",r.departureTimeText=yr(r.departureTime,"HH:MM"),r.haltText="N/A",r.stationTypeRadio="source",r.arrivalDay=1,r.departureDay=1+Math.floor((new Date(r.departureTime)-new Date(2e3,0,1))/864e5);else{r.isSource=!1,r.isDestination=!1,r.arrivalTimeText=yr(r.arrivalTime,"HH:MM"),r.departureTimeText=yr(r.departureTime,"HH:MM");var n=Number.parseInt(r.halt/1e3/60/60),i=Number.parseInt(r.halt/1e3/60);Number.parseInt(r.halt/1e3);r.haltText=(n<10?"0":"")+n.toString()+":"+(i%60<10?"0":"")+(i%60).toString(),r.stationTypeRadio="internal",r.arrivalDay=1+Math.floor((new Date(r.arrivalTime)-new Date(2e3,0,1))/864e5),r.departureDay=1+Math.floor((new Date(r.departureTime)-new Date(2e3,0,1))/864e5)}}}catch(s){a.e(s)}finally{a.f()}},index:function(){return this.routeStations},show:function(e){return this.routeStations.find((function(t){return t._id===e}))},create:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(e)),r.orderNo=t.routeStations.length+1,r._id=r.orderNo,t.setStationTimestampsBasedOnTimeTexts(r),a.next=6,Ar.index();case 6:n=a.sent,i=n.find((function(e){return e._id===r.station._id})),r.station.name=i.name,t.routeStations.push(r),t.routeStations.sort((function(e,t){return e.orderNo-t.orderNo}));case 11:case"end":return a.stop()}}),a)})))()},update:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(e)),t.setStationTimestampsBasedOnTimeTexts(r),a.next=4,Ar.index();case 4:n=a.sent,i=n.find((function(e){return e._id===r.station._id})),r.station.name=i.name,s=t.routeStations.findIndex((function(e){return e.orderNo===r.orderNo})),t.routeStations[s]=r;case 9:case"end":return a.stop()}}),a)})))()},delete:function(e){var t=this.routeStations.findIndex((function(t){return t._id===e}));if(t>-1){this.routeStations.splice(t,1);for(var a=t;a<this.routeStations.length;a++)this.routeStations[a].orderNo--,this.routeStations[a]._id--}},moveUp:function(e){var t=this.routeStations[e];return this.routeStations.splice(e,1),this.routeStations.splice(e-1,0,t),this.routeStations[e-1].orderNo--,this.routeStations[e-1]._id--,this.routeStations[e].orderNo++,this.routeStations[e]._id++,this.routeStations},moveDown:function(e){var t=this.routeStations[e];return this.routeStations.splice(e,1),this.routeStations.splice(e+1,0,t),this.routeStations[e].orderNo--,this.routeStations[e]._id--,this.routeStations[e+1].orderNo++,this.routeStations[e+1]._id++,this.routeStations},setStationTimestampsBasedOnTimeTexts:function(e){if(e.isSource)e.arrivalTime=new Date(0),e.departureTime=this.getStandardDateFromDayTime(e.departureDay,e.departureTimeText),e.haltText="N/A",e.arrivalTimeText="N/A";else if(e.isDestination)e.arrivalTime=this.getStandardDateFromDayTime(e.arrivalDay,e.arrivalTimeText),e.departureTime=new Date(0),e.haltText="N/A",e.departureTimeText="N/A";else{e.arrivalTime=this.getStandardDateFromDayTime(e.arrivalDay,e.arrivalTimeText),e.departureTime=this.getStandardDateFromDayTime(e.departureDay,e.departureTimeText),e.halt=e.departureTime-e.arrivalTime;var t=Math.floor(e.halt/36e5),a=Math.floor(e.halt/6e4);e.haltText=(t<10?"0":"")+t.toString()+":"+(a%60<10?"0":"")+(a%60).toString()}},getStandardDateFromDayTime:function(e,t){var a=new Date(2e3,0,1);return a.setHours(parseInt(t.substr(0,2))),a.setMinutes(parseInt(t.substr(3,2))),a.setDate(e),a}},Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"timePickerDialog",attrs:{"return-value":e.timePickerText,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.timePickerText=t},"update:return-value":function(t){e.timePickerText=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:e.label,"prepend-icon":"mdi-clock",readonly:"",rules:e.timePickerTextRules},model:{value:e.timePickerText,callback:function(t){e.timePickerText=t},expression:"timePickerText"}},r))]}}]),model:{value:e.timePickerDialog,callback:function(t){e.timePickerDialog=t},expression:"timePickerDialog"}},[e.timePickerDialog?a("v-time-picker",{attrs:{"full-width":""},model:{value:e.timePickerText,callback:function(t){e.timePickerText=t},expression:"timePickerText"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.timePickerDialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timePickerDialog.save(e.timePickerText)}}},[e._v(" OK ")])],1):e._e()],1)},wr=[],Er={name:"TimePicker",props:{name:String,initialValue:String,label:String,requiredMessage:String},data:function(){return{timePickerDialog:!1,timePickerText:null,timePickerTextRules:[]}},mounted:function(){var e=this;this.timePickerTextRules.push((function(t){return!!t||e.requiredMessage})),this.initialValue&&"N/A"!==this.initialValue&&(this.timePickerText=this.initialValue)},watch:{initialValue:function(e){this.timePickerText=e&&"N/A"!==e?e:null},timePickerText:function(e){this.$emit("timePickerChanged",{name:this.name,newTime:e})}}},Cr=Er,xr=a("c964"),Rr=Object(v["a"])(Cr,Tr,wr,!1,null,"471f2937",null),_r=Rr.exports;g()(Rr,{VBtn:y["a"],VDialog:w["a"],VSpacer:I["a"],VTextField:ee["a"],VTimePicker:xr["a"]});var Dr={name:"RouteStationsPanel",components:{TimePicker:_r,CrudTable:zt},props:{items:Array,routeDepartureTime:String,routeArrivalDay:Number,routeArrivalTime:String},data:function(){return{service:br,stationService:q.getCrudServiceForResource("station"),headers:[{text:"No.",value:"orderNo",align:"center"},{text:"Station",value:"station.name",align:"center"},{text:"Distance (Km)",value:"distance",align:"center"},{text:"Arrival",value:"arrivalTimeText",align:"center"},{text:"Departure",value:"departureTimeText",align:"center"},{text:"Halt",value:"haltText",align:"center"}],defaultItem:{_id:"",mongoId:"",orderNo:"",station:{_id:"",name:""},distance:0,arrivalDay:1,departureDay:1,arrivalTimeText:null,departureTimeText:null,halt:0,isSource:!1,isDestination:!1,stationTypeRadio:"internal"},stationsSelectItems:[],validationRules:{"station._id":[function(e){return!!e||"Station is required"}],distance:[function(e){return!!e||0===e||"Distance is required"},function(e){return e>=0||"Distance must be 0 or greater than 0"}],arrivalDay:[function(e){return!!e||"Arrival day is required"},function(e){return e>0||"Arrival day must be greater than 0"}],departureDay:[function(e){return!!e||"Departure day is required"},function(e){return e>0||"Departure day must be greater than 0"}]}}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.service.init(e.items),t.next=3,e.stationService.index();case 3:a=t.sent,a.sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0})),a.forEach((function(t){e.stationsSelectItems.push({value:t._id,text:t.name})}));case 6:case"end":return t.stop()}}),t)})))()},methods:{onServerError:function(e){this.$emit("serverError",e)},notifyChangedRouteStations:function(){var e=this.service.index();this.$emit("changedRouteStations",e)},onTimePickerChanged:function(e,t){switch(t.name){case"arrTimeRouteStation":e.arrivalTimeText=t.newTime;break;case"depTimeRouteStation":e.departureTimeText=t.newTime;break}},onRadioChange:function(e){switch(e.stationTypeRadio){case"source":e.isSource=!0,e.isDestination=!1,e.distance=0,e.arrivalTimeText=null,e.departureTimeText=this.routeDepartureTime;break;case"internal":e.isSource=!1,e.isDestination=!1;break;case"destination":e.isSource=!1,e.isDestination=!0,e.departureTimeText=null,e.arrivalTimeText=this.routeArrivalTime,e.arrivalDay=this.routeArrivalDay;break}}}},kr=Dr,Lr=a("67b6"),Nr=a("43a6"),Or=Object(v["a"])(kr,gr,fr,!1,null,"079df9d6",null),Ur=Or.exports;g()(Or,{VCard:A["a"],VCardText:b["c"],VCol:T["a"],VContainer:Te["a"],VDivider:We["a"],VRadio:Lr["a"],VRadioGroup:Nr["a"],VRow:V["a"],VSelect:dr["a"],VTextField:ee["a"]});var Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pl-7"},[a("CarLayoutDialog",{attrs:{state:e.printedCarLayoutDialog,"car-layout":e.printedCarLayout},on:{changeDialogState:e.onChangeCarLayoutDialogState}}),a("v-card",{staticClass:"mb-5"},[a("v-card-title",[e._v(" Train Details ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{attrs:{items:e.trainCategoriesSelectItems,"menu-props":"auto",label:"Train Category","prepend-icon":"mdi-train-variant",rules:e.validationRules.trainCategory},model:{value:e.currentTrain.trainCategory,callback:function(t){e.$set(e.currentTrain,"trainCategory",t)},expression:"currentTrain.trainCategory"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:"Train Number","prepend-icon":"mdi-counter",type:"number",rules:e.validationRules.trainNumber},model:{value:e.currentTrain.number,callback:function(t){e.$set(e.currentTrain,"number",t)},expression:"currentTrain.number"}})],1)],1)],1)],1),a("CrudTable",{attrs:{entity:"car template","entity-name-plural":"car templates","with-change-order":"","with-show-item":"",headers:e.headers,service:e.carTemplatesService,"default-item":e.defaultCarTemplate,"change-order-color":"primary","sort-default-by":"orderNo"},on:{serverError:e.onServerError,movedUpItem:e.notifyChangedCarTemplates,movedDownItem:e.notifyChangedCarTemplates,createdItem:e.notifyChangedCarTemplates,updatedItem:e.notifyChangedCarTemplates,deletedItem:e.notifyChangedCarTemplates,showItem:e.showSelectedCarLayout},scopedSlots:e._u([{key:"form",fn:function(t){var r=t.editedItem;return[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Car Number","prepend-icon":"mdi-numeric",rules:e.validationRules.number},model:{value:r.number,callback:function(t){e.$set(r,"number",t)},expression:"editedItem.number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:e.travelClassesSelectItems,"menu-props":"auto",label:"Travel Class","prepend-icon":"mdi-seat-passenger",rules:e.validationRules["travelClass._id"]},model:{value:r.travelClass._id,callback:function(t){e.$set(r.travelClass,"_id",t)},expression:"editedItem.travelClass._id"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Departure Station","prepend-icon":"mdi-city",rules:e.validationRules["departureStation.station._id"]},model:{value:r.departureStation.station._id,callback:function(t){e.$set(r.departureStation.station,"_id",t)},expression:"editedItem.departureStation.station._id"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-select",{attrs:{items:e.stationsSelectItems,"menu-props":"auto",label:"Arrival Station","prepend-icon":"mdi-city",rules:e.validationRules["arrivalStation.station._id"]},model:{value:r.arrivalStation.station._id,callback:function(t){e.$set(r.arrivalStation.station,"_id",t)},expression:"editedItem.arrivalStation.station._id"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{items:e.carLayoutsSelectItems,"menu-props":"auto",label:"Car Layout","append-outer-icon":"mdi-eye",rules:e.validationRules["carLayout"]},on:{"click:append-outer":function(t){return e.showSelectedCarLayout(r)}},model:{value:r.carLayout,callback:function(t){e.$set(r,"carLayout",t)},expression:"editedItem.carLayout"}})],1)],1)],1)]}}])})],1)],1)},Ir=[],Fr=q.getCrudServiceForResource("station"),Mr=q.getCrudServiceForResource("travel-class"),Br={carTemplates:[],init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.carTemplates=Object(Sr["a"])(e);var t,a=Object(Ya["a"])(this.carTemplates);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.mongoId=r._id,r._id=r.orderNo}}catch(n){a.e(n)}finally{a.f()}},index:function(){return this.carTemplates},show:function(e){return this.carTemplates.find((function(t){return t._id===e}))},create:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(e)),r.orderNo=t.carTemplates.length+1,r._id=r.orderNo,a.next=5,t.sanitizeCarLayoutTravelClassStationsFields(r);case 5:t.carTemplates.push(r),t.carTemplates.sort((function(e,t){return e.orderNo-t.orderNo}));case 7:case"end":return a.stop()}}),a)})))()},update:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=JSON.parse(JSON.stringify(e)),a.next=3,t.sanitizeCarLayoutTravelClassStationsFields(r);case 3:n=t.carTemplates.findIndex((function(e){return e.orderNo===r.orderNo})),t.carTemplates[n]=r;case 5:case"end":return a.stop()}}),a)})))()},delete:function(e){var t=this.carTemplates.findIndex((function(t){return t._id===e}));if(t>-1){this.carTemplates.splice(t,1);for(var a=t;a<this.carTemplates.length;a++)this.carTemplates[a].orderNo--,this.carTemplates[a]._id--}},moveUp:function(e){var t=this.carTemplates[e];return this.carTemplates.splice(e,1),this.carTemplates.splice(e-1,0,t),this.carTemplates[e-1].orderNo--,this.carTemplates[e-1]._id--,this.carTemplates[e].orderNo++,this.carTemplates[e]._id++,this.carTemplates},moveDown:function(e){var t=this.carTemplates[e];return this.carTemplates.splice(e,1),this.carTemplates.splice(e+1,0,t),this.carTemplates[e].orderNo--,this.carTemplates[e]._id--,this.carTemplates[e+1].orderNo++,this.carTemplates[e+1]._id++,this.carTemplates},sanitizeCarLayoutTravelClassStationsFields:function(e){return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Fr.index();case 2:return a=t.sent,e.departureStation.station=a.find((function(t){return t._id===e.departureStation.station._id})),e.arrivalStation.station=a.find((function(t){return t._id===e.arrivalStation.station._id})),t.next=7,Mr.index();case 7:r=t.sent,e.travelClass=r.find((function(t){return t._id===e.travelClass._id}));case 9:case"end":return t.stop()}}),t)})))()}},Pr={name:"TrainCarsPanel",components:{CarLayoutDialog:er,CrudTable:zt},props:{carTemplates:Array,train:Object,routeStations:Array},data:function(){return{carTemplatesService:Br,stationsService:q.getCrudServiceForResource("station"),carLayoutsCrudService:q.getCrudServiceForResource("car-layout"),travelClassesService:q.getCrudServiceForResource("travel-class"),trainCategoriesService:q.getCrudServiceForResource("train-category"),headers:[{text:"No.",value:"orderNo",align:"center"},{text:"Number",value:"number",align:"center"},{text:"Travel Class",value:"travelClass.code",align:"center"},{text:"Departure Station",value:"departureStation.station.name",align:"center"},{text:"Arrival Station",value:"arrivalStation.station.name",align:"center"},{text:"Car Layout",value:"carLayout.name",align:"center"}],currentTrain:{number:"",trainCategory:{}},defaultCarTemplate:{_id:"",mongoId:"",orderNo:"",number:"",departureStation:{station:{_id:"",name:""}},arrivalStation:{station:{_id:"",name:""}},travelClass:{_id:"",code:""},carLayout:{}},stationsSelectItems:[],travelClassesSelectItems:[],carLayoutsSelectItems:[],trainCategoriesSelectItems:[],printedCarLayout:{},printedCarLayoutDialog:!1,validationRules:{"departureStation.station._id":[function(e){return!!e||"Departure station is required"}],"arrivalStation.station._id":[function(e){return!!e||"Arrival station is required"}],"travelClass._id":[function(e){return!!e||"Travel class is required"}],carLayout:[function(e){return Object.keys(e).length>0||"Car layout is required"}],number:[function(e){return!!e||"Car number is required"}],trainNumber:[function(e){return!!e||"Train number is required"},function(e){return e>0||"Train number must be greater than 0"}],trainCategory:[function(e){return Object.keys(e).length>0||"Train category is required"}]}}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.carTemplatesService.init(e.carTemplates),e.train&&(e.currentTrain=JSON.parse(JSON.stringify(e.train))),a=JSON.parse(JSON.stringify(e.routeStations)),a.sort((function(e,t){var a=e.station.name.toUpperCase(),r=t.station.name.toUpperCase();return a<r?-1:a>r?1:0})),a.forEach((function(t){e.stationsSelectItems.push({value:t.station._id,text:t.station.name})})),t.next=7,e.carLayoutsCrudService.index();case 7:return r=t.sent,r.sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0})),r.forEach((function(t){e.carLayoutsSelectItems.push({value:t,text:t.name})})),t.next=12,e.travelClassesService.index();case 12:return n=t.sent,n.forEach((function(t){e.travelClassesSelectItems.push({value:t._id,text:t.code})})),t.next=16,e.trainCategoriesService.index();case 16:i=t.sent,i.forEach((function(t){e.trainCategoriesSelectItems.push({value:t,text:t.code})}));case 18:case"end":return t.stop()}}),t)})))()},watch:{currentTrain:{deep:!0,handler:function(){this.$emit("changedTrain",this.currentTrain)}},routeStations:{deep:!0,handler:function(){var e=this,t=JSON.parse(JSON.stringify(this.routeStations));this.stationsSelectItems=[],t.sort((function(e,t){var a=e.station.name.toUpperCase(),r=t.station.name.toUpperCase();return a<r?-1:a>r?1:0})),t.forEach((function(t){e.stationsSelectItems.push({value:t.station._id,text:t.station.name})}))}}},methods:{onServerError:function(e){this.$emit("serverError",e)},notifyChangedCarTemplates:function(){var e=this.carTemplatesService.index();this.$emit("changedCarTemplates",e)},showSelectedCarLayout:function(e){e.carLayout&&Object.keys(e.carLayout).length&&e.carLayout.name&&(this.printedCarLayout=$a.transformFromMongo2FrontendModel(e.carLayout),this.printedCarLayoutDialog=!0)},onChangeCarLayoutDialogState:function(e){this.printedCarLayoutDialog=e}}},Gr=Pr,jr=Object(v["a"])(Gr,Vr,Ir,!1,null,"e3d46786",null),Hr=jr.exports;g()(jr,{VCard:A["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VContainer:Te["a"],VRow:V["a"],VSelect:dr["a"],VTextField:ee["a"]});var Yr={name:"RoutesForm",components:{TrainCarsPanel:Hr,RouteStationsPanel:Ur,GrayContainer:st},data:function(){return{service:Ct,routeFormValid:!0,timeDetailsFormValid:!0,editingRoute:!1,oldDbRoute:{},depTimeDialog:!1,depTimeText:null,arrivalDay:1,arrTimeDialog:!1,arrTimeText:null,savingRoute:!1,loadingRouteDetails:!0,activeDaysItems:[{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"},{value:0,text:"Sunday"}],route:{departureTime:null,arrivalTime:null,activeWeekDays:[],noOfGeneratedRides:0,generateRidesFrom:null,generateRidesUntil:null,train:null,carTemplates:[],routeStations:[]},arrivalDayRules:[function(e){return!!e||"Arrival day is required"},function(e){return e>0||"Arrival day must be greater than 0"}],departureTimeRules:[function(e){return!!e||"Departure time is required"}],arrivalTimeRules:[function(e){return!!e||"Arrival time is required"}]}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("routesCreate"!==e.$route.name){t.next=3;break}return e.loadingRouteDetails=!1,t.abrupt("return");case 3:if("routesEdit"!==e.$route.name){t.next=18;break}return r=a("b9b9"),e.editingRoute=!0,n=e.service.getUTCRouteName(e.$route.params.routeName),t.next=9,e.service.getByName(n);case 9:e.oldDbRoute=t.sent,e.depTimeText=r(e.oldDbRoute.departureTime,"HH:MM"),e.arrTimeText=r(e.oldDbRoute.arrivalTime,"HH:MM"),e.arrivalDay=new Date(e.oldDbRoute.arrivalTime).getDate(),e.route.activeWeekDays=JSON.parse(JSON.stringify(e.oldDbRoute.activeWeekDays)),e.route.routeStations=JSON.parse(JSON.stringify(e.oldDbRoute.routeStations)),e.route.carTemplates=JSON.parse(JSON.stringify(e.oldDbRoute.carTemplates)),e.route.train=JSON.parse(JSON.stringify(e.oldDbRoute.train)),e.loadingRouteDetails=!1;case 18:case"end":return t.stop()}}),t)})))()},watch:{},computed:{title:function(){return this.editingRoute?"Edit Route":"New Route"},departureDateTime:function(){if(!this.depTimeText)return null;var e=new Date(2e3,0,1),t=this.depTimeText.substr(0,2),a=this.depTimeText.substr(3,2);return e.setHours(t),e.setMinutes(a),e.getTime()},arrivalDateTime:function(){if(!this.arrTimeText)return null;var e=new Date(2e3,0,1),t=this.arrTimeText.substr(0,2),a=this.arrTimeText.substr(3,2);return e.setHours(t),e.setMinutes(a),e.setDate(e.getDate()+this.arrivalDay-1),e.getTime()},trainFormValid:function(){return!!this.route.train&&!!this.route.train.number&&this.route.train.number>0&&!!this.route.train.trainCategory&&!!this.route.train.trainCategory._id&&!!this.route.train.trainCategory.code}},methods:{saveRoute:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$refs.timeDetailsForm.validate()){t.next=4;break}return e.timeDetailsFormValid=!1,t.abrupt("return");case 4:if(e.route.departureTime=e.departureDateTime,e.route.arrivalTime=e.arrivalDateTime,e.route.activeWeekDays.sort((function(e,t){return e.value-t.value})),!(e.route.routeStations.length<2)){t.next=10;break}return e.$emit("serverError","This route needs at least 2 stations!"),t.abrupt("return");case 10:if(e.route.routeStations.forEach((function(e){e.stationId=e.station._id})),e.trainFormValid){t.next=14;break}return e.$emit("serverError","Train details not valid!"),t.abrupt("return");case 14:if(e.route.carTemplates.length){t.next=17;break}return e.$emit("serverError","This train needs at least one car!"),t.abrupt("return");case 17:if(e.route.train.trainCategoryId=e.route.train.trainCategory._id,e.route.carTemplates.forEach((function(e){e.departureStationId=e.departureStation.station._id,e.arrivalStationId=e.arrivalStation.station._id,e.travelClassId=e.travelClass._id,e.carLayoutId=e.carLayout._id})),e.route.generateRidesUntil&&(e.route.generateRidesUntil=new Date(e.route.generateRidesUntil),e.route.generateRidesUntil.setHours(23),e.route.generateRidesUntil.setMinutes(59),e.route.generateRidesUntil.setSeconds(59),e.route.generateRidesUntil.setMilliseconds(999),e.route.generateRidesUntil=e.route.generateRidesUntil.getTime()),e.savingRoute=!0,!e.editingRoute){t.next=29;break}return e.route._id=e.oldDbRoute._id,t.next=25,e.service.update(e.route);case 25:return t.next=27,e.$store.dispatch("showNotification",{msg:"Route has been successfully saved."});case 27:t.next=33;break;case 29:return t.next=31,e.service.create(e.route);case 31:return t.next=33,e.$store.dispatch("showNotification",{msg:"New Route has been successfully created."});case 33:return t.next=35,e.$router.push({name:"routes"});case 35:t.next=41;break;case 37:t.prev=37,t.t0=t["catch"](0),console.error(t.t0),e.$emit("serverError",t.t0.response.data.err.message);case 41:e.savingRoute=!1;case 42:case"end":return t.stop()}}),t,null,[[0,37]])})))()},onChangeRouteStations:function(e){this.route.routeStations=e},onChangeCarTemplates:function(e){this.route.carTemplates=e},onChangeTrain:function(e){this.route.train=e}}},$r=Yr,zr=a("8e36"),Jr=a("71a3"),qr=a("c671"),Wr=a("fe57"),Kr=Object(v["a"])($r,vr,hr,!1,null,"39e697e4",null),Qr=Kr.exports;g()(Kr,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCol:T["a"],VDialog:w["a"],VDivider:We["a"],VForm:ve["a"],VIcon:C["a"],VProgressLinear:zr["a"],VRow:V["a"],VSelect:dr["a"],VSpacer:I["a"],VTab:Jr["a"],VTabItem:qr["a"],VTabs:Wr["a"],VTextField:ee["a"],VTimePicker:xr["a"]});var Xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("GrayContainer",[a("v-row",{staticClass:"ma-0 pa-0 mb-3"},[a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.routeName))]),a("v-spacer"),e.$vuetify.breakpoint.smAndUp?a("v-btn",{staticClass:"ma-0 mr-4",attrs:{color:"error",outlined:"",to:{name:"routes"}}},[a("strong",[e._v("Back")])]):e._e(),e.$vuetify.breakpoint.xsOnly?a("v-btn",{attrs:{color:"error",icon:"",to:{name:"routes"}}},[a("v-icon",[e._v("mdi-cancel")])],1):e._e()],1),a("v-divider"),a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},[a("RidesTable",{attrs:{route:e.route},on:{serverError:e.onServerError}})],1)],1)],1)],1)},Zr=[],en=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.tableHeaders,items:e.items,search:e.searchBar,loading:e.loadingRides,"sort-by":"name","no-results-text":"No rides have been found for this route"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{class:e.tallToolbar,attrs:{flat:"",color:"white"}},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"ma-0 pa-0"},[a("v-toolbar-title",{staticClass:"headline indigo--text text-capitalize"},[e._v(" Rides ")]),a("v-spacer"),e.$vuetify.breakpoint.mdAndUp?a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}}):e._e(),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",[a("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"pl-2 pr-5 text-capitalize",attrs:{color:"primary",outlined:""}},r),[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-clock-outline")]),a("strong",[e._v("Add New Rides")])],1),a("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown,expression:"$vuetify.breakpoint.smAndDown"}],staticClass:"mt-n2 mr-n2",attrs:{color:"primary",icon:""}},r),[a("v-icon",[e._v("mdi-plus-circle")])],1)],1)]}}]),model:{value:e.formDialog,callback:function(t){e.formDialog=t},expression:"formDialog"}},[e.formDialog?a("v-card",{attrs:{loading:e.creatingRides}},[a("v-form",{ref:"itemForm",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.createRides(t)}},model:{value:e.itemFormValid,callback:function(t){e.itemFormValid=t},expression:"itemFormValid"}},[a("v-card-title",[a("span",{staticClass:"headline text-capitalize"},[e._v(" Create New Rides ")])]),a("v-divider"),a("v-card-text",{},[a("RidesForm",{on:{changedNoOfGeneratedRides:e.onChangeNoOfGeneratedRides,changedGenerateRidesFrom:e.onChangeGenerateRidesFrom,changedGenerateRidesUntil:e.onChangeGenerateRidesUntil}})],1),a("v-card-actions",{staticClass:"pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:e.closeForm}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.itemFormValid||e.creatingRides,type:"submit"}},[e._v(" Create ")])],1)],1)],1):e._e()],1)],1),e.$vuetify.breakpoint.smAndDown?a("v-row",{staticClass:"ma-0 pa-0"},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.searchBar,callback:function(t){e.searchBar=t},expression:"searchBar"}})],1):e._e()],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[a("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}}])},[a("template",{slot:"no-data"},[a("span",[e._v(" No rides available to display ")])])],2)},tn=[],an=a("b9b9"),rn={getRidesForRoute:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.get(d.SERVER_URL+"/route/name/"+e+"/rides").then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},createRides:function(e,t){var a=this;return Object(J["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",i.a.post(d.SERVER_URL+"/route/"+e+"/rides",{rideDates:t}).then((function(e){return e.data})).catch(a.throwServerError));case 1:case"end":return r.stop()}}),r)})))()},attachFrontendFields2MongoFormat:function(e){var t=e.arrivalDates.length-1;return e.depDateText=an(e.departureDates[0],"dd mmmm yyyy"),e.depTimeText=an(e.departureDates[0],"HH:MM"),e.arrDateText=an(e.arrivalDates[t],"dd mmmm yyyy"),e.arrTimeText=an(e.arrivalDates[t],"HH:MM"),e.carsCount=e.cars.length,e.routeStationsCount=e.routeStations.length,e},delete:function(e,t){return i.a.delete(d.SERVER_URL+"/route/name/"+e+"/ride/"+t).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-radio-group",{staticClass:"mt-0",model:{value:e.radioGenerateOption,callback:function(t){e.radioGenerateOption=t},expression:"radioGenerateOption"}},[a("v-radio",{staticClass:"mt-4",attrs:{value:"generateXFromY"},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[a("v-row",{staticClass:"ml-0",attrs:{align:"center"}},[a("span",[e._v("Create")]),a("v-text-field",{staticClass:"mx-3 my-0 py-0",staticStyle:{width:"50px"},attrs:{"hide-details":"",type:"number",rules:e.noOfGeneratedRidesRules},model:{value:e.noOfGeneratedRidesOption2,callback:function(t){e.noOfGeneratedRidesOption2=t},expression:"noOfGeneratedRidesOption2"}}),a("span",[e._v("daily rides starting from")]),a("v-dialog",{ref:"dialogStartDateOption2",attrs:{"return-value":e.dateStartStringOption2,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.dateStartStringOption2=t},"update:return-value":function(t){e.dateStartStringOption2=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({staticClass:"mx-3 my-0 py-0",staticStyle:{width:"100px"},attrs:{"hide-details":"",readonly:""},model:{value:e.dateStartStringOption2,callback:function(t){e.dateStartStringOption2=t},expression:"dateStartStringOption2"}},r))]}}]),model:{value:e.dialogStartDateOption2,callback:function(t){e.dialogStartDateOption2=t},expression:"dialogStartDateOption2"}},[a("v-date-picker",{attrs:{scrollable:"",min:(new Date).toISOString().substr(0,10)},model:{value:e.dateStartStringOption2,callback:function(t){e.dateStartStringOption2=t},expression:"dateStartStringOption2"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialogStartDateOption2=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogStartDateOption2.save(e.dateStartStringOption2)}}},[e._v("OK")])],1)],1)],1)],1)]},proxy:!0}])}),a("v-radio",{staticClass:"mt-4",attrs:{value:"generateBetween"},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[a("v-row",{staticClass:"ml-0",attrs:{align:"center"}},[a("span",[e._v("Create daily rides from")]),a("DatePicker",{attrs:{name:"startDateOption3","initial-value":(new Date).toISOString().substr(0,10),classes:"mx-3 mt-5 py-0","inline-style":"width: 90px;","min-date":(new Date).toISOString().substr(0,10)},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}}),a("span",[e._v("until")]),a("DatePicker",{attrs:{name:"endDateOption3","initial-value":e.dateEndStringOption3,classes:"mx-3 mt-5 py-0","inline-style":"width: 90px;","min-date":e.dateStartStringOption3},on:{datePickerChanged:function(t){return e.onDatePickerChanged(t)}}})],1)],1)]},proxy:!0}])})],1)},sn=[],on={name:"RidesForm",components:{DatePicker:ae},data:function(){return{radioGenerateOption:"generateXFromY",noOfGeneratedRidesOption2:10,dialogStartDateOption2:!1,dateStartStringOption2:(new Date).toISOString().substr(0,10),dateStartStringOption3:(new Date).toISOString().substr(0,10),dateEndStringOption3:(new Date).toISOString().substr(0,10),noOfGeneratedRidesRules:[function(e){return!!e||"Required"},function(e){return e>0||"Must be greater than 0"}]}},watch:{radioGenerateOption:function(e){switch(e){case"generateXFromY":this.$emit("changedNoOfGeneratedRides",parseInt(this.noOfGeneratedRidesOption2)),this.$emit("changedGenerateRidesFrom",this.dateStartStringOption2),this.$emit("changedGenerateRidesUntil",null);break;case"generateBetween":this.$emit("changedNoOfGeneratedRides",0),this.$emit("changedGenerateRidesFrom",this.dateStartStringOption3),this.$emit("changedGenerateRidesUntil",this.dateEndStringOption3);break}},noOfGeneratedRidesOption2:function(){this.$emit("changedNoOfGeneratedRides",parseInt(this.noOfGeneratedRidesOption2))},dateStartStringOption2:function(){this.$emit("changedGenerateRidesFrom",this.dateStartStringOption2)},dateStartStringOption3:function(){this.$emit("changedGenerateRidesFrom",this.dateStartStringOption3)},dateEndStringOption3:function(){this.$emit("changedGenerateRidesUntil",this.dateEndStringOption3)}},methods:{onDatePickerChanged:function(e){switch(e.name){case"startDateOption2":this.dateStartStringOption2=e.newDate;break;case"startDateOption3":this.dateStartStringOption3=e.newDate,new Date(this.dateStartStringOption3)>new Date(this.dateEndStringOption3)&&(this.dateEndStringOption3=this.dateStartStringOption3);break;case"endDateOption3":this.dateEndStringOption3=e.newDate;break}}}},ln=on,cn=Object(v["a"])(ln,nn,sn,!1,null,"7514431e",null),un=cn.exports;g()(cn,{VBtn:y["a"],VDatePicker:Z["a"],VDialog:w["a"],VRadio:Lr["a"],VRadioGroup:Nr["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"]});var dn={name:"RidesTable",components:{RidesForm:un},props:{route:Object},data:function(){return{searchBar:"",tableHeaders:[{text:"Departure Date",value:"depDateText",align:"left"},{text:"Departure Time",value:"depTimeText",align:"left"},{text:"Arrival Date",value:"arrDateText",align:"left"},{text:"Arrival Time",value:"arrTimeText",align:"left"},{text:"Number of Cars",value:"carsCount",align:"left"},{text:"Number of Stations",value:"routeStationsCount",align:"left"},{text:"Actions",value:"action",align:"center",sortable:!1}],items:[],service:rn,formDialog:!1,itemFormValid:!0,creatingRides:!1,utcRouteName:null,loadingRides:!0,generateOptions:{noOfGeneratedRides:0,generateRidesFrom:null,generateRidesUntil:null}}},computed:{tallToolbar:function(){return{"pt-6":this.$vuetify.breakpoint.smAndDown,"mb-11":this.$vuetify.breakpoint.smAndDown}}},created:function(){this.initialize(),this.setDateTimezonesMethods()},methods:{initialize:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.utcRouteName=Ct.getUTCRouteName(e.$route.params.routeName),t.next=4,e.service.getRidesForRoute(e.utcRouteName);case 4:a=t.sent,a.forEach((function(t){e.items.push(e.service.attachFrontendFields2MongoFormat(t))})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 11:e.loadingRides=!1;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteItem:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingRides=!0,a.prev=1,t.utcRouteName=Ct.getUTCRouteName(t.$route.params.routeName),a.next=5,t.service.delete(t.utcRouteName,e._id);case 5:return t.items=[],a.next=8,t.service.getRidesForRoute(t.utcRouteName);case 8:r=a.sent,r.forEach((function(e){t.items.push(t.service.attachFrontendFields2MongoFormat(e))})),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),t.$emit("serverError",a.t0.response.data.err.message);case 15:t.loadingRides=!1;case 16:case"end":return a.stop()}}),a,null,[[1,12]])})))()},createRides:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.creatingRides=!0,a=e.calculateRideDates(e.route.activeWeekDays,e.route.departureTime,e.route.arrivalTime,e.generateOptions.noOfGeneratedRides,e.generateOptions.generateRidesFrom,e.generateOptions.generateRidesUntil,e.route),t.next=5,e.service.createRides(e.route._id,a);case 5:return t.next=7,e.$store.dispatch("showNotification",{msg:"New Rides have been successfully created."});case 7:return e.items=[],t.next=10,e.service.getRidesForRoute(e.utcRouteName);case 10:r=t.sent,r.forEach((function(t){e.items.push(e.service.attachFrontendFields2MongoFormat(t))})),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 17:e.closeForm();case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},closeForm:function(){this.formDialog=!1,this.creatingRides=!1},onChangeNoOfGeneratedRides:function(e){this.generateOptions.noOfGeneratedRides=e},onChangeGenerateRidesFrom:function(e){this.generateOptions.generateRidesFrom=e?new Date(e).getTime():null},onChangeGenerateRidesUntil:function(e){this.generateOptions.generateRidesUntil=e?new Date(e).getTime():null},calculateRideDates:function(e,t,a,r,n,i,s){var o=[];r||(r=999999),n||(n=Date.now()),n=new Date(n),i||(i=new Date("1.1.9999")),i=new Date(i),i.setHours(23,59,59,999),t=new Date(t),a=new Date(a);var l=new Date;if(l.setHours(t.getHours(),t.getMinutes(),0,0),n.getDate()===l.getDate()&&n.getMonth()===l.getMonth()&&n.getFullYear()===l.getFullYear()){if(n<l&&e.includes(l.getDay())){var c=a.getDate()-t.getDate(),u=new Date(l);u.setHours(a.getHours(),a.getMinutes(),0,0),u.setDate(l.getDate()+c);var d=this.calculateDepartureDateTimesForRide(l,s.routeStations),m=this.calculateArrivalDateTimesForRide(u,s.routeStations);o.push({departureDates:d,arrivalDates:m})}n.setDate(n.getDate()+1)}var p=new Date(n);p.setHours(t.getHours(),t.getMinutes(),0,0);while(p<i&&r>0){if(e.includes(p.getDay())){var v=a.getDate()-t.getDate(),h=new Date(p);h.setHours(a.getHours(),a.getMinutes(),0,0),h.setDate(p.getDate()+v);var g=this.calculateDepartureDateTimesForRide(p,s.routeStations),f=this.calculateArrivalDateTimesForRide(p,s.routeStations);o.push({departureDates:g,arrivalDates:f}),r--}p.setDate(p.getDate()+1)}return o},calculateDepartureDateTimesForRide:function(e,t){var a=new Date(e),r=t.map((function(e){return new Date(e.departureTime)})),n=[];return r.forEach((function(e){if(e-new Date(0)!==0){var t=e.getDate()-1,r=new Date(a);r.setDate(a.getDate()+t),r.setHours(e.getHours(),e.getMinutes(),0,0),n.push(r)}else n.push(new Date(0))})),n},calculateArrivalDateTimesForRide:function(e,t){var a=new Date(e),r=t.map((function(e){return new Date(e.arrivalTime)})),n=[];return r.forEach((function(e){if(e-new Date(0)!==0){var t=e.getDate()-1,r=new Date(a);r.setDate(a.getDate()+t),r.setHours(e.getHours(),e.getMinutes(),0,0),n.push(r)}else n.push(new Date(0))})),n},setDateTimezonesMethods:function(){Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())},Date.prototype.isDstObserved=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()}}}},mn=dn,pn=Object(v["a"])(mn,en,tn,!1,null,null,null),vn=pn.exports;g()(pn,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VDataTable:_t["a"],VDialog:w["a"],VDivider:We["a"],VForm:ve["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"],VTextField:ee["a"],VToolbar:Dt["a"],VToolbarTitle:kt["a"]});var hn=a("b9b9"),gn={name:"TheRides",components:{RidesTable:vn,GrayContainer:st},data:function(){return{route:null}},methods:{onServerError:function(e){this.$emit("serverError",e)}},computed:{routeName:function(){if(!this.route)return"Rides";var e=this.route.routeStations,t=new Date(this.route.departureTime),a=new Date(this.route.arrivalTime),r=e.length-1;return e[0].station.name+" ("+hn(t,"HH:MM")+") - "+e[r].station.name+" ("+hn(a,"HH:MM")+")"}},mounted:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=Ct.getUTCRouteName(e.$route.params.routeName),t.next=4,Ct.getByName(a);case 4:e.route=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},fn=gn,Sn=Object(v["a"])(fn,Xr,Zr,!1,null,null,null),yn=Sn.exports;g()(Sn,{VBtn:y["a"],VCol:T["a"],VDivider:We["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"]});var An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[a("v-row",{staticClass:"ma-0 pa-0 mb-3"},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" Found Rides ")])]),e.$vuetify.breakpoint.mdAndUp?a("v-spacer"):e._e(),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[a("v-row",{attrs:{"no-gutters":"","justify-md":"center"}},[e.$vuetify.breakpoint.mdAndUp?a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[a("span",{domProps:{innerHTML:e._s(e.pageTitle)}})]):a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[a("span",{domProps:{innerHTML:e._s(e.pageTitle)}})])])],1),e.$vuetify.breakpoint.mdAndUp?a("v-spacer"):e._e(),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{"no-gutters":"","justify-md":"end"}},[a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString))])]):a("v-row",{attrs:{"no-gutters":"","justify-md":"end"}},[a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString))])])],1)],1),a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.searchingRides,expression:"searchingRides"}],attrs:{indeterminate:""}}),e.ridesNotFound?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[a("v-row",{attrs:{justify:"center"}},[e._v(" Uh Oh... ")])],1),a("v-card-subtitle",{staticClass:"pt-2 pb-5"},[a("v-row",{attrs:{justify:"center"}},[e._v(" No rides were found in order to match the given criteria. "),a("br"),e._v(" Try searching for another date or give up any optional filters. ")])],1)],1)],1)],1):e._e(),e._l(e.rides,(function(t){return a("RideCardSearchResult",{key:t._id,attrs:{ride:t,"departure-station":e.departureStation,"arrival-station":e.destinationStation,"via-station":e.viaStation,"tavel-class":e.travelClass}})}))],2)},bn=[],Tn=(a("4de4"),{getFilteredRides:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=d.SERVER_URL+"/ride/source/"+e.sourceId+"/destination/"+e.destinationId+"/date/"+e.date,r+=e.viaStationId?"/via/"+e.viaStationId:"",r+=e.travelClassId?"/travelClass/"+e.travelClassId:"",a.abrupt("return",i.a.get(r).then((function(e){return e.data})).catch(t.throwServerError));case 4:case"end":return a.stop()}}),a)})))()},getRideByDetails:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=d.SERVER_URL+"/ride/source/"+e.sourceId+"/destination/"+e.destinationId+"/date/"+e.date+"/departureTime/"+e.departureTime+"/arrivalTime/"+e.arrivalTime,a.abrupt("return",i.a.get(r).then((function(e){return e.data})).catch(t.throwServerError));case 2:case"end":return a.stop()}}),a)})))()},getCarsContainingSourceDestination:function(e,t,a){var r=e.routeStations.find((function(e){return e.station._id===t})),n=e.routeStations.find((function(e){return e.station._id===a}));return e.cars.filter((function(e){var t=e.departureStation.orderNo,a=e.arrivalStation.orderNo;return t<=r.orderNo&&r.orderNo<a&&t<n.orderNo&&n.orderNo<=a}))},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}}),wn={getStationByCode:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.get(d.SERVER_URL+"/station/code/"+e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},En={getTravelClassByCode:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",i.a.get(d.SERVER_URL+"/travel-class/code/"+e).then((function(e){return e.data})).catch(t.throwServerError));case 1:case"end":return a.stop()}}),a)})))()},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",[a("v-card",[a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h2",{staticClass:"title font-weight-bold"},[e._v("Departure")]),a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(e._s(e.departureDateText))]),a("h1",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.departureTime))])])],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Departure ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(e.departureDateText)+" - "+e._s(e.departureTime)+" ")])])],1)],1),a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("h1",{staticClass:"headline font-weight-bold"},[e._v(" "+e._s(e.distance)+" Km, "+e._s(e.spentTime)+" ")])]),a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("h1",{staticClass:"title font-weight-bold"},[e._v("Train "+e._s(e.train))])]),a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("h3",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Services: "+e._s(e.availableTravelClasses)+" ")])])],1)],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Arrival ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(e.arrivalDateText)+" - "+e._s(e.arrivalTime)+" ")])])],1)],1),a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h2",{staticClass:"title font-weight-bold"},[e._v("Arrival")])]),a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(e._s(e.arrivalDateText))])]),a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h1",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.arrivalTime))])])],1)],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h3",{staticClass:"subtitle-2 font-weight-bold mt-3"},[e._v(" Ride Details ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(" Train "+e._s(e.train)+" ")]),a("h2",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" "+e._s(e.distance)+" Km, "+e._s(e.spentTime))]),a("h3",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" Services: "+e._s(e.availableTravelClasses)+" ")])])],1)],1)],1)],1),a("v-divider"),a("v-expand-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.showRouteStations,expression:"showRouteStations"}],attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mt-4 mx-5 mb-2"},[e.showVerticalStepperRouteStations()?a("v-stepper",{attrs:{vertical:""}},[e._l(e.ride.routeStations,(function(t){return[a("v-stepper-step",{key:t._id,attrs:{complete:e.isStationStepComplete(t),step:""}},[e._v(" "+e._s(t.station.name)+" "),a("small",[e._v(e._s(e.showTimeForStationOnStepper(t)))])]),a("v-stepper-content",{key:t.orderNo,attrs:{step:""}})]}))],2):e._e(),e.showVerticalStepperRouteStations()?e._e():a("v-stepper",[a("v-stepper-header",[e._l(e.ride.routeStations,(function(t){return[a("v-stepper-step",{key:t._id,attrs:{complete:e.isStationStepComplete(t),step:""}},[e._v(" "+e._s(t.station.name)+" "),a("small",[e._v(e._s(e.showTimeForStationOnStepper(t)))])]),t.orderNo!==e.ride.routeStations.length?a("v-divider",{key:t.orderNo}):e._e()]}))],2)],1)],1)],1)],1),a("v-card-actions",{staticClass:"mt-1"},[a("v-spacer"),e.$vuetify.breakpoint.mdAndUp?a("v-btn",{staticClass:"body-1 text-capitalize px-5 mr-3",attrs:{color:"primary",outlined:""},on:{click:function(t){e.showRouteStations=!e.showRouteStations}}},[e._v(" "+e._s(e.showHideRouteStationsText)+" ")]):a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(t){e.showRouteStations=!e.showRouteStations}}},[a("v-icon",[e._v(e._s(e.showRouteStations?"mdi-chevron-up":"mdi-chevron-down"))])],1),e.$vuetify.breakpoint.mdAndUp?a("v-btn",{staticClass:"body-1 text-capitalize px-5",attrs:{color:"primary"},on:{click:e.bookRide}},[e._v("Book this ride")]):a("v-btn",{attrs:{icon:"",color:"accent"},on:{click:e.bookRide}},[a("v-icon",[e._v(" mdi-send ")])],1)],1)],1)],1)],1)},xn=[],Rn=(a("a15b"),a("6062"),a("3ca3"),a("ddb0"),a("b9b9")),_n={name:"RideCardSearchResult",props:{ride:Object,departureStation:Object,arrivalStation:Object,viaStation:Object,travelClass:Object},data:function(){return{departureDateText:"",departureDate:null,departureTime:"",arrivalDateText:"",arrivalTime:"",distance:0,spentTime:"",train:"",availableTravelClasses:"",showRouteStations:!1,departureStationOrderNo:0,arrivalStationOrderNo:0}},created:function(){var e=this,t=this.ride.routeStations.find((function(t){return t.station._id===e.departureStation._id})),a=this.ride.routeStations.find((function(t){return t.station._id===e.arrivalStation._id}));this.departureStationOrderNo=t.orderNo,this.arrivalStationOrderNo=a.orderNo;var r=t.orderNo-1,n=a.orderNo-1,i=new Date(this.ride.departureDates[r]),s=new Date(this.ride.arrivalDates[n]);this.departureDateText=Rn(i,"dd mmmm yyyy"),this.departureTime=Rn(new Date(t.departureTime),"HH:MM"),this.arrivalDateText=Rn(s,"dd mmmm yyyy"),this.arrivalTime=Rn(new Date(a.arrivalTime),"HH:MM"),this.departureDate=new Date(i),this.distance=a.distance-t.distance;var o=s-i,l=Number.parseInt(o/1e3/60/60),c=Number.parseInt(o/1e3/60);this.spentTime=l>0&&c%60>0?l+" h "+c%60+" min":l>0&&!(c%60)?l+" h":!l&&c%60>0?c%60+" min":"IMMEDIATELY",this.train=this.ride.route.train.trainCategory.code+" "+this.ride.route.train.number,this.availableTravelClasses=Object(Sr["a"])(new Set(this.ride.cars.map((function(e){return e.travelClass.name})))).join(", ")},computed:{showHideRouteStationsText:function(){return this.showRouteStations?"Hide Route Stations":"Show Route Stations"}},methods:{isStationStepComplete:function(e){return e.orderNo>=this.departureStationOrderNo&&e.orderNo<=this.arrivalStationOrderNo},fromTimeDateToTimeText:function(e){return Rn(new Date(e),"HH:MM")},showTimeForStationOnStepper:function(e){return 0===e.halt&&e.distance>0?this.fromTimeDateToTimeText(e.arrivalTime)+" (Arrival)":this.fromTimeDateToTimeText(e.departureTime)},showVerticalStepperRouteStations:function(){return this.$vuetify.breakpoint.smAndDown||this.$vuetify.breakpoint.mdOnly&&this.ride.routeStations.length>=7||this.$vuetify.breakpoint.lgOnly&&this.ride.routeStations.length>=12||this.$vuetify.breakpoint.xlOnly&&this.ride.routeStations.length>=18},bookRide:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",a+="from="+e.departureStation.code,a+="&to="+e.arrivalStation.code,a+="&date="+Rn(e.departureDate,"yyyy-mm-dd"),a+="&departureTime="+e.departureTime,a+="&arrivalTime="+e.arrivalTime,t.next=8,e.$router.push({name:"rideBooking",params:{details:a}});case 8:case"end":return t.stop()}}),t)})))()}}},Dn=_n,kn=a("0789"),Ln=a("7e85"),Nn=a("e516"),On=a("9c54"),Un=a("56a4"),Vn=Object(v["a"])(Dn,Cn,xn,!1,null,"106c33f3",null),In=Vn.exports;g()(Vn,{VBtn:y["a"],VCard:A["a"],VCardActions:b["a"],VCardText:b["c"],VCol:T["a"],VDivider:We["a"],VExpandTransition:kn["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"],VStepper:Ln["a"],VStepperContent:Nn["a"],VStepperHeader:On["a"],VStepperStep:Un["a"]});var Fn=a("72bf"),Mn=a("b9b9"),Bn={name:"RideSearchResultsPage",components:{RideCardSearchResult:In,GrayContainer:st},data:function(){return{rides:[],ridesNotFound:!1,departureStation:null,destinationStation:null,rideDateString:"",viaStation:null,travelClass:null,searchingRides:!0}},computed:{pageTitle:function(){if(!this.departureStation||!this.destinationStation||!this.rideDateString)return"";var e="";return e+='<em style="color: darkblue">'+this.departureStation.name+'</em> <i class="fa fa-long-arrow-right"></i> <em style="color: darkblue">'+this.destinationStation.name+"</em>",this.$vuetify.breakpoint.mdOnly||this.$vuetify.breakpoint.xsOnly?e+="<br/>":e+=this.viaStation||this.travelClass?", ":"",e+=this.viaStation?'via <em style="color: darkblue">'+this.viaStation.name+"</em> ":"",e+=this.travelClass?"<em>("+this.travelClass.name+")</em>":"",e}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=Fn.parse("?"+e.$route.params.filters),![a.from,a.to,a.date].includes(void 0)){t.next=5;break}return t.next=5,e.$router.push({name:"pageNotFound",params:{}});case 5:return t.next=7,wn.getStationByCode(a.from);case 7:return e.departureStation=t.sent,t.next=10,wn.getStationByCode(a.to);case 10:if(e.destinationStation=t.sent,e.rideDateString=Mn(new Date(a.date),"dd mmmm yyyy"),!a.via){t.next=18;break}return t.next=15,wn.getStationByCode(a.via);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=null;case 19:if(e.viaStation=t.t0,!a.class){t.next=26;break}return t.next=23,En.getTravelClassByCode(a.class);case 23:t.t1=t.sent,t.next=27;break;case 26:t.t1=null;case 27:return e.travelClass=t.t1,r=new Date,n=new Date(a.date.substr(0,4),parseInt(a.date.substr(5,2))-1,a.date.substr(8,2)),r.getDate()===n.getDate()&&r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()&&(n.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),0),e.rideDateString="For the next 24h"),i={sourceId:e.departureStation._id,destinationId:e.destinationStation._id,date:n.getTime(),viaStationId:e.viaStation?e.viaStation._id:null,travelClassId:e.travelClass?e.travelClass._id:null},t.next=34,Tn.getFilteredRides(i);case 34:e.rides=t.sent,e.ridesNotFound=0===e.rides.length,t.next=42;break;case 38:t.prev=38,t.t2=t["catch"](0),e.ridesNotFound=!0,e.$emit("serverError",t.t2.response.data.err.message);case 42:e.searchingRides=!1;case 43:case"end":return t.stop()}}),t,null,[[0,38]])})))()}},Pn=Bn,Gn=Object(v["a"])(Pn,An,bn,!1,null,"0b076fab",null),jn=Gn.exports;g()(Gn,{VCard:A["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:T["a"],VProgressLinear:zr["a"],VRow:V["a"],VSpacer:I["a"]});var Hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[e.rideNotFound?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[a("v-row",{attrs:{justify:"center"}},[e._v(" Uh Oh... ")])],1),a("v-card-subtitle",{staticClass:"pt-2 pb-5"},[a("v-row",{attrs:{justify:"center"}},[e._v(" No ride was found in order to match the given criteria. "),a("br"),e._v(" Try searching for another date or give up any optional filters. ")])],1)],1)],1)],1):e._e(),e.rideFound?a("div",[a("v-row",{staticClass:"ma-0 pa-0 mb-3"},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" Ride Booking ")])]),e.$vuetify.breakpoint.mdAndUp?a("v-spacer"):e._e(),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[a("v-row",{attrs:{"no-gutters":"","justify-md":"center"}},[e.$vuetify.breakpoint.smAndUp?a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[a("span",{domProps:{innerHTML:e._s(e.pageTitle)}})]):a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[a("span",{domProps:{innerHTML:e._s(e.pageTitle)}})])])],1),e.$vuetify.breakpoint.mdAndUp?a("v-spacer"):e._e(),a("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"auto"}},[a("v-row",{attrs:{"no-gutters":"","justify-md":"end"}},[e.$vuetify.breakpoint.smAndUp?a("h1",{staticClass:"heading font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString)+" ")]):a("h1",{staticClass:"headline font-weight-black mt-2 pa-0"},[e._v(" "+e._s(e.rideDateString)+" ")])])],1)],1),a("v-stepper",{model:{value:e.currentStepperStep,callback:function(t){e.currentStepperStep=t},expression:"currentStepperStep"}},[a("v-stepper-header",[e._l(e.formHeaderSteps,(function(t){return[a("v-stepper-step",{key:t.orderNo,attrs:{complete:t.orderNo<e.currentStepperStep,step:t.orderNo}},[e._v(" "+e._s(t.title)+" ")]),t.orderNo!==e.formHeaderSteps.length?a("v-divider",{key:t.title}):e._e()]}))],2),a("v-progress-linear",{attrs:{indeterminate:e.waitingResponseFromServer,color:e.waitingResponseFromServer?"primary":"rgba(0, 0, 0, 0.0)",height:"4"}}),a("v-stepper-items",[a("v-stepper-content",{staticClass:"pt-4",attrs:{step:e.formHeaderSteps[0].orderNo}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{"no-gutters":e.$vuetify.breakpoint.xsOnly}},[a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{icon:"",color:"accent",disabled:0===e.currentDisplayedCarIndex},on:{click:function(t){return e.decrementAvailableCarIfPossible()}}},[a("v-icon",[e._v("mdi-chevron-left")])],1)],1),a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{"no-gutters":"",justify:"center"}},[e.availableCarsExist?a("h2",{staticClass:"title font-weight-black"},[e._v(" Car "+e._s(e.availableCars[e.currentDisplayedCarIndex].number)+" ")]):e._e()]),e.availableCarsExist?a("v-row",{attrs:{"no-gutters":"",justify:"center"}},[e._v(" "+e._s(e.availableCars[e.currentDisplayedCarIndex].travelClass.name)+" ")]):e._e()],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{icon:"",color:"accent",disabled:e.currentDisplayedCarIndex===this.availableCars.length-1},on:{click:function(t){return e.incrementAvailableCarIfPossible()}}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1)],1),a("v-spacer")],1),a("v-row",{staticClass:"mt-3",staticStyle:{overflow:"auto"},attrs:{"no-gutters":""}},[a("v-spacer"),a("v-col",{staticStyle:{position:"relative"},attrs:{cols:"auto"}},[a("v-overlay",{attrs:{"z-index":"1",opacity:"0.15",value:e.waitingResponseFromServer,absolute:""}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"30",width:"3",color:"primary"}})],1),e.availableCarsExist?a("CarLayoutWithSelectableSeats",{attrs:{"car-layout":e.currentDisplayedCarLayout},on:{toggledSeat:e.toggleSelectedSeat}}):e._e()],1),a("v-spacer")],1),a("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[a("v-spacer"),e.$vuetify.breakpoint.smAndUp?a("v-btn",{attrs:{color:"primary",disabled:e.seatsNotPicked},on:{click:function(t){e.currentStepperStep++}}},[e._v(" Next Step ")]):a("v-btn",{attrs:{icon:"",color:"primary",outlined:"",disabled:e.seatsNotPicked},on:{click:function(t){e.currentStepperStep++}}},[a("v-icon",[e._v(" mdi-chevron-right ")])],1)],1)],1),a("v-stepper-content",{attrs:{step:e.formHeaderSteps[1].orderNo}},[a("PassengerTypesFormStep",{attrs:{"ride-distance":e.distance,"available-cars":e.availableCars,tickets:e.requestedTickets},on:{changedTickets:e.onChangeTickets,nextBookingStep:e.onNextBookingStep,previousBookingStep:e.onPreviousBookingStep}})],1),a("v-stepper-content",{attrs:{step:e.formHeaderSteps[2].orderNo}},[a("ConfirmationBookingStep",{attrs:{"paypal-props":e.paypalData,"available-cars":e.availableCars,tickets:e.requestedTickets,ride:e.ride,"departure-station":e.departureStation,"destination-station":e.destinationStation,"departure-time-text":e.departureTimeText,"arrival-time-text":e.arrivalTimeText,"ride-date":e.rideDateString},on:{nextBookingStep:e.onNextBookingStep,previousBookingStep:e.onPreviousBookingStep,paymentCompleted:e.onPaymentCompleted}})],1),a("v-stepper-content",{attrs:{step:e.formHeaderSteps[3].orderNo}},[e.finishedOrder?a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("h3",{staticClass:"headline font-weight-bold"},[e._v(" Thank you for choosing OTTR! ")]),a("p",{staticClass:"mt-4",staticStyle:{"max-width":"600px"}},[e._v(" You order "),a("strong",[e._v("#"+e._s(e.finishedOrder.number))]),e._v(" has been placed successfully and we've sent you an SMS with the tickets' details at the phone number provided in your account details. ")]),a("p",{staticClass:"mt-2",staticStyle:{"max-width":"600px"}},[e._v(" Please enjoy your ride, and let us now if there's anything else you need to know about our services by sending an e-mail to "),a("a",{attrs:{href:"mailto:ottr-contact@gmail.com"}},[e._v("ottr-contact@gmail.com")])]),a("p",[e._v(" Have a nice ride! ")])])],1):e._e()],1)],1)],1)],1):e._e()],1)},Yn=[],$n={selectSeat:function(e){return i.a.patch(d.SERVER_URL+"/seat/"+e+"/selected/true").then((function(e){return e.data})).catch(this.throwServerError)},deselectSeat:function(e){return i.a.patch(d.SERVER_URL+"/seat/"+e+"/selected/false").then((function(e){return e.data})).catch(this.throwServerError)},preserveSeat:function(e){return i.a.patch(d.SERVER_URL+"/seat/"+e+"/preserve").then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},zn={getConfig:function(){return i.a.get(d.SERVER_URL+"/config").then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},Jn={placeOrder:function(e){return i.a.post(d.SERVER_URL+"/order",e).then((function(e){return e.data})).catch(this.throwServerError)},getOrdersForUser:function(e){return i.a.get(d.SERVER_URL+"/order/user/"+e).then((function(e){return e.data})).catch(this.throwServerError)},throwServerError:function(e){if(e.response)throw e;throw e.response={data:{err:{message:d.ERRORS.UNREACHABLE_SERVER}}},e}},qn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-sheet",{staticClass:"pa-5",staticStyle:{background:"#F2F2F2"},attrs:{width:e.carLayout.sheetWidth,height:e.carLayout.sheetHeight,align:"left"}},[r("grid-layout",{attrs:{layout:e.carLayout.gridLayout,"col-num":e.carLayout.width,"row-height":e.carLayout.cellSize,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!1,margin:e.gridMargins,"use-css-transforms":!0,"prevent-collision":!0,isResizable:!1,maxRows:e.carLayout.height},on:{"update:layout":function(t){return e.$set(e.carLayout,"gridLayout",t)}}},e._l(e.carLayout.gridLayout,(function(t){return r("grid-item",{key:t.i,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[r("v-img",{class:{"hoverable-item":t.seatNumber&&!e.isReserved(t.type)&&!e.isReserving(t.type)},attrs:{src:a("1771")("./"+e.getPngNameFromElementType(t.type)),alt:"Element Image",transition:"scale-transition",width:t.w*e.carLayout.cellSize+e.gridMargin*(t.w-1),height:t.h*e.carLayout.cellSize+e.gridMargin*(t.h-1)},on:{click:function(a){return e.toggleSeat(t)}}},[t.seatNumber?r("div",{staticClass:"text elementContainer"},[r("p",{staticClass:"ma-0 pa-0 centeredText"},[r("strong",[e._v(e._s(t.seatNumber))])])]):e._e()])],1)})),1)],1)},Wn=[],Kn={name:"CarLayoutWithSelectableSeats",props:{carLayout:{type:Object,required:!0}},data:function(){return{gridMargin:d.LAYOUT.GRID_MARGIN}},computed:{gridMargins:function(){return[this.gridMargin,this.gridMargin]}},methods:{getPngNameFromElementType:function(e){return $a.getPngNameFromElementType(e)},toggleSeat:function(e){e.seatNumber&&(this.isReserved(e.type)||this.isReserving(e.type)||this.$emit("toggledSeat",e.seatNumber))},isReserved:function(e){return[d.LAYOUT.ELEMENTS.RESERVED_SEAT_LEFT,d.LAYOUT.ELEMENTS.RESERVED_SEAT_RIGHT,d.LAYOUT.ELEMENTS.RESERVED_SEAT_UP,d.LAYOUT.ELEMENTS.RESERVED_SEAT_DOWN].includes(e)},isReserving:function(e){return[d.LAYOUT.ELEMENTS.RESERVING_SEAT_LEFT,d.LAYOUT.ELEMENTS.RESERVING_SEAT_RIGHT,d.LAYOUT.ELEMENTS.RESERVING_SEAT_UP,d.LAYOUT.ELEMENTS.RESERVING_SEAT_DOWN].includes(e)}}},Qn=Kn,Xn=(a("721d"),Object(v["a"])(Qn,qn,Wn,!1,null,"49e4895e",null)),Zn=Xn.exports;g()(Xn,{VImg:x["a"],VSheet:qa["a"]});var ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{staticClass:"mb-5",attrs:{"no-gutters":""}},[a("h2",{staticClass:"display-1 font-weight-medium"},[e._v(" Choose the passenger category ")])]),a("v-row",{attrs:{"no-gutters":""}},e._l(e.carsWithRequestedSeats,(function(t){return a("v-col",{key:t._id,attrs:{cols:"12",sm:"6",md:"4"}},[a("v-row",[a("v-col",[a("h3",{staticClass:"headline font-weight-medium"},[e._v(" Car "+e._s(t.number)+" "),a("em",[e._v("("+e._s(t.travelClass.name)+")")])]),e._l(e.requestedTicketsOfCar(t),(function(t){return a("v-row",{key:t.seat._id,attrs:{"no-gutters":"",align:"center"}},[a("p",{staticClass:"title font-weight-medium ml-5 mt-3"},[e._v(" Seat "+e._s(t.seat.number)+": ")]),a("v-select",{staticClass:"ml-3",staticStyle:{"max-width":"100px"},attrs:{items:e.travelerCategoriesSelectItems,"menu-props":"auto",rules:e.travelerCategoryRules},model:{value:t.passengerType,callback:function(a){e.$set(t,"passengerType",a)},expression:"ticket.passengerType"}})],1)}))],2)],1)],1)})),1),a("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[e.$vuetify.breakpoint.smAndUp?a("v-btn",{attrs:{color:"primary"},on:{click:e.goToPreviousBookingStep}},[e._v(" Previous Step ")]):a("v-btn",{attrs:{icon:"",color:"primary",outlined:""},on:{click:e.goToPreviousBookingStep}},[a("v-icon",[e._v(" mdi-chevron-left ")])],1),a("v-spacer"),e.$vuetify.breakpoint.smAndUp?a("v-btn",{attrs:{color:"primary",disabled:!e.isFormValid},on:{click:e.goToNextBookingStep}},[e._v(" Next Step ")]):a("v-btn",{attrs:{icon:"",color:"primary",outlined:"",disabled:!e.isFormValid},on:{click:e.goToNextBookingStep}},[a("v-icon",[e._v(" mdi-chevron-right ")])],1)],1)],1)},ti=[],ai={name:"PassengerTypesFormStep",props:{rideDistance:Number,availableCars:Array,tickets:Array},data:function(){return{selectedTickets:[],travelerCategories:[],travelerCategoriesSelectItems:[],travelerCategoryService:q.getCrudServiceForResource("traveler-category"),travelerCategoryRules:[function(e){return!!e||"Passenger category is required"}]}},computed:{carsWithRequestedSeats:function(){var e=this.selectedTickets.map((function(e){return e.seat._id}));return this.availableCars.filter((function(t){var a=t.seats.map((function(e){return e._id})),r=a.filter((function(t){return e.includes(t)}));return r.length>0}))},isFormValid:function(){var e=this.selectedTickets.map((function(e){return e.passengerType}));return e&&!e.includes(null)}},watch:{selectedTickets:{handler:function(e){JSON.stringify(e)!==JSON.stringify(this.tickets)&&this.$emit("changedTickets",e)},deep:!0},tickets:{handler:function(e){this.selectedTickets=JSON.parse(JSON.stringify(e))},deep:!0}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedTickets=JSON.parse(JSON.stringify(e.tickets)),t.next=3,e.travelerCategoryService.index();case 3:e.travelerCategories=t.sent,e.travelerCategories.forEach((function(t){e.travelerCategoriesSelectItems.push({value:t,text:t.name})}));case 5:case"end":return t.stop()}}),t)})))()},methods:{requestedTicketsOfCar:function(e){var t=e.seats.map((function(e){return e._id}));return this.selectedTickets.filter((function(e){return t.includes(e.seat._id)}))},goToNextBookingStep:function(){this.$emit("nextBookingStep")},goToPreviousBookingStep:function(){this.$emit("previousBookingStep")}}},ri=ai,ni=Object(v["a"])(ri,ei,ti,!1,null,"aa10928e",null),ii=ni.exports;g()(ni,{VBtn:y["a"],VCol:T["a"],VIcon:C["a"],VRow:V["a"],VSelect:dr["a"],VSpacer:I["a"]});var si=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{staticClass:"mb-5",attrs:{"no-gutters":""}},[e.$vuetify.breakpoint.smAndUp?a("h2",{staticClass:"display-1 font-weight-medium"},[e._v(" "+e._s(e.title)+" ")]):a("h2",{staticClass:"headline font-weight-medium"},[e._v(" "+e._s(e.title)+" ")])]),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"px-2"},e._l(e.tickets,(function(t){return a("v-card",{key:t.seat._id,staticClass:"mb-4 elevation-3"},[t.seat&&t.passengerType?a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h1",{staticClass:"headline font-weight-bold"},[e._v(" Car "+e._s(e.carForSeatId(t.seat._id).number)+" Seat "+e._s(t.seat.number)+" ")]),a("h3",{staticClass:"body-2 font-weight-bold"},[e._v(" "+e._s(e.carForSeatId(t.seat._id).travelClass.name)+" ")]),a("h2",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" "+e._s(t.passengerType.name)+" "+e._s(e.discountText(t.passengerType.discount))+" ")])])],1),e.$vuetify.breakpoint.xsOnly?a("v-row",{attrs:{justify:"end","no-gutters":"",align:"center"}},[a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.price.toFixed(2))+" USD ")])]):e._e()],1),e.$vuetify.breakpoint.smAndUp?a("v-spacer"):e._e(),a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h1",{staticClass:"headline font-weight-bold"},[e._v(" "+e._s(t.price.toFixed(2))+" USD ")])])],1)],1)],1)],1)],1):e._e()],1)})),1)],1),a("v-divider"),a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h1",{staticClass:"headline font-weight-bold mt-2 mr-5"},[e._v(" Total: "+e._s(e.totalPrice.toFixed(2))+" USD ")])])],1)],1),a("v-row",{staticClass:"mt-7",attrs:{"no-gutters":"",align:"center"}},[e.$vuetify.breakpoint.smAndUp?a("v-btn",{attrs:{color:"primary"},on:{click:e.goToPreviousBookingStep}},[e._v(" Previous Step ")]):a("v-btn",{attrs:{icon:"",color:"primary",outlined:""},on:{click:e.goToPreviousBookingStep}},[a("v-icon",[e._v(" mdi-chevron-left ")])],1),a("v-spacer"),0===e.totalPrice?a("v-btn",{staticClass:"text-capitalize pl-4 pr-4",attrs:{color:"primary",outlined:""},on:{click:e.onPaymentCompleted}},[a("v-icon",{staticClass:"mr-2 pt-0",attrs:{small:""}},[e._v("mdi-send")]),e._v(" Finish Order ")],1):e._e(),e.totalPrice>0?a("PayPal",{style:{width:e.$vuetify.breakpoint.smAndUp?"200px":"100px","z-index":"0"},attrs:{amount:e.totalPrice.toFixed(2),items:e.paypalItems,currency:"USD",client:e.paypalProps.paypalCredentials,env:"sandbox","button-style":e.paypalProps.paypalButtonStyle},on:{"payment-completed":e.onPaymentCompleted,"payment-cancelled":e.onPaymentCancelled}}):e._e()],1)],1)},oi=[],li=(a("13d5"),a("35b3"),a("afb1")),ci={name:"ConfirmationBookingStep",components:{PayPal:li["a"]},props:{paypalProps:Object,availableCars:Array,ride:Object,departureStation:Object,destinationStation:Object,departureTimeText:String,arrivalTimeText:String,rideDate:String,tickets:Array},data:function(){return{}},computed:{title:function(){return 1===this.tickets.length?"This is your requested ticket":"These are your requested tickets"},totalPrice:function(){var e=this.tickets.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0);return Math.round(100*(e+Number.EPSILON))/100},paypalItems:function(){var e="Tickets for ride: "+this.departureStation.name+" ("+this.departureTimeText+") - "+this.destinationStation.name+" ("+this.arrivalTimeText+") with departure on "+this.rideDate;return[{name:"OTTR Order",description:e,quantity:"1",price:this.totalPrice,currency:"USD"}]}},methods:{goToNextBookingStep:function(){this.$emit("nextBookingStep")},goToPreviousBookingStep:function(){this.$emit("previousBookingStep")},carForSeatId:function(e){var t=this.availableCars.find((function(t){var a=t.seats.map((function(e){return e._id}));return a.includes(e)}));return t||null},discountText:function(e){return e?"("+e+"% discount)":""},onPaymentCompleted:function(e){console.log("Payment Completed."),this.$emit("paymentCompleted")},onPaymentCancelled:function(e){console.log("Payment Canceled.")}}},ui=ci,di=Object(v["a"])(ui,si,oi,!1,null,"e64829b4",null),mi=di.exports;g()(di,{VBtn:y["a"],VCard:A["a"],VCardText:b["c"],VCol:T["a"],VDivider:We["a"],VIcon:C["a"],VRow:V["a"],VSpacer:I["a"]});var pi=a("72bf"),vi=a("b9b9"),hi={name:"RideBookingPage",components:{ConfirmationBookingStep:mi,PassengerTypesFormStep:ii,CarLayoutWithSelectableSeats:Zn,GrayContainer:st},data:function(){return{ride:null,detailsFromQuery:null,departureStation:null,destinationStation:null,rideDateString:"",rideNotFound:!1,rideFound:!1,departureTime:null,arrivalTime:null,departureTimeText:"",arrivalTimeText:"",currentStepperStep:1,requestedTickets:[],availableCars:[],currentDisplayedCarIndex:0,currentDisplayedCarLayout:null,toggleSeatsLock:!1,selectedSeatsTimers:{},distance:0,config:null,kmPrice:0,finishedOrder:null,waitingResponseFromServer:!1,paypalData:{paypalCredentials:{sandbox:"AVkWHFnXdZqeisrLgPWwUDeG7xGXQ-ONQjEL_01-LMBJAm0m9QuDO4a2CXLar3Kh1gWiYBq9k4cAGa4G",production:""},paypalButtonStyle:{label:"paypal",size:"responsive",shape:"rect",color:"silver",tagline:!1},items:[]},formHeaderSteps:[{orderNo:1,title:"Pick Your Seats"},{orderNo:2,title:"Passenger Types"},{orderNo:3,title:"Confirmation"},{orderNo:4,title:"Finished"}]}},computed:{pageTitle:function(){if(!this.departureStation||!this.destinationStation||!this.rideDateString)return"";var e="";return e+='<em style="color: darkblue">'+this.departureStation.name+"</em> ",e+="("+this.departureTimeText+") ",e+='<i class="fa fa-long-arrow-right"></i> ',e+='<em style="color: darkblue">'+this.destinationStation.name+"</em> ",e+="("+this.arrivalTimeText+") ",e},seatsNotPicked:function(){return 0===this.requestedTickets.length},availableCarsExist:function(){return this.availableCars.length>0}},watch:{"$vuetify.breakpoint.smAndDown":{handler:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.availableCars.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.updateAvailableCarsAndCurrentDisplayedCarLayout();case 4:case"end":return t.stop()}}),t)})))()}}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=pi.parse("?"+e.$route.params.details),![a.from,a.to,a.date,a.departureTime,a.arrivalTime].includes(void 0)){t.next=5;break}return t.next=5,e.$router.push({name:"pageNotFound"});case 5:return t.next=7,wn.getStationByCode(a.from);case 7:return e.departureStation=t.sent,t.next=10,wn.getStationByCode(a.to);case 10:return e.destinationStation=t.sent,e.rideDateString=vi(new Date(a.date),"dd mmmm yyyy"),i=new Date(a.date.substr(0,4),parseInt(a.date.substr(5,2))-1,a.date.substr(8,2)),e.departureTime=new Date(i),r=a.departureTime.substr(0,2),n=a.departureTime.substr(3,2),e.departureTime.setHours(r,n,0,0),e.departureTimeText=vi(e.departureTime,"HH:MM"),e.arrivalTime=new Date(i),r=a.arrivalTime.substr(0,2),n=a.arrivalTime.substr(3,2),e.arrivalTime.setHours(r,n,0,0),e.arrivalTimeText=vi(e.arrivalTime,"HH:MM"),e.detailsFromQuery={sourceId:e.departureStation._id,destinationId:e.destinationStation._id,date:i.getTime(),departureTime:a.departureTime,arrivalTime:a.arrivalTime},t.next=26,Tn.getRideByDetails(e.detailsFromQuery);case 26:if(e.ride=t.sent,e.rideNotFound=null===e.ride,e.rideFound=null!==e.ride,!e.rideNotFound){t.next=31;break}return t.abrupt("return");case 31:return t.next=33,e.updateAvailableCarsAndCurrentDisplayedCarLayout();case 33:return t.next=35,e.recoverSelectedSeats();case 35:return s=e.ride.routeStations.find((function(t){return t.station._id===e.departureStation._id})),o=e.ride.routeStations.find((function(t){return t.station._id===e.destinationStation._id})),e.distance=o.distance-s.distance,t.next=40,zn.getConfig();case 40:e.config=t.sent,e.kmPrice=e.config.kmPrice,t.next=50;break;case 44:t.prev=44,t.t0=t["catch"](0),e.rideNotFound=!0,e.rideFound=!1,console.error(t.t0),e.$emit("serverError",t.t0.response.data.err.message);case 50:case"end":return t.stop()}}),t,null,[[0,44]])})))()},destroyed:function(){for(var e in this.selectedSeatsTimers)clearInterval(this.selectedSeatsTimers[e]);this.selectedSeatsTimers={}},methods:{decrementAvailableCarIfPossible:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.currentDisplayedCarIndex){t.next=2;break}return t.abrupt("return");case 2:return e.currentDisplayedCarIndex--,t.next=5,e.updateAvailableCarsAndCurrentDisplayedCarLayout();case 5:case"end":return t.stop()}}),t)})))()},incrementAvailableCarIfPossible:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentDisplayedCarIndex!==e.availableCars.length-1){t.next=2;break}return t.abrupt("return");case 2:return e.currentDisplayedCarIndex++,t.next=5,e.updateAvailableCarsAndCurrentDisplayedCarLayout();case 5:case"end":return t.stop()}}),t)})))()},toggleSelectedSeat:function(e){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.toggleSeatsLock){a.next=2;break}return a.abrupt("return");case 2:if(t.toggleSeatsLock=!0,r=t.availableCars[t.currentDisplayedCarIndex].seats.find((function(t){return t.number===e})),a.prev=4,t.waitingResponseFromServer=!0,r.selected){a.next=12;break}return a.next=9,$n.selectSeat(r._id);case 9:t.addNewSeatToSelectedSeatsList(r,t.availableCars[t.currentDisplayedCarIndex]),a.next=19;break;case 12:if(r.selectingUser!==t.$store.getters.getUser._id){a.next=19;break}return clearInterval(t.selectedSeatsTimers[r._id]),delete t.selectedSeatsTimers[r._id],n=t.requestedTickets.findIndex((function(e){return e.seat._id===r._id})),n>=0&&t.requestedTickets.splice(n,1),a.next=19,$n.deselectSeat(r._id);case 19:a.next=25;break;case 21:a.prev=21,a.t0=a["catch"](4),console.error(a.t0),a.t0.response.data.err.code===d.ERRORS.SEAT_ALREADY_SELECTED.code?t.$emit("serverError",a.t0.response.data.err.message,"Seat already reserved"):t.$emit("serverError",a.t0.response.data.err.message);case 25:return a.next=27,t.updateAvailableCarsAndCurrentDisplayedCarLayout();case 27:t.waitingResponseFromServer=!1,t.toggleSeatsLock=!1;case 29:case"end":return a.stop()}}),a,null,[[4,21]])})))()},updateAvailableCarsAndCurrentDisplayedCarLayout:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.waitingResponseFromServer=!0,t.next=4,Tn.getRideByDetails(e.detailsFromQuery);case 4:e.ride=t.sent,e.availableCars=Tn.getCarsContainingSourceDestination(e.ride,e.departureStation._id,e.destinationStation._id),a=JSON.parse(JSON.stringify(e.availableCars[e.currentDisplayedCarIndex].carLayout)),a=$a.transformFromMongo2FrontendModel(a),e.$vuetify.breakpoint.smAndDown&&(a=$a.rotateCarLayout(a)),r=JSON.parse(JSON.stringify(e.availableCars[e.currentDisplayedCarIndex])),r.carLayout=a,n=e.ride.routeStations.find((function(t){return t.station._id===e.departureStation._id})),i=e.ride.routeStations.find((function(t){return t.station._id===e.destinationStation._id})),e.currentDisplayedCarLayout=$a.fillCarLayoutWithColorfulSeats(r,n,i,e.$store.getters.getUser),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.error(t.t0),e.$emit("serverError",t.t0.response.data.err.message);case 20:e.waitingResponseFromServer=!1;case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()},onChangeTickets:function(e){var t=this;this.requestedTickets=JSON.parse(JSON.stringify(e)),this.requestedTickets.forEach((function(e){e.passengerType&&(e.price=t.kmPrice*t.distance*(1-e.passengerType.discount/100),e.price*=1-e.car.travelClass.discount/100)}))},onNextBookingStep:function(){this.currentStepperStep++},onPreviousBookingStep:function(){this.currentStepperStep--},onPaymentCompleted:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={rideId:e.ride._id,departureStationId:e.departureStation._id,arrivalStationId:e.destinationStation._id,tickets:[]},r=Object(Ya["a"])(e.requestedTickets);try{for(r.s();!(n=r.n()).done;)i=n.value,a.tickets.push({seatId:i.seat._id,travelerCategoryId:i.passengerType._id})}catch(o){r.e(o)}finally{r.f()}return t.prev=3,e.waitingResponseFromServer=!0,t.next=7,Jn.placeOrder(a);case 7:for(s in e.finishedOrder=t.sent,e.currentStepperStep++,e.selectedSeatsTimers)clearInterval(e.selectedSeatsTimers[s]);e.selectedSeatsTimers={},t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),console.error(t.t0),e.$emit("serverError",t.t0.response.data.err.message);case 17:e.waitingResponseFromServer=!1;case 18:case"end":return t.stop()}}),t,null,[[3,13]])})))()},sendSms:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a="Your order #"+e.finishedOrder.number+" for the train "+e.ride.route.train.trainCategory.code+"-"+e.ride.route.train.number+" with departure's ride on "+e.rideDateString+", "+e.departureStation.name+" ("+e.departureTimeText+") - "+e.destinationStation.name+" ("+e.arrivalTimeText+") contains the following reserved seats:\n",r=Object(Sr["a"])(new Set(e.requestedTickets.map((function(e){return e.car.number})))),n=Object(Ya["a"])(r);try{for(s=function(){var t=i.value,r=e.availableCars.find((function(e){return e.number===t}));a+="- Car "+r.number+", ";var n,s=r.seats.map((function(e){return e._id})),o=!0,l=!1,c=Object(Ya["a"])(e.requestedTickets);try{for(c.s();!(n=c.n()).done;){var u=n.value;s.includes(u.seat._id)&&(l&&(o=!1),l=!0)}}catch(v){c.e(v)}finally{c.f()}a+=o?"Seat ":"Seats ",l=!1;var d,m=Object(Ya["a"])(e.requestedTickets);try{for(m.s();!(d=m.n()).done;){var p=d.value;s.includes(p.seat._id)&&(a+=l?", ":"",a+=p.seat.number,l=!0)}}catch(v){m.e(v)}finally{m.f()}a+="\n"},n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}return a+="\nHave a Safe Journey,\nThe OTTR Team\n.\n.",t.next=7,$e.sendSms(a);case 7:case"end":return t.stop()}}),t)})))()},recoverSelectedSeats:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],r=Object(Ya["a"])(e.availableCars);try{for(i=function(){var t=n.value,r=t.seats.filter((function(t){return t.selectingUser===e.$store.getters.getUser._id&&!t.reservations.map((function(e){return e.order.user})).includes(e.$store.getters.getUser._id)})),i=r.map((function(e){return{seat:e,car:t}}));a=a.concat(i)},r.s();!(n=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}s=Object(Ya["a"])(a),t.prev=4,s.s();case 6:if((o=s.n()).done){t.next=13;break}return l=o.value,t.next=10,$n.preserveSeat(l.seat._id);case 10:e.addNewSeatToSelectedSeatsList(l.seat,l.car);case 11:t.next=6;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](4),s.e(t.t0);case 18:return t.prev=18,s.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})))()},addNewSeatToSelectedSeatsList:function(e,t){this.selectedSeatsTimers[e._id]=setInterval($n.preserveSeat,d.SEAT_SELECTION_REFRESH_TIMEOUT,e._id),this.requestedTickets.push({seat:e,car:JSON.parse(JSON.stringify(t)),passengerType:null,price:0}),this.requestedTickets.sort((function(e,t){return e.seat.number-t.seat.number}))}}},gi=hi,fi=a("a797"),Si=a("490a"),yi=Object(v["a"])(gi,Hn,Yn,!1,null,"2105def2",null),Ai=yi.exports;g()(yi,{VBtn:y["a"],VCard:A["a"],VCardSubtitle:b["b"],VCardTitle:b["d"],VCol:T["a"],VDivider:We["a"],VIcon:C["a"],VOverlay:fi["a"],VProgressCircular:Si["a"],VProgressLinear:zr["a"],VRow:V["a"],VSpacer:I["a"],VStepper:Ln["a"],VStepperContent:Nn["a"],VStepperHeader:On["a"],VStepperItems:On["b"],VStepperStep:Un["a"]});var bi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GrayContainer",[a("h1",{staticClass:"headline font-weight-black mb-4 pa-0"},[e._v("My Tickets")]),a("v-divider"),e.loadingOrders?a("v-progress-linear",{attrs:{indeterminate:"",color:"primary",height:"4"}}):e._e(),e.myOrders.length||e.loadingOrders?a("v-row",{staticClass:"mt-3",attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"12"}},e._l(e.myOrders,(function(t){return a("v-card",{key:t.number,staticClass:"mb-4 elevation-3"},[a("v-card-title",{staticClass:"py-2"},[a("h2",{staticClass:"title font-weight-bold"},[e._v("Order #"+e._s(t.number))]),a("v-spacer"),a("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.price.toFixed(2))+" USD")])],1),a("v-divider"),a("v-card-text",{staticClass:"mb-0 pb-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Departure ")]),a("h1",{staticClass:"display-1 font-weight-bold"},[e._v(" "+e._s(t.departureStation)+" ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.departureDateText)+" ")])])],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Departure ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.departureStation)+" - "+e._s(t.departureDateText)+" ")])])],1)],1),a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("h1",{staticClass:"headline font-weight-bold"},[e._v("Train "+e._s(t.trainName)+" ")])]),a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("h1",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.distance)+" Km, "+e._s(t.spentTime)+" ")])]),a("v-spacer"),a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-btn",{attrs:{icon:"",color:"accent"},on:{click:function(a){return e.toggleVisibilityTicketsForOrder(t)}}},[a("v-icon",[e._v(e._s(t.showTickets?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Arrival ")]),a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.arrivalStation)+" - "+e._s(t.arrivalDateText)+" ")])])],1)],1),a("v-col",{attrs:{cols:"12",md:"4"}},[e.$vuetify.breakpoint.mdAndUp?a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Arrival ")])]),a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h1",{staticClass:"display-1 font-weight-bold"},[e._v(" "+e._s(t.arrivalStation)+" ")])]),a("v-row",{attrs:{justify:"end","no-gutters":""}},[a("h2",{staticClass:"title font-weight-bold"},[e._v(e._s(t.arrivalDateText))])])],1)],1):a("v-row",{attrs:{justify:"start","no-gutters":""}},[a("v-col",[a("h3",{staticClass:"subtitle-2 font-weight-bold"},[e._v(" Ride Details ")]),a("v-row",{attrs:{"no-gutters":""}},[a("h2",{staticClass:"title font-weight-bold"},[e._v(" Train "+e._s(t.trainName)+" ")]),a("v-spacer"),a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.distance)+" Km, "+e._s(t.spentTime))])],1),a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-btn",{attrs:{icon:"",color:"accent"},on:{click:function(a){return e.toggleVisibilityTicketsForOrder(t)}}},[a("v-icon",[e._v(e._s(t.showTickets?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1)],1)],1),a("v-expand-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTickets,expression:"order.showTickets"}]},[a("v-divider"),a("v-card-text",[a("v-row",e._l(t.tickets,(function(t){return a("v-col",{key:t._id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[a("v-card",{staticStyle:{"border-left":"3px solid orange"},attrs:{elevation:"3",color:"#F4F4F4"}},[a("v-card-title",{staticClass:"pb-2"},[a("h1",{staticClass:"headline font-weight-bold"},[e._v(" Car "+e._s(t.car.number)+" - Seat "+e._s(t.seat.number)+" ")])]),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.passengerType.name)+" ")]),a("h3",{staticClass:"subtitle-1 font-weight-bold"},[e._v(" "+e._s(t.car.travelClass.name)+" ")])]),a("v-col",[a("v-row",{staticClass:"fill-height",attrs:{justify:"end","no-gutters":"",align:"center"}},[a("h2",{staticClass:"title font-weight-bold"},[e._v(" "+e._s(t.price.toFixed(2))+" USD ")])])],1)],1)],1)],1)],1)})),1)],1)],1)])],1)],1)})),1)],1):a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[a("v-row",{attrs:{justify:"center"}},[e._v(" No Tickets Found... ")])],1),a("v-card-subtitle",{staticClass:"pt-2 pb-5"},[a("v-row",{attrs:{justify:"center"}},[e._v(" Looks like you haven't placed any order so far. "),a("br"),e._v(" You can book your seat anytime from the Home page! ")])],1)],1)],1)],1)],1)},Ti=[],wi=a("b9b9"),Ei={name:"MyTickets",components:{GrayContainer:st},data:function(){return{myOrders:[],loadingOrders:!0}},created:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Jn.getOrdersForUser(e.$store.getters.getUser._id);case 3:e.myOrders=t.sent,r=[],e.myOrders.forEach((function(e){return r.push(e)})),r.forEach((function(e){e.showTickets=!1,e.departureStation=e.tickets[0].departureStation.station.name,e.arrivalStation=e.tickets[0].arrivalStation.station.name;var t=e.tickets[0].departureStation.orderNo-1,a=e.tickets[0].arrivalStation.orderNo-1;e.departureDateText=wi(e.tickets[0].ride.departureDates[t],"dd mmmm yyyy (HH:MM)"),e.arrivalDateText=wi(e.tickets[0].ride.arrivalDates[a],"dd mmmm yyyy (HH:MM)"),e.distance=e.tickets[0].arrivalStation.distance-e.tickets[0].departureStation.distance;var r=new Date(e.tickets[0].ride.departureDates[t]),n=new Date(e.tickets[0].ride.arrivalDates[a]),i=n-r,s=Number.parseInt(i/1e3/60/60),o=Number.parseInt(i/1e3/60);e.spentTime=s>0&&o%60>0?s+" h "+o%60+" min":s>0&&!(o%60)?s+" h":!s&&o%60>0?o%60+" min":"IMMEDIATELY",e.trainName=e.tickets[0].train.trainCategory.code+"-"+e.tickets[0].train.number})),r.sort((function(e,t){return t.number-e.number})),(a=e.myOrders).splice.apply(a,[0,e.myOrders.length].concat(r)),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$emit("serverError",t.t0.response.data.err.message);case 14:e.loadingOrders=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},methods:{toggleVisibilityTicketsForOrder:function(e){var t,a=this.myOrders.findIndex((function(t){return t.number===e.number}));if(e.showTickets)return e.showTickets=!1,void this.myOrders.splice(a,1,e);var r=[];this.myOrders.forEach((function(e){return r.push(e)})),r.forEach((function(e){return e.showTickets=!1})),(t=this.myOrders).splice.apply(t,[0,this.myOrders.length].concat(r)),e.showTickets=!0,this.myOrders.splice(a,1,e)}}},Ci=Ei,xi=Object(v["a"])(Ci,bi,Ti,!1,null,"8ab152dc",null),Ri=xi.exports;g()(xi,{VBtn:y["a"],VCard:A["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VCol:T["a"],VDivider:We["a"],VExpandTransition:kn["a"],VIcon:C["a"],VProgressLinear:zr["a"],VRow:V["a"],VSpacer:I["a"]}),r["default"].use(P["a"]);var _i=[{path:"/login",name:"login",component:Ee},{path:"/register",name:"register",component:ke},{path:"/my-account",name:"my-account",component:Qe,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/my-tickets",name:"my-tickets",component:Ri,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/dashboard",name:"dashboard",component:pt,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes",name:"routes",component:It,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/create",name:"routesCreate",component:Qr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/:routeName",name:"routesEdit",component:Qr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/routes/:routeName/rides",name:"rides",component:yn,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts",name:"carLayouts",component:nr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts/create",name:"carLayoutsForm",component:pr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/car-layouts/edit/:carLayoutName",name:"carLayoutsEdit",component:pr,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/railway-management/miscellaneous",name:"miscellaneous",component:Sa,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/users-management/students",name:"students",component:ka,meta:{requiredAuthGroup:d.USER_GROUPS.ADMIN_ONLY}},{path:"/",name:"home",component:ge},{path:"/ride-search/:filters",name:"rideSearchResults",component:jn},{path:"/book-ride/:details",name:"rideBooking",component:Ai,meta:{requiredAuthGroup:d.USER_GROUPS.AUTHENTICATED}},{path:"/copyrights",name:"copyrights",component:yt},{path:"*",name:"pageNotFound",component:Ie}],Di=new P["a"]({mode:"history",base:"/",routes:_i});Di.beforeEach((function(e,t,a){var r=Y.getters.getUser.role;Y.getters.isLoggedIn&&["login","register"].includes(e.matched[0].name)?a({path:"/my-account"}):e.matched.every((function(e){return!e.meta.requiredAuthGroup}))||Y.getters.isLoggedIn&&e.matched[0].meta.requiredAuthGroup.includes(r)?a():a({path:"/login"})}));var ki=Di,Li=a("9670"),Ni=a("f309"),Oi={home:"mdi-home"},Ui={icons:{iconfont:"mdi",values:Oi},theme:{themes:{light:{primary:"#1515CA",secondary:"#FFF",accent:"#F28110",error:"#DC0028",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",anchor:"#0000db"}}}};r["default"].component("v-text-field",ee["a"]),r["default"].component("v-select",dr["a"]),r["default"].use(Ni["a"]);var Vi=new Ni["a"](Ui);r["default"].config.productionTip=!1,i.a.defaults.headers.common["Authorization"]="Bearer ".concat(Y.state.token),r["default"].use(Li["a"],{vuetify:Vi}),new r["default"]({router:ki,store:Y,vuetify:Vi,render:function(e){return e(B)}}).$mount("#app")},"593e":function(e,t,a){},6817:function(e,t,a){},"70fd":function(e,t,a){"use strict";var r=a("e387"),n=a.n(r);n.a},7125:function(e,t,a){"use strict";var r=a("adf3"),n=a.n(r);n.a},"721d":function(e,t,a){"use strict";var r=a("32f8"),n=a.n(r);n.a},7629:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAABRSURBVEhL7cwxCoAwEEXB3P8EluIpUmlnoUEsA5tgLYl3EDv59ZYPpp7QbL/z6q6XFGwecxzclWWi/qMW1IJaUAtqQS2oBbX46l6PZpu75zpftUqwrgXlL9IAAAAASUVORK5CYII="},"7a83":function(e,t,a){e.exports=a.p+"img/carousel-img-4.51e32c4d.png"},"7a8b":function(e,t,a){},"7cc9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFCsDEgo7XwAAAbNJREFUSMft1sFK40Acx/HvrElaGyKLsra0xogIVkEq1JuHXsRePHjwAbwoPoUefQdfR/Cg9CjWglXK4qqLIZjatDRmPHgRbRS7bXNY/6fhzw8+zDAz/EWlUpFnhQK9qjHXZX5nB2V3V3yU+0EfKuE4n2Z6DrdUFe34mFqtJh3HmQ7LKW8bmu9jeB6xdrsrWPN9KJeZ39yEePzCW1jgfGsLy7KEqqrhcNq2mQ4C9FehL9XQEKTTL+tmk+GTExZPTylvb8tfxaKIxWKd4UQQoCeTMDHRu/NvNMgeHFCyLDmby4m+Xa4wPL+/j+u6DBYGuLvj+upKDh4GxkolIoGnjo6igbm5iQiu1yOC+/lXf8Pf8H8Gp1LRwE42Gw18vbQUAZxI8DQ3N3j499oapmmKjqNPAPDwALbdvTA6+r43Pk5zfZ2fitJ55vqr6yiPj8QvL7t+Jsl6HSYnXxojI9wWCtgbG5iplAidMu8Ng3vD6Hqzmu9TbDRwl5f5k8vRyufJZDLC1LSP5+p/LcPzYGWFp709kVFVpJSD+0CcmRkURQlFAUS1WpWtw8OeoW1dZ2p1VXyWewYn9ICrfKPHIwAAAABJRU5ErkJggg=="},"85ec":function(e,t,a){},"8a7c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiEeiGdrYgAAAZFJREFUSMftlr9OwlAUh7+LkLZAE8IgaowhLtbNxMTBN/BFfAMGV56C6Cs4MDgZF3cZDIMM2kgasOFPQiqt2BbrQGJAsIMWdegZ7z253z0nv3PvT1iWxV9E8qsN3/cxDCNYubtj4+aGXKMBphl+WjYLa2s8Hh7S399no1gUqqouTBWLKjZNM5CrVTYvLsBxvl/W6iq1kxOKmiYkSQoHG4YR7JZK0OlE09N0msbxMYWjI5FKpT6WE9M5ruuSPz+PDgrgOGinpzSbzWB6eQbcarWCwvV19EpyHHbOzlgIFkIg1WqwJJUr9TqDwWB7Dux5Huu3t8ubn9EIy7IeZsTll8tB7v4erq4gnYatrWihvR6026BpuAcHOLkcycfLy8CqVAB4VhT2ul0K2Szk89GB223q4zE9w0DS9ckDkrJt+lND/rakTrvJJENZZijL86r+zYjBMTgGx+AY/P/Bc/Z2NLGZP3OXn8L2PF4zmXDwUyaDb9skXl6is1yJBM+KEg7uq+rM/xyLK6oQuq6Pfd//9Qu8AzNfl7Oy+pOMAAAAAElFTkSuQmCC"},"8c2f":function(e,t,a){e.exports=a.p+"img/ottr-icon.b2123aad.png"},"8f8e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiAf5ntqtQAAAWxJREFUSMft1U8vA0EYx/HvbLbTKjPaAxGl1ZREgsQLcHR09RacJCKu3kXfg1fBa8ABPdSm0pBKxGGqstpNx6ER6l9Fdutgn9vMYT7zzPwmIzzPs0EQMOxyJyYPODvfHzrs8Ef1Z7D7fkJKGEmDE+KWnnzwfeh2v4GVhmJxBNChwa3WLZdVaLe/gVMpgCmaZi40WOl7HKfzz8MVwzEcwzEcwz//j31fI2VvEATh/sN9HTrguq/rC2MMo2rXwh2WQyBN0yyHiirtATd0OivIxBIge3Cv24Dx7J41phbZ8V7Xy+TzedF3x4lEgqCTiwxVuo3WuvQhXNZaKhebKB0NLJgnk8l4n6Y6l8sJwWIE3QacHu98/ZyklFTOt9E6FSr6YDYoFAqi7wRewvW2Go2GLS2UsZzQNO6vUa1TXNW2UGNrIplMMhB+SXm9Xrczs0dksmdAA2MeB3TXRTAFTONV10mnV4VS6vM7/wqOup4BthBwJZ+Xj90AAAAASUVORK5CYII="},"91cf":function(e,t,a){e.exports=a.p+"img/woman-traveling.9bac68ad.png"},"9b19":function(e,t,a){e.exports=a.p+"img/logo.63a7d78d.svg"},"9e14":function(e,t,a){e.exports=a.p+"img/carousel-img-5-2.ab554cdc.png"},a14c:function(e,t,a){"use strict";var r=a("005a"),n=a.n(r);n.a},a29e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSY72fQ13gAAAW9JREFUSMftlr9Lw0AUx78XL4kmTZsY2oKODvoviDgI+ndUF8FBsncLhJL/w01cHKTWH4ijOOjkZlzVodbSa5c05xBFS1qLeGmXfOFxcMvnvbvv4z3iOA6PogiTFjk8MnnjtDVxsIQpaWpgmrigcUgCUwrDOH5aKQFWFKBYik9Rem8BzeYYMKVALgdEfV0YWJ1lmbkycAbOwBk4A/9hHneZAUrj1SeKxM7hgQql7wAA0m63cX5Z4L0eRxDEc5jO6GKphKHTASyTYmGxD0n6BMdbQoira5s/BVpqzxs8VuD7Phn4Y1mWQamSGjRfYFBVdSlhLs456ic7mLdZKmDLInBdNxjqas/ziG0T4VDTYrg42x3dToqioFHfQ6nMhEK1uSJqtRr5tY993ye3N/tYXunCtP6XQKnM0HpbxdbmA5FledDoX65O7sIhqtUqX1s/hqY9gzGO1xd9bHW6TpDPA/d3G9iuHBDDMIZ32Chw2voAE2FwPG4C1hQAAAAASUVORK5CYII="},a618:function(e,t,a){},ab68:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFiEJC7TupQAAAYJJREFUSMftlstKI1EQhr8TupMQPY2uFEdhLgzEG+repUsfY3ApDPgiOr7FbGc5s5sHcOMgJDaGNtKgi1DtJZ5u+8xC0YS0WUhHXXQt6xT1nSr+okqJCG9hznMPSZIQBIGdnfvDxOQhECJyPTSZ9lIU08AMfnODWm1Vaa0zY1VWxWEY2i9ff2A5IBLnxVV5XpXWyRZ6fF1VKpXh4CAIbH1hB5FuLi3VXsKlbHKXfFOu6z76S71BxhjqC/u5QQEicRj3ftFqtWyvvw/cbret5Sh3IUXisLK2SyZYKUV9/ifRiERuadLpdD4PgOM4xnHbIxufSMqIyHGfuMb0dwsXWH4DNSJZyhWqPR84I46XKbuLQBl1frFng9Pth9mFD7MwNfWJSD7mCP7Lv8MYY6D00GOnWhWMeQpK09G0Ok3vC8tU9WtaAS7ABbgAF+D3Dx44IbtdgBDtXecGubqKB7aeM3gpQKNxQ6l0kxv4ttu/EjPBxtC3nwtx5WXK9/27JEle/QP/AZaMme+JtEdAAAAAAElFTkSuQmCC"},ac0b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPEBghjJayxQAAAV9JREFUSMft1rGKwkAQBuB/sjsJkkSCJCJIDBLfwNIn9jV8DtnGxhQqxKCFq3uVoqeR41i1MH+ZIh/MzjBDSimjtca7I5VSmE6nb4cdfCgfg+XvD0IIMDOIyBqitYbWGsaYetjzPCRJAs/zrMGbzQbr9RrH47EellIiCAK0Wi1r8H6/v6vg9zVXAzdwAzdwA/99HwshIIQAAJxOJ6t7+DpEBMdxLv+X4/GYyrI0u90OSikws9WVCABhGAIA4jhGr9eDEAJUluXlSpjNZqYoipeVdzKZYDAY0M0bMzN833/dm0qJdrud3zWXMQbdbtfqyXOdTqeDKIrUw67u9/sUx7F1lJmRZVn9OLmui+FwaLXkZzTLMnp63qZpSsxs5vM5lsslDofDv1Hf95HnOUajETHz7Xidu/rRLbxYLMxqtcJ2u0VVVaiq6inkui6CIEAYhoiiCGma0nmU7ua6Dn51fgBryGYdtfqZQAAAAABJRU5ErkJggg=="},adf3:function(e,t,a){},af4b:function(e,t,a){e.exports=a.p+"img/carousel-img-5.553a3032.png"},b1f2:function(e,t,a){e.exports=a.p+"img/bringing-people-together.af680441.png"},b6b4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh82/BfY5QAAAY1JREFUSMft179qwkAcB/DvpUo0MRAc1EoJblWhUBA6CD6Ar+AD+AYOrj6F6Cs4ODiJUNwVKg46OAhBG/wDkjbRJrHppCBRhKgJFL/j/eHD3YXc74gsyziXcbNpehUF1wqdycBzbpBRKplyuYwlx10NTrTboE51EkJgGAb40Qi3iGXFmqZhMpmYdLeLx14PaLXw5fffFhZF0QzWanhpt4Hd2TMMXudz/NoENgA+WdZyVHtYkiQzUSgAs9nhTEFAOBCwvzRJgqEox2HDMOCr163oLsGgfVhVQa3XlmZqt8VPjQacDAUAD4MBoKrOw9FOB06HAgB+OHQHhiS5BLuQO3yH/yt8ye1zERyJuAOP02l34GUq5Q4cjcUIQiHnYY7j0C0WAYZxDN7XXLF4nAzzeTNeqRwWBYsFMJ3aBhRdh0pRp2GaphHOZslHMmk+V6vw9/vAZgNMp+hvt9A8HlvwD8seLY/JqSfMarXyyrKsJXM5vIsivn0+Z14SPM/rgiAQ7e0NtK47/8tUef4mH9cfd72OEZf2jM8AAAAASUVORK5CYII="},b92a:function(e,t,a){e.exports=a.p+"img/error-404-logo.f6db3394.png"},ba8e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSIu0EUUMQAAAYlJREFUSMft1z1Lw0AcBvDnYg2Yo60uOuiu6C5VcRCkWvwQ9Qt0L2mhX0IUuji4K46SOol01MHBF+jc1KE15qxJz5yD1ra0tRDzAtJnzR0/LvlzPCGGYWBUTs9WhEJf4VWur9KIjFqkXcZFuSzAuWculCkH0rCHhBBwztFsCviRvhPbto18Pi9Se8fg3EalAjiOz3A2mxU7qSOsJgSeHimACGSZIRZzj3MO2Db6PtUPnMvlRGL98BvsWjBBMb/AXJ/MNAG9OgTmnCO5e4CHezpws/NBXcOyzCANmCQJAFRVFbruzxANiwQAG5vnaNRp8LCiVBF0JABgTIQD13QaDhxGxvAY/qfw9AwLB6aUhAPHYiG96tubrXDg/fQJmZ1jwcPRaBQ1fS3QISPtQm9ZFrTSsnhrPveWAsJgmu4B6x1oNL4KX6dXZzowALRaLaiqKraTRdTrAsYLhckY9OrfKq7j9O7vg7tTKBQmLcuyF5eKuLvjnnbrX+F2LrS4KGle/8JkRl+Zkk+X6ic5baezqoahWQAAAABJRU5ErkJggg=="},bd32:function(e,t,a){e.exports=a.p+"img/carousel-img-3.af68ea1f.png"},c0d6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUZCSYjypitiAAAAYpJREFUSMftls9KW0EUh79JbxK8Q2KyqIVqNz6FWlwUJCp9B9PHCDeBvIS00I2KT6BbcSXFpS7dmI2bXCW9aXqnaW7GmW7ERBL/IDfWxT0wmzOH+eZ3+A1nRKfT4X+Ec9+G1hrP8+zH5T1ct4lSlktfPnhYoaiQUpDPw+nJJ76Ud0UulxtbK8YprlartrS2ie9b2oF8tqqZd4pLf5Hyxr7IZrMPgyuVil1Y+vqouqdGoahwp96yWjoT6XT6Np8aLoqiiNX1b7FBAdqB5E/3Cs/z7HD+DrhWq9lWy8ZupHYgWSl9ZyxYCMH65y1+tuREXBwElnq9Pj8C7vf7aB1N7Pl0fkl6vd75HXMdHE7bbtfSaEAmA86bmFULRRhCseDwfvaaVArE9s4He3x8AYAxkM/D7ByY6/jgoVL4TdAaUjc9dlz5G60HRcZMptXGDNaIq18yEnACTsAJOAG/frAz+q2FMIRMRsUG6f19AjiKwG8O5mYcofXouB2reHg+J+aKzVw/jsrGnTIvfoF/X06XBD9WvuoAAAAASUVORK5CYII="},c86c:function(e,t,a){e.exports=a.p+"img/user-logo-man.a069724d.png"},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d12b:function(e,t,a){e.exports=a.p+"img/carousel-img-2.8d48914a.png"},d7f9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AMPECEiGxtuxQAAAYtJREFUSMft182K4kAUhuG3YsVo4l9UYkAkKO4EN+4Fl16b1+VNCAbUjaiQgH9oDDWr2fR0uiGjcdF9lsWBhzoUh6/EYrFQs9mMZ1Uul2M6nTKZTMRXfRovqDiOv+15OqyUYrvdsl6vVRiGvaQ++fFACIGmaQghUsFCCA6HA/P5HCnlsl6v43kenucJXdeTYSkltVqNQqGQ+tblchmAx+PBbrcjCAKCIFDD4VAYhpEM27ZNpVJ52vijKGK1WmGaphoMBuJljysJXy6XHI9HMoUBzuczm81GZQ4DhGHIW+C3jBrgdDq9B77f7++BX7qrf+Ff+GfBpVLph8F/Q0KmsK7rNBqN7GHXdel0OuLT6KOU4na7cb1eUwPFYvGfM8uy6Pf7SCk/z1xRFLHf7wmCIHXKdByHarUKgGEYNJtNut0uruuKxJQZxzGXyyX1bYUQ2LZNq9XCsiwcx6Hdbot8Pv91rv7vxaBp9Ho9xuOx0HUdpVR2C8Q0TaSUiSiA8H1f+b7/1E/baDT69hvyBxkLdtt6xR7OAAAAAElFTkSuQmCC"},e387:function(e,t,a){},ebf9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAcSURBVChTYywqb/jPQARggtIEwahCvIBIhQwMAOV/Anze9NqYAAAAAElFTkSuQmCC"},f57d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFCoHDHzOBwAAAXtJREFUSMft1rtqAkEYhuF3jefDsigRo2E1pLGRFEKKNLkJb0GvQUu9Ei/BwtJO7EwbTRAJCGYFtXBZTXRgU4SIOZiEsGqR/cppnp+Zb5iR+v2+KYRg33E+N5vcF4t7hx0cKAeDnR8XIrrOsWFYOtHc4WAYDrN0OrfDJ4bBmc8HsmwZbIxG6IsFk1BoO+wFiMUgHLYMDkyneFarf14uG7ZhG7ZhG/79e7wKBIjoOgC6z7ezSdxCEHx6Wr9S0mw2Q1QqptLrQaMBfj+oqrXqeAzDIaTTLC8vmSvKKwwghOCoXDZDrdbOtve2WkVVVendGbtcLh4vLnZ3qF4vsiyffyqXaZo8Z7OWfnk2s8hkUBSl/2WrE4mENLq+tl71+7nL57dfJ7fbzTSXg2jUUrRbKJBMJqXN5XW5NqNpmumt1Tit12E+/zsajXJTKpFKpyWPx8OP8FvLB4OBedTpEG+3Ubpd0LTvoWAQYjEerq6YZLPEUykptPGl/RW867wAtKJ5b85KowwAAAAASUVORK5CYII="},f584:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5AUKFh425QzppAAAAYxJREFUSMft1z9Lw0AYBvDnjraU2DtiHSpai1CUWgV1d/QzODg4ugt+EdFVcHd11M1ZFKxIW0pDiQR1KBf7LzlyTq0Nba3Utln6jMkbftzlTfKGCCEwLC3nSkWjw+v+mo/3Q4SGFc2xE1V8uoTjjM1FXD8AHXSSEAIpJYBPTCI9K3YcB6ZpqszGNbSYCYVbSDlhuFKpqEz2AvrCK2wBoAEwrmE5WYPnjQY0m4At0HOrOrBlWSqTPYUQTV+BLbaQSJT/sTYLhUKjPyylRHrtvAf9wVdHZhmvg9JGz3Ha3mKFR0wzFACSK3ewRWj6sD6fw7RD2w0QCCxEPagVYwbP4Bk8HphxLxiYYDGorV4KBi4V94OBNW2HcB4NoLkYg1E+BuNyanDn689ie+RL5BXjN76hgPESgLeRgVrNRavPREW6/yRc14VhGGp79wwKRdgiAsbv8ZJzR54yPQ+QEr7r43reD3enWq2GhRBOev0IueeHsc7WcT0/+M2l67qbSqVIJLwJSif2HP+WyESa6xtlG5oG5juszwAAAABJRU5ErkJggg=="},f9d4:function(e,t,a){"use strict";var r=a("593e"),n=a.n(r);n.a}});
//# sourceMappingURL=app.e5c4359f.js.map